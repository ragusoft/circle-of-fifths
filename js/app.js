(()=>{"use strict";var t={276:(t,e)=>{var i;Object.defineProperty(e,"__esModule",{value:!0}),e.ChordType=void 0,(i=e.ChordType||(e.ChordType={}))[i.MAJOR=0]="MAJOR",i[i.MINOR=1]="MINOR",i[i.DIMINISHED=2]="DIMINISHED"},651:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0});const s=i(770),n=i(882),r=i(993),a=i(270),h=i(926),o=i(81),l=i(575),c=i(119),f=i(859),d=i(254),u=i(276);class g{constructor(t){this.dragging=!1,this.adjusting=!1,this.keyChangeListeners=[],this.keyIndex=0,this.cof=document.getElementById(t),this.two=this.initTwo(),this.keyNames=d.default.getFifths();const e=this.two.width/2,i=this.two.height/2,r=n.default.getBgImageUrl()||null;r?(this.tex=new s.default.Texture(r),this.tex.repeat="repeat"):this.tex=null;const a=this.initBackground();this.addKeyChangeListener(this),this.wheelGroup=this.initWheels(),this.addKeyChangeListener(this.minWheel),this.addKeyChangeListener(this.majWheel),this.addKeyChangeListener(this.dimWheel),this.rootGroup=this.two.makeGroup(a,this.wheelGroup),this.rootGroup.translation.set(e,i),this.rootGroup.rotation=n.default.degreesToRads(-90),this.addTouchListeners(e,i),this.addMouseListeners(e,i)}initTwo(){return new s.default({type:s.default.Types.canvas,autostart:!0,width:this.cof.clientWidth,height:this.cof.clientHeight}).appendTo(this.cof)}initWheels(){var t={size:24,family:n.default.getFont(),stroke:n.default.getPrimaryColor(),fill:n.default.getPrimaryColor()};this.majWheel=new a.default(t,u.ChordType.MAJOR,g.MAJ_R1,g.MAJ_R2,!1),this.minWheel=new a.default(t,u.ChordType.MINOR,g.MIN_R1,g.MIN_R2),this.dimWheel=new a.default(t,u.ChordType.DIMINISHED,g.DIM_R1,g.DIM_R2);const e=new h.default(g.SPOKE_R1,g.SPOKE_R2),i=new c.Circle(0,0,g.SPOKE_R1);return i.stroke=n.default.getPrimaryColorWithOpacity(.75),i.linewidth=1,i.fill="transparent",new o.Group(this.dimWheel,this.minWheel,this.majWheel,e,i)}getArcColor(){return n.default.getPrimaryColorWithOpacity(.5)}initBackground(){const t=this.two.makeGroup();this.texBg=new l.ArcSegment(0,0,g.MAJ_R1-25,g.DIM_R2,n.default.degreesToRads(0),n.default.degreesToRads(360)),this.texBg.fill=this.tex||n.default.getPrimaryColor(),this.texBg.linewidth=0,this.texBg.stroke="transparent",this.texBg.rotation=n.default.degreesToRads(90),t.add(this.texBg);let e=n.default.getPrimaryColor();var i={size:20,family:n.default.getFont(),stroke:e,fill:e};const r=this.getArcColor();this.majMinArc=new l.ArcSegment(0,0,g.MAJ_R1-25,g.MIN_R2,n.default.degreesToRads(45),n.default.degreesToRads(315)),this.majMinArc.fill=r,this.majMinArc.stroke="transparent",this.dimArc=new l.ArcSegment(0,0,g.DIM_R1-1,g.DIM_R2,n.default.degreesToRads(15),n.default.degreesToRads(345)),this.dimArc.fill=r,this.dimArc.stroke="transparent";const a=n.default.degreesToRads(90),h=n.default.degreesToRads(-11),c=["IV","I","V"],d=["ii","vi","iii"],u=[n.default.degreesToRads(-30),0,n.default.degreesToRads(30)],_=new o.Group;for(let t=0;t<3;t++){const e=new s.default.Text(c[t],0,0,i);e.rotation=a+u[t],e.translation.x=116*Math.cos(u[t]),e.translation.y=116*Math.sin(u[t]),_.add(e)}for(let t=0;t<3;t++){const e=new s.default.Text(d[t],0,0,i);e.rotation=a+u[t]+h,e.translation.x=250*Math.cos(u[t]+h),e.translation.y=250*Math.sin(u[t]+h),_.add(e)}const p=new s.default.Text("vii°",0,0,i);p.rotation=a+h,p.translation.x=330*Math.cos(h),p.translation.y=330*Math.sin(h),_.add(p),this.keyText=new f.Text("C#",0,0),this.keyText.size=36,this.keyText.rotation=n.default.degreesToRads(90),this.keyText.fill=this.keyText.stroke=n.default.getLightColor();const m=new s.default.Text("▲",75,0,i);return m.size=24,m.stroke=m.fill=n.default.getLightColor(),m.rotation=a,new o.Group(this.texBg,this.majMinArc,this.dimArc,_,this.keyText,m)}onKeyChanged(t){this.keyText.value=this.keyNames[t]+" major"}addKeyChangeListener(t){null!=t&&(this.keyChangeListeners.push(t),t.onKeyChanged(this.keyIndex))}notifyListeners(t){5===t?console.log("Change: E♭m => D♯  AND  G♭ => F♯"):6===t&&console.log("Change: G♯m => A♭m  AND  B => C♭"),this.keyChangeListeners.forEach((e=>e.onKeyChanged(t)))}addRotation(t){if(isNaN(t))return console.log("Caught NaN"),void console.trace("");this.wheelGroup.rotation+=t;const e=(12-n.default.getSnappedDegrees(this.wheelGroup.rotation)%360/30)%12;e!=this.keyIndex&&(this.keyIndex=e,this.notifyListeners(this.keyIndex))}isPointerInRange(t,e){const i=t*t+e*e;return g.SPOKE_R1_x_R1<i&&i<g.DIM_R2_x_R2}adjustRotation(){if(this.dragging){this.adjusting||(this.adjusting=!0);const t=n.default.getSnappedDegrees(this.wheelGroup.rotation),e=t%360/30;this.keyIndex=(12-e)%12;let i=n.default.degreesToRads(t),s=(i-this.wheelGroup.rotation)/2;this.two.bind("update",(()=>{this.addRotation(s),Math.abs(this.wheelGroup.rotation-i)<.001?(this.two.unbind("update"),this.adjusting=this.dragging=!1):s=(i-this.wheelGroup.rotation)/2}))}}addTouchListeners(t,e){this.cof.addEventListener("touchcancel",(t=>{console.log("touchcancel")})),this.cof.addEventListener("touchstart",(t=>{this.dragging=!0;let e=t.touches[0];this.prev_x=e.pageX,this.prev_y=e.pageY})),this.cof.addEventListener("touchend",(t=>{this.adjustRotation()})),this.cof.addEventListener("touchmove",(i=>{if(this.adjusting||i.touches.length>1)return;let s=i.touches[0];const n=this.cof.getBoundingClientRect(),a=s.clientX-n.left-t,h=s.clientY-n.top-e;if(this.isPointerInRange(a,h)){const n=s.pageX-this.prev_x,a=s.pageY-this.prev_y;if(this.dragging){let i=s.pageX-this.cof.offsetLeft-t,h=s.pageY-this.cof.offsetTop-e,o=new r.default(i,h),l=new r.default(i+n,h+a),c=o.angleBetween(l);this.addRotation(c),this.prev_x=s.pageX,this.prev_y=s.pageY}i.stopPropagation(),i.preventDefault()}}))}addMouseListeners(t,e){this.cof.addEventListener("dblclick",(i=>{if(this.adjusting)return!1;this.adjusting=!0;const s=new r.default(0,100),a=new r.default(i.offsetX-t,-(i.offsetY-e)).angleBetween(s);let h=n.default.getSnappedDegrees(this.wheelGroup.rotation-a);const o=(12-h%360/30)%12;isNaN(h)&&(h=0);const l=n.default.degreesToRads(h);let c=0;this.two.bind("update",(()=>{let t=(l-this.wheelGroup.rotation)/2;this.addRotation(t),(Math.abs(this.wheelGroup.rotation-l)<1e-4||++c>100)&&(this.two.unbind("update"),this.notifyListeners(o),this.adjusting=this.dragging=!1)}))})),this.cof.addEventListener("mouseup",(t=>{this.adjustRotation()})),this.cof.addEventListener("mousemove",(i=>{if(this.adjusting)return;const s=i.offsetX-t,n=i.offsetY-e;if(this.isPointerInRange(s,n)){if(this.cof.style.cursor="grab",1===i.buttons){this.dragging=!0;let s=i.offsetX-t,n=i.offsetY-e,a=new r.default(s,n),h=new r.default(s+i.movementX,n+i.movementY),o=a.angleBetween(h);this.addRotation(o)}}else this.cof.style.cursor="default"})),this.cof.addEventListener("mouseout",(t=>{this.adjustRotation()}))}setPrinting(t){this.texBg.fill=t?"#EEE":this.tex,this.majMinArc.fill=this.dimArc.fill=t?"#FFF":this.getArcColor(),this.keyText.fill=this.keyText.stroke=t?n.default.getPrimaryColorWithOpacity(.75):n.default.getLightColor(),this.majWheel.setPrinting(t),this.minWheel.setPrinting(t),this.dimWheel.setPrinting(t),this.two.update()}}e.default=g,g.MAJ_R1=125,g.MAJ_R2=200,g.MIN_R1=200,g.MIN_R2=275,g.DIM_R1=275,g.DIM_R1_x_R1=75625,g.DIM_R2=350,g.DIM_R2_x_R2=122500,g.SPOKE_R1=100,g.SPOKE_R1_x_R1=1e4,g.SPOKE_R2=350},683:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0});class i extends HTMLElement{constructor(){super(),this.template=document.createElement("template"),this.template.innerHTML='\n          <style>\n            .fb-canvas {\n                border: 2px solid ivory;\n                width: 188px;\n                height: 224px;\n                background-image: url("./images/wood.png");\n            }\n          </style>\n          <div class="fb-header">\n            <span>vii°</span><span class="fb-chord"></span>\n          </div>\n          <div class="fb-canvas"></div>\n        ';const t=this.attachShadow({mode:"closed"});let e=this.template.content.cloneNode(!0);t.append(e)}}e.default=i},734:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0});const s=i(804);e.default=class{constructor(t,e,i){this.fbs=[],this.index=0,this.capo=0,this.maj=t,this.min=e,this.dim=i,document.querySelectorAll("input[name=capo]").forEach((t=>{t.addEventListener("change",(()=>this.onCapoChanged(parseInt(t.value))))})),this.dim_vii=new s.default("dim-vii-box",11),this.min_ii=new s.default("min-ii-box",2),this.min_vi=new s.default("min-vi-box",9),this.min_iii=new s.default("min-iii-box",4),this.maj_IV=new s.default("maj-IV-box",5),this.maj_I=new s.default("maj-I-box",0),this.maj_V=new s.default("maj-V-box",7),this.fbs=[this.dim_vii,this.min_ii,this.min_vi,this.min_iii,this.maj_IV,this.maj_I,this.maj_V]}onCapoChanged(t){this.capo=t;const e=0===t?"":`fr ${t}`;document.querySelectorAll(".capo").forEach((t=>t.innerHTML=e)),this.configureFretboards(this.index,this.capo)}onKeyChanged(t){this.index=t,this.configureFretboards(this.index,this.capo)}configureFretboards(t,e){const i=(t+5*e)%12;let s=i>0?i-1:11,n=i<11?i+1:0;this.maj_IV.setChord(t,e,this.maj[s]),this.maj_I.setChord(t,e,this.maj[i]),this.maj_V.setChord(t,e,this.maj[n]),this.min_ii.setChord(t,e,this.min[s]),this.min_vi.setChord(t,e,this.min[i]),this.min_iii.setChord(t,e,this.min[n]),this.dim_vii.setChord(t,e,this.dim[i])}setPrinting(t){this.fbs.forEach((e=>e.setPrinting(t)))}}},804:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0});const s=i(770),n=i(81),r=i(119),a=i(386),h=i(882),o=i(254);class l{constructor(t,e){this.chordNotes=Array(6),this.scaleDegrees=Array(6),this.viewMode=0,this.capo=0,l.instances.push(this),this.chordRootIndex=e;const i=document.getElementById(t),r=i.querySelector(".fb-canvas");this.chordLabel=i.querySelector(".fb-chord"),r.addEventListener("click",(t=>{l.incrementViewMode()})),this.two=new s.default({type:s.default.Types.canvas,autostart:!0,width:r.clientWidth,height:r.clientHeight}).appendTo(r),this.delta_x=this.two.width/6.7,this.offset_x=.85*this.delta_x,this.dotRadius=.95*this.delta_x/2,this.delta_y=this.two.height/6.5,this.offset_y=.9*this.delta_y;const a=this.initBase();this.two.add(a),this.fingerDots=new n.Group}static incrementViewMode(){l.viewMode=(l.viewMode+1)%3,this.instances.forEach((t=>t.setViewMode(l.viewMode)))}setViewMode(t){this.viewMode=t,this.refreshAnnotations()}initBase(){const t=new n.Group,e=this.two.width;this.fretGroup=new n.Group;for(let t=1;t<6;t++){const i=this.offset_y+this.delta_y*t,s=new a.Line(0,i,e,i);s.stroke=l.FRET_COLOR,s.linewidth=2.5,this.fretGroup.add(s)}t.add(this.fretGroup),this.stringGroup=new n.Group;for(let t=0;t<6;t++){let e=this.offset_x+t*this.delta_x,i=this.offset_y,s=20+this.offset_y+5*this.delta_y;const n=new a.Line(e,i,e,s);n.linewidth=this.getStringWidth(t),n.stroke=l.STRING_COLOR,this.stringGroup.add(n)}return t.add(this.stringGroup),this.nut=this.two.makeLine(0,this.offset_y,e,this.offset_y),this.nut.stroke=h.default.getLightColor(),this.nut.linewidth=3,t.add(this.nut),t}getStringWidth(t){return.5+.2*(6-t)}setPrinting(t){this.nut.stroke=t?"#888":0===this.capo?h.default.getLightColor():l.CAPO_COLOR,this.fretGroup.stroke=t?"rgba(0,0,0,.4)":l.FRET_COLOR,this.stringGroup.stroke=t?"#444":l.STRING_COLOR,this.two.update()}setChord(t,e,i){this.capo=e;const s=(t+5*e)%12,r=0===e?h.default.getLightColor():l.CAPO_COLOR;this.nut.fill=this.nut.stroke=r,this.two.remove(this.fingerDots),this.fingerDots=new n.Group,this.chordLabel.innerHTML=o.default.getChordName(t,this.chordRootIndex),this.frets="fingerings"in i?i.fingerings[0].frets:[0,0,0,0,0,0];const a="fingerings"in i?i.fingerings[0].fingers:[0,0,0,0,0,0],c={size:20,family:h.default.getFont(),opacity:1,fill:h.default.getPrimaryColor(),stroke:h.default.getPrimaryColor()};this.frets.forEach(((i,n)=>{this.chordNotes[n]=i>=0?o.default.getFreboardNote(t,n,i+e):null,this.scaleDegrees[n]=i>=0?o.default.getScaleDegree(s,this.chordRootIndex,n,i):null}));for(let t=0;t<6;t++)this.drawDot(t,this.frets[t],a[t],c);this.two.add(this.fingerDots),0!=this.viewMode&&this.refreshAnnotations(),this.two.update()}refreshAnnotations(){if(this.two.remove(this.annotations),this.annotations=new n.Group,0!=this.viewMode)for(let t=0;t<6;t++)this.drawAnnotation(t,this.frets[t]);this.two.add(this.annotations)}drawAnnotation(t,e){const i={size:14,family:h.default.getFont(),fill:h.default.getLightColor(),stroke:h.default.getLightColor(),weight:100},n=e>4?10:0,r=this.offset_x+t*this.delta_x,a=this.offset_y+5*this.delta_y+n;if(null!=this.chordNotes[t]){const e=new s.default.RoundedRectangle(r,a,24,22,5);e.stroke=e.fill=l.FRET_COLOR,this.annotations.add(e);const n=1===this.viewMode?this.chordNotes[t]:this.scaleDegrees[t],h=new s.default.Text(n,r,a+1,i);this.annotations.add(h)}}drawDot(t,e,i,n){const a=this.offset_x+t*this.delta_x,o=-10+this.offset_y+(e>=0?e:0)*this.delta_y;let l=null;if(-1===e)l=new s.default.Text("X",a,o,n);else if(0===e)l=new s.default.Text("O",a,o,n);else{const t=new r.Circle(a,o-5,this.dotRadius);t.fill=h.default.getLightColor(),t.stroke=h.default.getPrimaryColor(),this.fingerDots.add(t),l=new s.default.Text(i.toString(),a,o-3,n)}this.fingerDots.add(l)}}e.default=l,l.FRET_COLOR="#444",l.STRING_COLOR="rgb(103,51,0)",l.CAPO_COLOR="#0075ff",l.instances=[],l.viewMode=0},579:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0});const s=i(770),n=i(81),r=i(882);e.default=class{constructor(t){this.SHARP_INDEX=0,this.FLAT_INDEX=1,this.keySigData=[{sharps:[],flats:[]},{sharps:[1],flats:[]},{sharps:[1,4],flats:[]},{sharps:[1,4,0],flats:[]},{sharps:[1,4,0,3],flats:[]},{sharps:[1,4,0,3,6],flats:[]},{sharps:[],flats:[5,2,6,3,7,4]},{sharps:[],flats:[5,2,6,3,7]},{sharps:[],flats:[5,2,6,3]},{sharps:[],flats:[5,2,6]},{sharps:[],flats:[5,2]},{sharps:[],flats:[5]}],this.ks=document.getElementById(t),this.two=this.initTwo(),this.drawLines();const e=r.default.getTrebleClefUrl()||null;e&&(this.clefTex=new s.default.Texture(e,(()=>{this.clefTex.scale=.2,this.drawClef()}))),this.sprite=new s.default.Sprite("./images/3-accidentals-sharp-flat-natural.png",0,0,3,1)}getAccidental(t,e,i){const s=this.sprite.clone();return s.index=t,s.scale=t===this.SHARP_INDEX?.15:.2,s.position.x=e,s.position.y=i,s}initTwo(){return new s.default({type:s.default.Types.canvas,autostart:!0,width:this.ks.clientWidth,height:this.ks.clientHeight}).appendTo(this.ks)}onKeyChanged(t){this.drawAccidentals(t),this.two.update()}drawLines(){const t=.1*this.ks.clientWidth,e=.9*this.ks.clientWidth,i=this.ks.clientHeight/8,n=2*i;for(let r=0;r<5;r++){const a=n+r*i,h=new s.default.Line(t,a,e,a);h.fill=h.stroke="black",h.opacity=1,h.linewidth=1.5,this.two.add(h)}}drawClef(){const t=.2*this.ks.clientWidth,e=new s.default.Rectangle(t,80,this.ks.clientWidth/4,this.ks.clientHeight);e.stroke="transparent",e.fill=this.clefTex,e.opacity=1,this.two.add(e)}drawAccidentalsInner(t,e){this.two.remove(this.acciGroup),this.acciGroup=new n.Group;const i=this.ks.clientHeight/16;for(let s=0;s<t.length;s++){const n=this.getAccidental(e,100+14*s,24+i*t[s]);this.acciGroup.add(n)}this.two.add(this.acciGroup)}drawAccidentals(t){const e=this.keySigData[t];e.flats.length>0?this.drawAccidentalsInner(e.flats,this.FLAT_INDEX):this.drawAccidentalsInner(e.sharps,this.SHARP_INDEX)}setPrinting(t){}}},254:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0});const s=i(276);class n{static getFifths(t){let e=[];return e=t===s.ChordType.MINOR?this.chromaticScales.map((t=>`${t[n.MIN_OFFSET]}m`)):t===s.ChordType.DIMINISHED?this.chromaticScales.map((t=>`${t[n.DIM_OFFSET]}°`)):this.chromaticScales.map((t=>t[n.MAJ_OFFSET])),e}static getChordName(t,e){let i="";return 2===e||4===e||9===e?i="m":11===e&&(i="°"),`${n.chromaticScales[t][e]}${i}`}static getNoteIndex(t,e,i){return(n.openStringNoteIndexesByKeyIndex[t][e]+i)%12}static getFreboardNote(t,e,i){const s=n.getNoteIndex(t,e,i);return n.chromaticScales[t][s]}static getScaleDegree(t,e,i,s){let r=this.getNoteIndex(t,i,s)-e;return r<0&&(r+=12),n.scaleDegrees[r]}}e.default=n,n.MAJ_OFFSET=0,n.MIN_OFFSET=9,n.DIM_OFFSET=11,n.chromaticScales=[["C","C♯","D","D♯","E","F","F♯","G","G♯","A","A♯","B"],["G","G♯","A","A♯","B","C","C♯","D","D♯","E","F","F♯"],["D","D♯","E","F","F♯","G","G♯","A","A♯","B","C","C♯"],["A","A♯","B","C","C♯","D","D♯","E","F","F♯","G","G♯"],["E","F","F♯","G","G♯","A","A♯","B","C","C♯","D","D♯"],["B","C","C♯","D","D♯","E","F","F♯","G","G♯","A","A♯"],["G♭","G","A♭","A","B♭","C♭","C","D♭","D","E♭","E","F"],["D♭","D","E♭","E","F","G♭","G","A♭","A","B♭","B","C"],["A♭","A","B♭","B","C","D♭","D","E♭","E","F","F♯","G"],["E♭","E","F","F♯","G","A♭","A","B♭","B","C","C♯","D"],["B♭","B","C","C♯","D","E♭","E","F","F♯","G","G♯","A"],["F","F♯","G","G♯","A","B♭","B","C","C♯","D","D♯","E"]],n.openStringNoteIndexesByKeyIndex=[[4,9,2,7,11,4],[9,2,7,0,4,9],[2,7,0,5,9,2],[7,0,5,10,2,7],[0,5,10,3,7,0],[5,10,3,8,0,5],[10,3,8,1,5,10],[3,8,1,6,10,3],[8,1,6,11,3,8],[1,6,11,4,8,1],[6,11,4,9,1,6],[11,4,9,2,6,11]],n.scaleDegrees=["PU","m2","M2","m3","M3","P4","d5","P5","A5/m6","M6","A6/m7","M7"]},926:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0});const s=i(81),n=i(386),r=i(882);class a extends s.Group{constructor(t,e){super();const i=r.default.getPrimaryColorWithOpacity(.75),s=r.default.degreesToRads(30),a=s/2;for(let r=0;r<12;r++){const h=new n.Line(0,t,0,e);h.stroke=i,h.rotation=r*s-a,this.add(h)}}}e.default=a},882:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0});class i{static getFont(){if(null==i.fontFamily){const t=document.querySelector("body"),e=window.getComputedStyle(t);i.fontFamily=e.getPropertyValue("font-family")}return i.fontFamily}static getTrebleClefUrl(){return"./images/treble-clef.png"}static getBgImageUrl(){let t=null;const e=document.querySelector(".fb-canvas");if(e){const i=window.getComputedStyle(e).getPropertyValue("background-image");t=i?i.replace(new RegExp(/url|\(|\)|\"/g),""):null}return t}static getPrimaryColor(){if(null==i.primaryColor){const t=document.querySelector("body"),e=window.getComputedStyle(t);i.primaryColor=e.getPropertyValue("background-color")}return i.primaryColor}static getLightColor(){if(null==i.lightColor){const t=document.querySelector("h1"),e=window.getComputedStyle(t);i.lightColor=e.getPropertyValue("color")}return i.lightColor}static getColorWithOpacity(t,e){return t.includes("rgb(")?t.replace("rgb(","rgba( ").replace(")",`, ${e})`):t}static getPrimaryColorWithOpacity(t){return i.getColorWithOpacity(i.getPrimaryColor(),t)}static getLightColorWithOpacity(t){return i.getColorWithOpacity(i.getLightColor(),t)}static degreesToRads(t){return Math.PI*t/180}static radsToDegrees(t){return 180*t/Math.PI}static getSnappedDegrees(t){const e=i.radsToDegrees(t);return 30*Math.round(e/30)}}e.default=i,i.fontFamily=null,i.primaryColor=null,i.lightColor=null},993:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0});class i{constructor(t,e){this.x=t,this.y=e}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}dotProduct(t){return this.x*t.x+this.y*t.y}add(t){return new i(this.x+t.x,this.y+t.y)}subtract(t){return new i(this.x-t.x,this.y-t.y)}toString(){return`x=${this.x.toFixed(6)} y=${this.y.toFixed(6)}`}angleBetween(t){const e=this.dotProduct(t),i=this.length()*t.length();if(0===i)return 0;let s=e/i,n=null;s>1?(s=1,n="Arg to Math.acos was going to be greater than 1.0"):s<-1&&(s=-1,n="Arg to Math.acos was going to be less than -1.0"),n&&(console.warn(n),console.log("this: "+this.toString()),console.log("that: "+t.toString()));const r=Math.acos(s);return this.x*t.y-this.y*t.x>=0?r:-r}}e.default=i},270:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0});const s=i(81),n=i(119),r=i(263),a=i(859),h=i(882),o=i(254),l=i(276);class c extends s.Group{constructor(t,e,i,c,f=!0){super(),this.boxes=[],this.labels=[],this.selectWidth=e===l.ChordType.DIMINISHED?1:3;const d=h.default.getPrimaryColorWithOpacity(.75),u=new n.Circle(0,0,c);u.stroke=d,u.fill="transparent",u.linewidth=1,this.add(u);const g=(c+i)/2,_=f?0:1,p=o.default.getFifths(e),m=h.default.degreesToRads(30),y=h.default.degreesToRads(90);for(let e=0;e<12;e++){const i=e*m,o=new s.Group,l=e%2==_?new n.Circle(0,0,29):new r.RoundedRectangle(0,0,58,58,4);l.fill=h.default.getLightColor(),l.stroke="transparent",this.boxes.push(l);const c=new a.Text(p[e],0,0,t);this.labels.push(c),o.add(l,c),o.position.x=g*Math.cos(i),o.position.y=g*Math.sin(i),o.rotation=y+i,this.add(o)}}configureForPrint(){}configureForScreen(){}updateText(t){const e=h.default.getPrimaryColorWithOpacity(.5);this.labels.forEach((t=>{t.stroke=t.fill=e}));const i=[t];if(3===this.selectWidth){const e=this.labels.length;i.push((t-1+e)%e),i.push((t+1+e)%e)}i.forEach((t=>{this.labels[t].stroke=this.labels[t].fill=h.default.getPrimaryColor()}))}updateBoxes(t){const e=h.default.getLightColorWithOpacity(.5);this.boxes.forEach((t=>{t.stroke=t.fill=e}));const i=[t];if(3===this.selectWidth){const e=this.labels.length;i.push((t-1+e)%e),i.push((t+1+e)%e)}i.forEach((t=>{this.boxes[t].stroke=this.boxes[t].fill=h.default.getLightColor()}))}onKeyChanged(t){this.updateText(t),this.updateBoxes(t)}setPrinting(t){t?this.configureForPrint():this.configureForScreen()}}e.default=c},770:(t,e,i)=>{i.r(e),i.d(e,{default:()=>Yi});var s,n,r=Object.defineProperty,a=(t,e)=>{for(var i in e)r(t,i,{get:e[i],enumerable:!0})},h=(t,e,i)=>(((t,e,i)=>{e in t?r(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i})(t,"symbol"!=typeof e?e+"":e,i),i),o={move:"M",line:"L",curve:"C",arc:"A",close:"Z"},l={};a(l,{HALF_PI:()=>f,NumArray:()=>b,TWO_PI:()=>c,decomposeMatrix:()=>d,getComputedMatrix:()=>g,getPoT:()=>m,lerp:()=>_,mod:()=>y,setMatrix:()=>u,toFixed:()=>v}),"undefined"!=typeof window?s=window:void 0!==i.g?s=i.g:"undefined"!=typeof self&&(s=self);var c=2*Math.PI,f=.5*Math.PI;function d(t,e,i,s,n,r){let a;return arguments.length<=1?(a=t.a,e=t.b,i=t.c,s=t.d,n=t.e,r=t.f):a=t,{translateX:n,translateY:r,scaleX:Math.sqrt(a*a+e*e),scaleY:Math.sqrt(i*i+s*s),rotation:180*Math.atan2(e,a)/Math.PI}}function u(t){n=t}function g(t,e){e=e&&e.identity()||new n;let i=t;const s=[];for(;i&&i._matrix;)s.push(i._matrix),i=i.parent;s.reverse();for(let t=0;t<s.length;t++){const i=s[t].elements;e.multiply(i[0],i[1],i[2],i[3],i[4],i[5],i[6],i[7],i[8],i[9])}return e}function _(t,e,i){return i*(e-t)+t}var p=[2,4,8,16,32,64,128,256,512,1024,2048,4096];function m(t){let e=0;for(;p[e]&&p[e]<t;)e++;return p[e]}function y(t,e){for(;t<0;)t+=e;return t%e}var b=s.Float32Array||Array,x=Math.floor;function v(t){return x(1e6*t)/1e6}var w={};a(w,{Curve:()=>F,getAnchorsFromArcData:()=>G,getComponentOnCubicBezier:()=>P,getControlPoints:()=>N,getCurveBoundingBox:()=>I,getCurveFromPoints:()=>B,getCurveLength:()=>j,getReflection:()=>D,integrate:()=>z,subdivide:()=>L});var k=class{constructor(){h(this,"_events",{}),h(this,"_bound",!1)}addEventListener(t,e){return(this._events[t]||(this._events[t]=[])).push(e),this._bound=!0,this}on(){return this.addEventListener.apply(this,arguments)}bind(){return this.addEventListener.apply(this,arguments)}removeEventListener(t,e){if(!this._events)return this;if(!t&&!e)return this._events={},this._bound=!1,this;const i=t?[t]:Object.keys(this._events);for(let s=0,n=i.length;s<n;s++){t=i[s];let n=this._events[t];if(n){let i=[];if(e)for(let t=0,s=n.length;t<s;t++){let s=n[t];s=s.handler?s.handler:s,e!==s&&i.push(s)}this._events[t]=i}}return this}off(){return this.removeEventListener.apply(this,arguments)}unbind(){return this.removeEventListener.apply(this,arguments)}dispatchEvent(t){if(!this._events)return this;const e=Array.prototype.slice.call(arguments,1),i=this._events[t];if(i)for(let t=0;t<i.length;t++)i[t].call(this,...e);return this}trigger(){return this.dispatchEvent.apply(this,arguments)}listen(t,e,i){const s=this;function n(){i.apply(s,arguments)}return t&&(n.obj=t,n.name=e,n.handler=i,t.on(e,n)),s}ignore(t,e,i){return t.off(e,i),this}};h(k,"Types",{play:"play",pause:"pause",update:"update",render:"render",resize:"resize",change:"change",remove:"remove",insert:"insert",order:"order",load:"load"}),h(k,"Methods",["addEventListener","on","removeEventListener","off","unbind","dispatchEvent","trigger","listen","ignore"]);var R={x:{enumerable:!0,get:function(){return this._x},set:function(t){this._x!==t&&(this._x=t,this._bound&&this.dispatchEvent(k.Types.change))}},y:{enumerable:!0,get:function(){return this._y},set:function(t){this._y!==t&&(this._y=t,this._bound&&this.dispatchEvent(k.Types.change))}}},A=class extends k{constructor(t=0,e=0){super(),h(this,"_x",0),h(this,"_y",0);for(let t in R)Object.defineProperty(this,t,R[t]);this.x=t,this.y=e}static add(t,e){return new A(t.x+e.x,t.y+e.y)}static sub(t,e){return new A(t.x-e.x,t.y-e.y)}static subtract(t,e){return A.sub(t,e)}static ratioBetween(t,e){return(t.x*e.x+t.y*e.y)/(t.length()*e.length())}static angleBetween(t,e){if(arguments.length>=4){const t=arguments[0]-arguments[2],e=arguments[1]-arguments[3];return Math.atan2(e,t)}const i=t.x-e.x,s=t.y-e.y;return Math.atan2(s,i)}static distanceBetween(t,e){return Math.sqrt(A.distanceBetweenSquared(t,e))}static distanceBetweenSquared(t,e){const i=t.x-e.x,s=t.y-e.y;return i*i+s*s}set(t,e){return this.x=t,this.y=e,this}copy(t){return this.x=t.x,this.y=t.y,this}clear(){return this.x=0,this.y=0,this}clone(){return new A(this.x,this.y)}add(t,e){return arguments.length<=0||(arguments.length<=1?"number"==typeof t?(this.x+=t,this.y+=t):t&&"number"==typeof t.x&&"number"==typeof t.y&&(this.x+=t.x,this.y+=t.y):(this.x+=t,this.y+=e)),this}addSelf(t){return this.add.apply(this,arguments)}sub(t,e){return arguments.length<=0||(arguments.length<=1?"number"==typeof t?(this.x-=t,this.y-=t):t&&"number"==typeof t.x&&"number"==typeof t.y&&(this.x-=t.x,this.y-=t.y):(this.x-=t,this.y-=e)),this}subtract(){return this.sub.apply(this,arguments)}subSelf(t){return this.sub.apply(this,arguments)}subtractSelf(t){return this.sub.apply(this,arguments)}multiply(t,e){return arguments.length<=0||(arguments.length<=1?"number"==typeof t?(this.x*=t,this.y*=t):t&&"number"==typeof t.x&&"number"==typeof t.y&&(this.x*=t.x,this.y*=t.y):(this.x*=t,this.y*=e)),this}multiplySelf(t){return this.multiply.apply(this,arguments)}multiplyScalar(t){return this.multiply(t)}divide(t,e){return arguments.length<=0||(arguments.length<=1?"number"==typeof t?(this.x/=t,this.y/=t):t&&"number"==typeof t.x&&"number"==typeof t.y&&(this.x/=t.x,this.y/=t.y):(this.x/=t,this.y/=e),isNaN(this.x)&&(this.x=0),isNaN(this.y)&&(this.y=0)),this}divideSelf(t){return this.divide.apply(this,arguments)}divideScalar(t){return this.divide(t)}negate(){return this.multiply(-1)}dot(t){return this.x*t.x+this.y*t.y}length(){return Math.sqrt(this.lengthSquared())}lengthSquared(){return this.x*this.x+this.y*this.y}normalize(){return this.divideScalar(this.length())}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,i=this.y-t.y;return e*e+i*i}setLength(t){return this.normalize().multiplyScalar(t)}equals(t,e){return e=void 0===e?1e-4:e,this.distanceTo(t)<e}lerp(t,e){const i=(t.x-this.x)*e+this.x,s=(t.y-this.y)*e+this.y;return this.set(i,s)}isZero(t){return t=void 0===t?1e-4:t,this.length()<t}toString(){return this.x+", "+this.y}toObject(){return{x:this.x,y:this.y}}rotate(t){const e=this.x,i=this.y,s=Math.cos(t),n=Math.sin(t);return this.x=e*s-i*n,this.y=e*n+i*s,this}},S=A;h(S,"zero",new A),h(S,"left",new A(-1,0)),h(S,"right",new A(1,0)),h(S,"up",new A(0,-1)),h(S,"down",new A(0,1));var T=class extends S{constructor(t=0,e=0,i=0,s=0,n=0,r=0,a=o.move){super(t,e),h(this,"controls",{left:new S,right:new S}),h(this,"_command",o.move),h(this,"_relative",!0),h(this,"_rx",0),h(this,"_ry",0),h(this,"_xAxisRotation",0),h(this,"_largeArcFlag",0),h(this,"_sweepFlag",1);for(let t in M)Object.defineProperty(this,t,M[t]);this.command=a,this.relative=!0;const l=T.makeBroadcast(this);this.controls.left.set(i,s).addEventListener(k.Types.change,l),this.controls.right.set(n,r).addEventListener(k.Types.change,l)}static makeBroadcast(t){return function(){t._bound&&t.dispatchEvent(k.Types.change)}}copy(t){return this.x=t.x,this.y=t.y,"string"==typeof t.command&&(this.command=t.command),t.controls&&(t.controls.left&&this.controls.left.copy(t.controls.left),t.controls.right&&this.controls.right.copy(t.controls.right)),"boolean"==typeof t.relative&&(this.relative=t.relative),"number"==typeof t.rx&&(this.rx=t.rx),"number"==typeof t.ry&&(this.ry=t.ry),"number"==typeof t.xAxisRotation&&(this.xAxisRotation=t.xAxisRotation),"number"==typeof t.largeArcFlag&&(this.largeArcFlag=t.largeArcFlag),"number"==typeof t.sweepFlag&&(this.sweepFlag=t.sweepFlag),this}clone(){return(new T).copy(this)}toObject(){return{x:this.x,y:this.y,command:this.command,relative:this.relative,controls:{left:this.controls.left.toObject(),right:this.controls.right.toObject()},rx:this.rx,ry:this.ry,xAxisRotation:this.xAxisRotation,largeArcFlag:this.largeArcFlag,sweepFlag:this.sweepFlag}}toString(){return JSON.stringify(this.toObject())}},M={command:{enumerable:!0,get:function(){return this._command},set:function(t){this._command!==t&&(this._command=t,this._bound&&this.dispatchEvent(k.Types.change))}},relative:{enumerable:!0,get:function(){return this._relative},set:function(t){this._relative!==!!t&&(this._relative=!!t,this._bound&&this.dispatchEvent(k.Types.change))}},rx:{enumerable:!0,get:function(){return this._rx},set:function(t){this._rx!==t&&(this._rx=t,this._bound&&this.dispatchEvent(k.Types.change))}},ry:{enumerable:!0,get:function(){return this._ry},set:function(t){this._ry!==t&&(this._ry=t,this._bound&&this.dispatchEvent(k.Types.change))}},xAxisRotation:{enumerable:!0,get:function(){return this._xAxisRotation},set:function(t){this._xAxisRotation!==t&&(this._xAxisRotation=t,this._bound&&this.dispatchEvent(k.Types.change))}},largeArcFlag:{enumerable:!0,get:function(){return this._largeArcFlag},set:function(t){this._largeArcFlag!==t&&(this._largeArcFlag=t,this._bound&&this.dispatchEvent(k.Types.change))}},sweepFlag:{get:function(){return this._sweepFlag},set:function(t){this._sweepFlag!==t&&(this._sweepFlag=t,this._bound&&this.dispatchEvent(k.Types.change))}}},E=0,O="two-",C=function(){return E++},F={CollinearityEpsilon:Math.pow(10,-30),RecursionLimit:16,CuspLimit:0,Tolerance:{distance:.25,angle:0,epsilon:Number.EPSILON},abscissas:[[.5773502691896257],[0,.7745966692414834],[.33998104358485626,.8611363115940526],[0,.5384693101056831,.906179845938664],[.2386191860831969,.6612093864662645,.932469514203152],[0,.4058451513773972,.7415311855993945,.9491079123427585],[.1834346424956498,.525532409916329,.7966664774136267,.9602898564975363],[0,.3242534234038089,.6133714327005904,.8360311073266358,.9681602395076261],[.14887433898163122,.4333953941292472,.6794095682990244,.8650633666889845,.9739065285171717],[0,.26954315595234496,.5190961292068118,.7301520055740494,.8870625997680953,.978228658146057],[.1252334085114689,.3678314989981802,.5873179542866175,.7699026741943047,.9041172563704749,.9815606342467192],[0,.2304583159551348,.44849275103644687,.6423493394403402,.8015780907333099,.9175983992229779,.9841830547185881],[.10805494870734367,.31911236892788974,.5152486363581541,.6872929048116855,.827201315069765,.9284348836635735,.9862838086968123],[0,.20119409399743451,.3941513470775634,.5709721726085388,.7244177313601701,.8482065834104272,.937273392400706,.9879925180204854],[.09501250983763744,.2816035507792589,.45801677765722737,.6178762444026438,.755404408355003,.8656312023878318,.9445750230732326,.9894009349916499]],weights:[[1],[.8888888888888888,.5555555555555556],[.6521451548625461,.34785484513745385],[.5688888888888889,.47862867049936647,.23692688505618908],[.46791393457269104,.3607615730481386,.17132449237917036],[.4179591836734694,.3818300505051189,.27970539148927664,.1294849661688697],[.362683783378362,.31370664587788727,.22238103445337448,.10122853629037626],[.3302393550012598,.31234707704000286,.26061069640293544,.1806481606948574,.08127438836157441],[.29552422471475287,.26926671930999635,.21908636251598204,.1494513491505806,.06667134430868814],[.2729250867779006,.26280454451024665,.23319376459199048,.18629021092773426,.1255803694649046,.05566856711617366],[.24914704581340277,.2334925365383548,.20316742672306592,.16007832854334622,.10693932599531843,.04717533638651183],[.2325515532308739,.22628318026289723,.2078160475368885,.17814598076194574,.13887351021978725,.09212149983772845,.04048400476531588],[.2152638534631578,.2051984637212956,.18553839747793782,.15720316715819355,.12151857068790319,.08015808715976021,.03511946033175186],[.2025782419255613,.19843148532711158,.1861610000155622,.16626920581699392,.13957067792615432,.10715922046717194,.07036604748810812,.03075324199611727],[.1894506104550685,.18260341504492358,.16915651939500254,.14959598881657674,.12462897125553388,.09515851168249279,.062253523938647894,.027152459411754096]]};function P(t,e,i,s,n){const r=1-t;return r*r*r*e+3*r*r*t*i+3*r*t*t*s+t*t*t*n}function L(t,e,i,s,n,r,a,h,o){const l=(o=o||F.RecursionLimit)+1;if(Math.abs(t-a)<.001&&Math.abs(e-h)<.001)return[new T(a,h)];const c=[];for(let o=0;o<l;o++){const f=o/l,d=P(f,t,i,n,a),u=P(f,e,s,r,h);c.push(new T(d,u))}return c}function j(t,e,i,s,n,r,a,h,o){if(t===i&&e===s&&n===a&&r===h){const i=a-t,s=h-e;return Math.sqrt(i*i+s*s)}const l=9*(i-n)+3*(a-t),c=6*(t+n)-12*i,f=3*(i-t),d=9*(s-r)+3*(h-e),u=6*(e+r)-12*s,g=3*(s-e);return z((function(t){const e=(l*t+c)*t+f,i=(d*t+u)*t+g;return Math.sqrt(e*e+i*i)}),0,1,o||F.RecursionLimit)}function I(t,e,i,s,n,r,a,h){const o=[],l=[[],[]];let c,f,d,u,g,_,p,m;for(let l=0;l<2;++l)if(0==l?(f=6*t-12*i+6*n,c=-3*t+9*i-9*n+3*a,d=3*i-3*t):(f=6*e-12*s+6*r,c=-3*e+9*s-9*r+3*h,d=3*s-3*e),Math.abs(c)<1e-12){if(Math.abs(f)<1e-12)continue;u=-d/f,0<u&&u<1&&o.push(u)}else p=f*f-4*d*c,m=Math.sqrt(p),p<0||(g=(-f+m)/(2*c),0<g&&g<1&&o.push(g),_=(-f-m)/(2*c),0<_&&_<1&&o.push(_));let y,b=o.length,x=b;for(;b--;)u=o[b],y=1-u,l[0][b]=y*y*y*t+3*y*y*u*i+3*y*u*u*n+u*u*u*a,l[1][b]=y*y*y*e+3*y*y*u*s+3*y*u*u*r+u*u*u*h;return l[0][x]=t,l[1][x]=e,l[0][x+1]=a,l[1][x+1]=h,l[0].length=l[1].length=x+2,{min:{x:Math.min.apply(0,l[0]),y:Math.min.apply(0,l[1])},max:{x:Math.max.apply(0,l[0]),y:Math.max.apply(0,l[1])}}}function z(t,e,i,s){let n=F.abscissas[s-2],r=F.weights[s-2],a=.5*(i-e),h=a+e,o=0,l=s+1>>1,c=1&s?r[o++]*t(h):0;for(;o<l;){const e=a*n[o];c+=r[o++]*(t(h+e)+t(h-e))}return a*c}function B(t,e){const i=t.length,s=i-1;for(let n=0;n<i;n++){const r=t[n],a=e?y(n-1,i):Math.max(n-1,0),h=e?y(n+1,i):Math.min(n+1,s),l=r;N(t[a],l,t[h]),l.command=0===n?o.move:o.curve}}function N(t,e,i){const s=S.angleBetween(t,e),n=S.angleBetween(i,e);let r=S.distanceBetween(t,e),a=S.distanceBetween(i,e),h=(s+n)/2;return r<1e-4||a<1e-4?("boolean"!=typeof e.relative||e.relative||(e.controls.left.copy(e),e.controls.right.copy(e)),e):(r*=.33,a*=.33,n<s?h+=f:h-=f,e.controls.left.x=Math.cos(h)*r,e.controls.left.y=Math.sin(h)*r,h-=Math.PI,e.controls.right.x=Math.cos(h)*a,e.controls.right.y=Math.sin(h)*a,"boolean"!=typeof e.relative||e.relative||(e.controls.left.x+=e.x,e.controls.left.y+=e.y,e.controls.right.x+=e.x,e.controls.right.y+=e.y),e)}function D(t,e,i){return new S(2*t.x-(e.x+t.x)-(i?t.x:0),2*t.y-(e.y+t.y)-(i?t.y:0))}function G(t,e,i,s,n,r,a){const h=[];for(let t=0;t<12;t++){let e=(t+1)/12;a&&(e=1-e);const l=e*r+n,c=i*Math.cos(l),f=s*Math.sin(l),d=new T(c,f);d.command=o.line,h.push(d)}}var V=s.devicePixelRatio||1;function W(t){return V/function(t){return t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1}(t)}var H=Array.prototype.slice,X={isNaN:function(t){return"number"==typeof t&&t!==+t},isElement:function(t){return!(!t||1!==t.nodeType)},isObject:function(t){const e=typeof t;return"function"===e||"object"===e&&!!t},extend:function(t){const e=H.call(arguments,1);for(let i=0;i<e.length;i++){const s=e[i];for(let e in s)t[e]=s[e]}return t},defaults:function(t){const e=H.call(arguments,1);for(let i=0;i<e.length;i++){const s=e[i];for(let e in s)void 0===t[e]&&(t[e]=s[e])}return t},each:function(t,e,i){const s=i||this,n=!function(t){if(null==t)return!1;const e=t.length;return"number"==typeof e&&e>=0&&e<4294967296}(t)&&Object.keys(t),r=(n||t).length;for(let i=0;i<r;i++){const r=n?n[i]:i;e.call(s,t[r],r,t)}return t},performance:s.performance&&s.performance.now?s.performance:Date},Y=class extends k{constructor(){super(),h(this,"_flagId",!1),h(this,"_flagClassName",!1),h(this,"_renderer",{}),h(this,"_id",""),h(this,"_className",""),h(this,"classList",[]);for(let t in U)Object.defineProperty(this,t,U[t])}flagReset(){this._flagId=this._flagClassName=!1}},U={renderer:{enumerable:!1,get:function(){return this._renderer}},id:{enumerable:!0,get:function(){return this._id},set:function(t){const e=this._id;t!==this._id&&(this._id=t,this._flagId=!0,this.parent&&(delete this.parent.children.ids[e],this.parent.children.ids[this._id]=this))}},className:{enumerable:!0,get:function(){return this._className},set:function(t){this._className!==t&&(this._flagClassName=!0,this.classList=t.split(/\s+?/),this._className=t)}}},q=Math.cos,K=Math.sin,J=Math.tan,$=[],Z=class extends k{constructor(t,e,i,s,n,r){super(),h(this,"elements",new b(9)),h(this,"manual",!1);let a=t;Array.isArray(a)||(a=Array.prototype.slice.call(arguments)),this.identity(),a.length>0&&this.set(a)}static Multiply(t,e,i){if(e.length<=3){const i=t;let s,n,r;const a=e[0]||0,h=e[1]||0,o=e[2]||0;return s=i[0]*a+i[1]*h+i[2]*o,n=i[3]*a+i[4]*h+i[5]*o,r=i[6]*a+i[7]*h+i[8]*o,{x:s,y:n,z:r}}const s=t[0],n=t[1],r=t[2],a=t[3],h=t[4],o=t[5],l=t[6],c=t[7],f=t[8],d=e[0],u=e[1],g=e[2],_=e[3],p=e[4],m=e[5],y=e[6],x=e[7],v=e[8];return(i=i||new b(9))[0]=s*d+n*_+r*y,i[1]=s*u+n*p+r*x,i[2]=s*g+n*m+r*v,i[3]=a*d+h*_+o*y,i[4]=a*u+h*p+o*x,i[5]=a*g+h*m+o*v,i[6]=l*d+c*_+f*y,i[7]=l*u+c*p+f*x,i[8]=l*g+c*m+f*v,i}set(t,e,i,s,n,r,a,h,o){if(void 0===e){const l=t;t=l[0],e=l[1],i=l[2],s=l[3],n=l[4],r=l[5],a=l[6],h=l[7],o=l[8]}return this.elements[0]=t,this.elements[1]=e,this.elements[2]=i,this.elements[3]=s,this.elements[4]=n,this.elements[5]=r,this.elements[6]=a,this.elements[7]=h,this.elements[8]=o,this.trigger(k.Types.change)}copy(t){return this.elements[0]=t.elements[0],this.elements[1]=t.elements[1],this.elements[2]=t.elements[2],this.elements[3]=t.elements[3],this.elements[4]=t.elements[4],this.elements[5]=t.elements[5],this.elements[6]=t.elements[6],this.elements[7]=t.elements[7],this.elements[8]=t.elements[8],this.manual=t.manual,this.trigger(k.Types.change)}identity(){return this.elements[0]=Z.Identity[0],this.elements[1]=Z.Identity[1],this.elements[2]=Z.Identity[2],this.elements[3]=Z.Identity[3],this.elements[4]=Z.Identity[4],this.elements[5]=Z.Identity[5],this.elements[6]=Z.Identity[6],this.elements[7]=Z.Identity[7],this.elements[8]=Z.Identity[8],this.trigger(k.Types.change)}multiply(t,e,i,s,n,r,a,h,o){if(void 0===e)return this.elements[0]*=t,this.elements[1]*=t,this.elements[2]*=t,this.elements[3]*=t,this.elements[4]*=t,this.elements[5]*=t,this.elements[6]*=t,this.elements[7]*=t,this.elements[8]*=t,this.trigger(k.Types.change);if(void 0===s)return t=t||0,e=e||0,i=i||0,{x:(n=this.elements)[0]*t+n[1]*e+n[2]*i,y:n[3]*t+n[4]*e+n[5]*i,z:n[6]*t+n[7]*e+n[8]*i};const l=this.elements,c=[t,e,i,s,n,r,a,h,o],f=l[0],d=l[1],u=l[2],g=l[3],_=l[4],p=l[5],m=l[6],y=l[7],b=l[8],x=c[0],v=c[1],w=c[2],R=c[3],A=c[4],S=c[5],T=c[6],M=c[7],E=c[8];return this.elements[0]=f*x+d*R+u*T,this.elements[1]=f*v+d*A+u*M,this.elements[2]=f*w+d*S+u*E,this.elements[3]=g*x+_*R+p*T,this.elements[4]=g*v+_*A+p*M,this.elements[5]=g*w+_*S+p*E,this.elements[6]=m*x+y*R+b*T,this.elements[7]=m*v+y*A+b*M,this.elements[8]=m*w+y*S+b*E,this.trigger(k.Types.change)}inverse(t){const e=this.elements;t=t||new Z;const i=e[0],s=e[1],n=e[2],r=e[3],a=e[4],h=e[5],o=e[6],l=e[7],c=e[8],f=c*a-h*l,d=-c*r+h*o,u=l*r-a*o;let g=i*f+s*d+n*u;return g?(g=1/g,t.elements[0]=f*g,t.elements[1]=(-c*s+n*l)*g,t.elements[2]=(h*s-n*a)*g,t.elements[3]=d*g,t.elements[4]=(c*i-n*o)*g,t.elements[5]=(-h*i+n*r)*g,t.elements[6]=u*g,t.elements[7]=(-l*i+s*o)*g,t.elements[8]=(a*i-s*r)*g,t):null}scale(t,e){return arguments.length<=1&&(e=t),this.multiply(t,0,0,0,e,0,0,0,1)}rotate(t){const e=q(t),i=K(t);return this.multiply(e,-i,0,i,e,0,0,0,1)}translate(t,e){return this.multiply(1,0,t,0,1,e,0,0,1)}skewX(t){const e=J(t);return this.multiply(1,e,0,0,1,0,0,0,1)}skewY(t){const e=J(t);return this.multiply(1,0,0,e,1,0,0,0,1)}toString(t){return $.length=0,this.toTransformArray(t,$),$.map(v).join(" ")}toTransformArray(t,e){const i=this.elements,s=!!e,n=i[0],r=i[1],a=i[2],h=i[3],o=i[4],l=i[5];if(t){const t=i[6],c=i[7],f=i[8];return s?(e[0]=n,e[1]=h,e[2]=t,e[3]=r,e[4]=o,e[5]=c,e[6]=a,e[7]=l,void(e[8]=f)):[n,h,t,r,o,c,a,l,f]}return s?(e[0]=n,e[1]=h,e[2]=r,e[3]=o,e[4]=a,void(e[5]=l)):[n,h,r,o,a,l]}toArray(t,e){const i=this.elements,s=!!e,n=i[0],r=i[1],a=i[2],h=i[3],o=i[4],l=i[5];if(t){const t=i[6],c=i[7],f=i[8];return s?(e[0]=n,e[1]=r,e[2]=a,e[3]=h,e[4]=o,e[5]=l,e[6]=t,e[7]=c,void(e[8]=f)):[n,r,a,h,o,l,t,c,f]}return s?(e[0]=n,e[1]=r,e[2]=a,e[3]=h,e[4]=o,void(e[5]=l)):[n,r,a,h,o,l]}toObject(){return{elements:this.toArray(!0),manual:!!this.manual}}clone(){return(new Z).copy(this)}},Q=Z;h(Q,"Identity",[1,0,0,0,1,0,0,0,1]),u(Q);var tt=class extends Y{constructor(){super(),h(this,"_flagMatrix",!0),h(this,"_flagScale",!1),h(this,"_matrix",null),h(this,"_worldMatrix",null),h(this,"_position",null),h(this,"_rotation",0),h(this,"_scale",1),h(this,"_skewX",0),h(this,"_skewY",0);for(let t in et)Object.defineProperty(this,t,et[t]);this._renderer.flagMatrix=it.bind(this),this.isShape=!0,this.id=O+C(),this.matrix=new Q,this.worldMatrix=new Q,this.position=new S,this.rotation=0,this.scale=1,this.skewX=0,this.skewY=0}get renderer(){return this._renderer}set renderer(t){this._renderer=t}get translation(){return et.position.get.apply(this,arguments)}set translation(t){et.position.set.apply(this,arguments)}addTo(t){return t.add(this),this}remove(){return this.parent?(this.parent.remove(this),this):this}clone(t){const e=new tt;return e.position.copy(this.position),e.rotation=this.rotation,e.scale=this.scale,e.skewX=this.skewX,e.skewY=this.skewY,this.matrix.manual&&e.matrix.copy(this.matrix),t&&t.add(e),e._update()}_update(t){return!this._matrix.manual&&this._flagMatrix&&(this._matrix.identity().translate(this.position.x,this.position.y),this._scale instanceof S?this._matrix.scale(this._scale.x,this._scale.y):this._matrix.scale(this._scale),this._matrix.rotate(this.rotation),this._matrix.skewX(this.skewX),this._matrix.skewY(this.skewY)),t&&this.parent&&this.parent._update&&this.parent._update(),this}flagReset(){return this._flagMatrix=this._flagScale=!1,super.flagReset.call(this),this}},et={position:{enumerable:!0,get:function(){return this._position},set:function(t){this._position&&this._position.unbind(k.Types.change,this._renderer.flagMatrix),this._position=t,this._position.bind(k.Types.change,this._renderer.flagMatrix),it.call(this)}},rotation:{enumerable:!0,get:function(){return this._rotation},set:function(t){this._rotation=t,this._flagMatrix=!0}},scale:{enumerable:!0,get:function(){return this._scale},set:function(t){this._scale instanceof S&&this._scale.unbind(k.Types.change,this._renderer.flagMatrix),this._scale=t,this._scale instanceof S&&this._scale.bind(k.Types.change,this._renderer.flagMatrix),this._flagMatrix=!0,this._flagScale=!0}},skewX:{enumerable:!0,get:function(){return this._skewX},set:function(t){this._skewX=t,this._flagMatrix=!0}},skewY:{enumerable:!0,get:function(){return this._skewY},set:function(t){this._skewY=t,this._flagMatrix=!0}},matrix:{enumerable:!0,get:function(){return this._matrix},set:function(t){this._matrix=t,this._flagMatrix=!0}},worldMatrix:{enumerable:!0,get:function(){return g(this,this._worldMatrix),this._worldMatrix},set:function(t){this._worldMatrix=t}}};function it(){this._flagMatrix=!0}var st=class extends Array{constructor(){super(),h(this,"_events",new k),arguments[0]&&Array.isArray(arguments[0])?arguments[0].length>0&&this.push.apply(this,arguments[0]):arguments.length>0&&this.push.apply(this,arguments)}get _bound(){return this._events._bound}set _bound(t){this._events._bound=t}addEventListener(){return this._events.addEventListener.apply(this,arguments)}on(){return this._events.on.apply(this,arguments)}bind(){return this._events.bind.apply(this,arguments)}removeEventListener(){return this._events.removeEventListener.apply(this,arguments)}off(){return this._events.off.apply(this,arguments)}unbind(){return this._events.unbind.apply(this,arguments)}dispatchEvent(){return this._events.dispatchEvent.apply(this,arguments)}trigger(){return this._events.trigger.apply(this,arguments)}listen(){return this._events.listen.apply(this,arguments)}ignore(){return this._events.ignore.apply(this,arguments)}pop(){const t=super.pop.apply(this,arguments);return this.trigger(k.Types.remove,[t]),t}shift(){const t=super.shift.apply(this,arguments);return this.trigger(k.Types.remove,[t]),t}push(){const t=super.push.apply(this,arguments);return this.trigger(k.Types.insert,arguments),t}unshift(){const t=super.unshift.apply(this,arguments);return this.trigger(k.Types.insert,arguments),t}splice(){const t=super.splice.apply(this,arguments);if(this.trigger(k.Types.remove,t),arguments.length>2){const t=this.slice(arguments[0],arguments[0]+arguments.length-2);this.trigger(k.Types.insert,t),this.trigger(k.Types.order)}return t}sort(){return super.sort.apply(this,arguments),this.trigger(k.Types.order),this}reverse(){return super.reverse.apply(this,arguments),this.trigger(k.Types.order),this}indexOf(){return super.indexOf.apply(this,arguments)}},nt=class extends st{constructor(t){super(t=Array.isArray(t)?t:Array.prototype.slice.call(arguments)),h(this,"ids",{}),this.attach(t),this.on(k.Types.insert,this.attach),this.on(k.Types.remove,this.detach)}attach(t){for(let e=0;e<t.length;e++){const i=t[e];i&&i.id&&(this.ids[i.id]=i)}return this}detach(t){for(let e=0;e<t.length;e++)delete this.ids[t[e].id];return this}},rt=Math.min,at=Math.max,ht=class extends tt{constructor(t){super(),h(this,"_flagAdditions",!1),h(this,"_flagSubtractions",!1),h(this,"_flagOrder",!1),h(this,"_flagOpacity",!0),h(this,"_flagBeginning",!1),h(this,"_flagEnding",!1),h(this,"_flagLength",!1),h(this,"_flagMask",!1),h(this,"_fill","#fff"),h(this,"_stroke","#000"),h(this,"_linewidth",1),h(this,"_opacity",1),h(this,"_visible",!0),h(this,"_cap","round"),h(this,"_join","round"),h(this,"_miter",4),h(this,"_closed",!0),h(this,"_curved",!1),h(this,"_automatic",!0),h(this,"_beginning",0),h(this,"_ending",1),h(this,"_length",0),h(this,"_mask",null);for(let t in lt)Object.defineProperty(this,t,lt[t]);this._renderer.type="group",this.additions=[],this.subtractions=[],this.children=Array.isArray(t)?t:Array.prototype.slice.call(arguments)}static InsertChildren(t){for(let e=0;e<t.length;e++)ct.call(this,t[e],this)}static RemoveChildren(t){for(let e=0;e<t.length;e++)ct.call(this,t[e])}static OrderChildren(t){this._flagOrder=!0}clone(t){const e=new ht,i=this.children.map((function(t){return t.clone()}));return e.add(i),e.opacity=this.opacity,this.mask&&(e.mask=this.mask),e.translation.copy(this.translation),e.rotation=this.rotation,e.scale=this.scale,e.className=this.className,this.matrix.manual&&e.matrix.copy(this.matrix),t&&t.add(e),e._update()}toObject(){const t={children:[],translation:this.translation.toObject(),rotation:this.rotation,scale:this.scale instanceof S?this.scale.toObject():this.scale,opacity:this.opacity,className:this.className,mask:this.mask?this.mask.toObject():null};return this.matrix.manual&&(t.matrix=this.matrix.toObject()),X.each(this.children,(function(e,i){t.children[i]=e.toObject()}),this),t}corner(){const t=this.getBoundingClientRect(!0);for(let e=0;e<this.children.length;e++){const i=this.children[e];i.translation.x-=t.left,i.translation.y-=t.top}return this.mask&&(this.mask.translation.x-=t.left,this.mask.translation.y-=t.top),this}center(){const t=this.getBoundingClientRect(!0),e=t.left+t.width/2-this.translation.x,i=t.top+t.height/2-this.translation.y;for(let t=0;t<this.children.length;t++){const s=this.children[t];s.isShape&&(s.translation.x-=e,s.translation.y-=i)}return this.mask&&(this.mask.translation.x-=e,this.mask.translation.y-=i),this}getById(t){let e=null;return function i(s){if(s.id===t)return s;if(s.children)for(let t=0;t<s.children.length;t++)if(e=i(s.children[t]),e)return e;return null}(this)}getByClassName(t){const e=[];return function i(s){if(Array.prototype.indexOf.call(s.classList,t)>=0&&e.push(s),s.children)for(let t=0;t<s.children.length;t++)i(s.children[t]);return e}(this)}getByType(t){const e=[];return function i(s){if(s instanceof t&&e.push(s),s.children)for(let t=0;t<s.children.length;t++)i(s.children[t]);return e}(this)}add(t){t=t instanceof Array?t.slice():Array.prototype.slice.call(arguments);for(let e=0;e<t.length;e++){const i=t[e];if(!i||!i.id)continue;const s=Array.prototype.indexOf.call(this.children,i);s>=0&&this.children.splice(s,1),this.children.push(i)}return this}remove(t){const e=arguments.length,i=this.parent;if(e<=0&&i)return i.remove(this),this;t=t instanceof Array?t.slice():Array.prototype.slice.call(arguments);for(let e=0;e<t.length;e++){const i=t[e];if(!i||!this.children.ids[i.id])continue;const s=this.children.indexOf(i);s>=0&&this.children.splice(s,1)}return this}getBoundingClientRect(t){let e,i,s,n,r,a,h,o,l,c;this._update(!0);let f=1/0,d=-1/0,u=1/0,_=-1/0;const p=/texture|gradient/i;i=t?this._matrix:g(this);for(let i=0;i<this.children.length;i++){const s=this.children[i];s.visible&&!p.test(s._renderer.type)&&(e=s.getBoundingClientRect(t),h="number"!=typeof e.top||X.isNaN(e.top)||!isFinite(e.top),o="number"!=typeof e.left||X.isNaN(e.left)||!isFinite(e.left),l="number"!=typeof e.right||X.isNaN(e.right)||!isFinite(e.right),c="number"!=typeof e.bottom||X.isNaN(e.bottom)||!isFinite(e.bottom),h||o||l||c||(u=rt(e.top,u),f=rt(e.left,f),d=at(e.right,d),_=at(e.bottom,_)))}return t&&(s=i.multiply(f,u,1),n=i.multiply(f,_,1),r=i.multiply(d,u,1),a=i.multiply(d,_,1),u=rt(s.y,n.y,r.y,a.y),f=rt(s.x,n.x,r.x,a.x),d=at(s.x,n.x,r.x,a.x),_=at(s.y,n.y,r.y,a.y)),{top:u,left:f,right:d,bottom:_,width:d-f,height:_-u}}noFill(){return this.children.forEach((function(t){t.noFill()})),this}noStroke(){return this.children.forEach((function(t){t.noStroke()})),this}subdivide(){const t=arguments;return this.children.forEach((function(e){e.subdivide.apply(e,t)})),this}_update(){let t,e,i;if(this._flagBeginning||this._flagEnding){const s=Math.min(this._beginning,this._ending),n=Math.max(this._beginning,this._ending),r=this.length;let a=0;const h=s*r,o=n*r;for(t=0;t<this.children.length;t++)i=this.children[t],e=i.length,h>a+e?(i.beginning=1,i.ending=1):o<a?(i.beginning=0,i.ending=0):h>a&&h<a+e?(i.beginning=(h-a)/e,i.ending=1):o>a&&o<a+e?(i.beginning=0,i.ending=(o-a)/e):(i.beginning=0,i.ending=1),a+=e}return super._update.apply(this,arguments)}flagReset(){return this._flagAdditions&&(this.additions.length=0,this._flagAdditions=!1),this._flagSubtractions&&(this.subtractions.length=0,this._flagSubtractions=!1),this._flagOrder=this._flagMask=this._flagOpacity=this._flagBeginning=this._flagEnding=!1,super.flagReset.call(this),this}},ot=ht;h(ot,"Children",nt),h(ot,"Properties",["fill","stroke","linewidth","cap","join","miter","closed","curved","automatic"]);var lt={visible:{enumerable:!0,get:function(){return this._visible},set:function(t){this._flagVisible=this._visible!==t||this._flagVisible,this._visible=t}},opacity:{enumerable:!0,get:function(){return this._opacity},set:function(t){this._flagOpacity=this._opacity!==t||this._flagOpacity,this._opacity=t}},beginning:{enumerable:!0,get:function(){return this._beginning},set:function(t){this._flagBeginning=this._beginning!==t||this._flagBeginning,this._beginning=t}},ending:{enumerable:!0,get:function(){return this._ending},set:function(t){this._flagEnding=this._ending!==t||this._flagEnding,this._ending=t}},length:{enumerable:!0,get:function(){if(this._flagLength||this._length<=0){if(this._length=0,!this.children)return this._length;for(let t=0;t<this.children.length;t++){const e=this.children[t];this._length+=e.length}}return this._length}},fill:{enumerable:!0,get:function(){return this._fill},set:function(t){this._fill=t;for(let e=0;e<this.children.length;e++)this.children[e].fill=t}},stroke:{enumerable:!0,get:function(){return this._stroke},set:function(t){this._stroke=t;for(let e=0;e<this.children.length;e++)this.children[e].stroke=t}},linewidth:{enumerable:!0,get:function(){return this._linewidth},set:function(t){this._linewidth=t;for(let e=0;e<this.children.length;e++)this.children[e].linewidth=t}},join:{enumerable:!0,get:function(){return this._join},set:function(t){this._join=t;for(let e=0;e<this.children.length;e++)this.children[e].join=t}},miter:{enumerable:!0,get:function(){return this._miter},set:function(t){this._miter=t;for(let e=0;e<this.children.length;e++)this.children[e].miter=t}},cap:{enumerable:!0,get:function(){return this._cap},set:function(t){this._cap=t;for(let e=0;e<this.children.length;e++)this.children[e].cap=t}},closed:{enumerable:!0,get:function(){return this._closed},set:function(t){this._closed=t;for(let e=0;e<this.children.length;e++)this.children[e].closed=t}},curved:{enumerable:!0,get:function(){return this._curved},set:function(t){this._curved=t;for(let e=0;e<this.children.length;e++)this.children[e].curved=t}},automatic:{enumerable:!0,get:function(){return this._automatic},set:function(t){this._automatic=t;for(let e=0;e<this.children.length;e++)this.children[e].automatic=t}},children:{enumerable:!0,get:function(){return this._children},set:function(t){const e=ot.InsertChildren.bind(this),i=ot.RemoveChildren.bind(this),s=ot.OrderChildren.bind(this);this._children&&(this._children.unbind(),this._children.length>0&&i(this._children)),this._children=new nt(t),this._children.bind(k.Types.insert,e),this._children.bind(k.Types.remove,i),this._children.bind(k.Types.order,s),t.length>0&&e(t)}},mask:{enumerable:!0,get:function(){return this._mask},set:function(t){this._mask=t,this._flagMask=!0,X.isObject(t)&&!t.clip&&(t.clip=!0)}}};function ct(t,e){const i=t.parent;let s;function n(){e.subtractions.length>0&&(s=Array.prototype.indexOf.call(e.subtractions,t),s>=0&&e.subtractions.splice(s,1)),e.additions.length>0&&(s=Array.prototype.indexOf.call(e.additions,t),s>=0&&e.additions.splice(s,1)),t.parent=e,e.additions.push(t),e._flagAdditions=!0}function r(){s=Array.prototype.indexOf.call(i.additions,t),s>=0&&i.additions.splice(s,1),s=Array.prototype.indexOf.call(i.subtractions,t),s<0&&(i.subtractions.push(t),i._flagSubtractions=!0)}i!==e?(i&&i.children.ids[t.id]&&(s=Array.prototype.indexOf.call(i.children,t),i.children.splice(s,1),r()),e?n():(r(),i._flagAdditions&&0===i.additions.length&&(i._flagAdditions=!1),i._flagSubtractions&&0===i.subtractions.length&&(i._flagSubtractions=!1),delete t.parent)):n()}var ft=new Q,dt=[],ut=Math.max,gt=Math.min,_t=Math.abs,pt=Math.sin,mt=Math.cos,yt=Math.acos,bt=Math.sqrt,xt={isHidden:/(undefined|none|transparent)/i,alignments:{left:"start",middle:"center",right:"end"},shim:function(t,e){return t.tagName=t.nodeName=e||"canvas",t.nodeType=1,t.getAttribute=function(t){return this[t]},t.setAttribute=function(t,e){return this[t]=e,this},t},group:{renderChild:function(t){xt[t._renderer.type].render.call(t,this.ctx,!0,this.clip)},render:function(t){if(!this._visible)return this;this._update();const e=this._matrix.elements,i=this.parent;this._renderer.opacity=this._opacity*(i&&i._renderer?i._renderer.opacity:1);const s=this._mask,n=kt(e),r=!n||!!s;if(this._renderer.context||(this._renderer.context={}),this._renderer.context.ctx=t,r&&(t.save(),n||t.transform(e[0],e[3],e[1],e[4],e[2],e[5])),s&&xt[s._renderer.type].render.call(s,t,!0),this._opacity>0&&0!==this._scale)for(let e=0;e<this.children.length;e++){const i=this.children[e];xt[i._renderer.type].render.call(i,t)}return r&&t.restore(),this.flagReset()}},path:{render:function(t,e,i){let s,n,r,a,h,l,c,f,d,u,g,_,p,m,b,x,v,w,k,R,A,T,M,E,O,C,F,P,L,j,I,z,B,N,D,G,V,W,H,X,Y;if(N=this.parent&&this.parent._renderer?this.parent._renderer.opacity:1,L=this._mask,j=this._clip,h=this._opacity*(N||1),l=this._visible,!e&&(!l||j||0===h))return this;this._update(),s=this._matrix.elements,n=this._stroke,r=this._linewidth,a=this._fill,c=this._cap,f=this._join,d=this._miter,u=this._closed,g=this._renderer.vertices,_=g.length,p=_-1,I=kt(s),B=this.dashes,I||(t.save(),t.transform(s[0],s[3],s[1],s[4],s[2],s[5])),L&&xt[L._renderer.type].render.call(L,t,!0),a&&("string"==typeof a?t.fillStyle=a:(xt[a._renderer.type].render.call(a,t,this),t.fillStyle=a._renderer.effect)),n&&("string"==typeof n?t.strokeStyle=n:(xt[n._renderer.type].render.call(n,t,this),t.strokeStyle=n._renderer.effect),r&&(t.lineWidth=r),d&&(t.miterLimit=d),f&&(t.lineJoin=f),!u&&c&&(t.lineCap=c)),"number"==typeof h&&(t.globalAlpha=h),B&&B.length>0&&(t.lineDashOffset=B.offset||0,t.setLineDash(B)),t.beginPath();for(let e=0;e<_;e++)switch(x=g[e],F=x.x,P=x.y,x.command){case o.close:t.closePath();break;case o.arc:D=x.rx,G=x.ry,V=x.xAxisRotation,W=x.largeArcFlag,H=x.sweepFlag,m=u?y(e-1,_):ut(e-1,0),b=g[m],X=b.x,Y=b.y,xt.renderSvgArcCommand(t,X,Y,D,G,W,H,V,F,P);break;case o.curve:m=u?y(e-1,_):Math.max(e-1,0),b=g[m],M=b.controls&&b.controls.right||S.zero,E=x.controls&&x.controls.left||S.zero,b._relative?(A=M.x+b.x,T=M.y+b.y):(A=M.x,T=M.y),x._relative?(k=E.x+x.x,R=E.y+x.y):(k=E.x,R=E.y),t.bezierCurveTo(A,T,k,R,F,P),e>=p&&u&&(v=w,O=x.controls&&x.controls.right||S.zero,C=v.controls&&v.controls.left||S.zero,x._relative?(A=O.x+x.x,T=O.y+x.y):(A=O.x,T=O.y),v._relative?(k=C.x+v.x,R=C.y+v.y):(k=C.x,R=C.y),F=v.x,P=v.y,t.bezierCurveTo(A,T,k,R,F,P));break;case o.line:t.lineTo(F,P);break;case o.move:w=x,t.moveTo(F,P)}return u&&t.closePath(),j||i||(xt.isHidden.test(a)||(z=a._renderer&&a._renderer.offset,z&&(t.save(),t.translate(-a._renderer.offset.x,-a._renderer.offset.y),t.scale(a._renderer.scale.x,a._renderer.scale.y)),t.fill(),z&&t.restore()),xt.isHidden.test(n)||(z=n._renderer&&n._renderer.offset,z&&(t.save(),t.translate(-n._renderer.offset.x,-n._renderer.offset.y),t.scale(n._renderer.scale.x,n._renderer.scale.y),t.lineWidth=r/n._renderer.scale.x),t.stroke(),z&&t.restore())),I||t.restore(),j&&!i&&t.clip(),B&&B.length>0&&t.setLineDash(dt),this.flagReset()}},points:{render:function(t,e,i){let s,n,r,a,h,o,l,f,u,_,p,m,y,b,x,v;if(v=this.parent&&this.parent._renderer?this.parent._renderer.opacity:1,h=this._opacity*(v||1),o=this._visible,!(e||o&&0!==h))return this;this._update(),s=this._matrix.elements,n=this._stroke,r=this._linewidth,a=this._fill,f=this._renderer.collection,u=f.length,y=kt(s),x=this.dashes,l=this._size,y||(t.save(),t.transform(s[0],s[3],s[1],s[4],s[2],s[5])),a&&("string"==typeof a?t.fillStyle=a:(xt[a._renderer.type].render.call(a,t,this),t.fillStyle=a._renderer.effect)),n&&("string"==typeof n?t.strokeStyle=n:(xt[n._renderer.type].render.call(n,t,this),t.strokeStyle=n._renderer.effect),r&&(t.lineWidth=r)),"number"==typeof h&&(t.globalAlpha=h),x&&x.length>0&&(t.lineDashOffset=x.offset||0,t.setLineDash(x)),t.beginPath();let w,k=.5*l;this._sizeAttenuation||(g(this,ft),w=ft.elements,w=d(w[0],w[3],w[1],w[4],w[2],w[5]),k/=Math.max(w.scaleX,w.scaleY));for(let e=0;e<u;e++)_=f[e],p=_.x,m=_.y,t.moveTo(p+k,m),t.arc(p,m,k,0,c);return i||(xt.isHidden.test(a)||(b=a._renderer&&a._renderer.offset,b&&(t.save(),t.translate(-a._renderer.offset.x,-a._renderer.offset.y),t.scale(a._renderer.scale.x,a._renderer.scale.y)),t.fill(),b&&t.restore()),xt.isHidden.test(n)||(b=n._renderer&&n._renderer.offset,b&&(t.save(),t.translate(-n._renderer.offset.x,-n._renderer.offset.y),t.scale(n._renderer.scale.x,n._renderer.scale.y),t.lineWidth=r/n._renderer.scale.x),t.stroke(),b&&t.restore())),y||t.restore(),x&&x.length>0&&t.setLineDash(dt),this.flagReset()}},text:{render:function(t,e,i){const s=this.parent&&this.parent._renderer?this.parent._renderer.opacity:1,n=this._opacity*s,r=this._visible,a=this._mask,h=this._clip;if(!e&&(!r||h||0===n))return this;this._update();const o=this._matrix.elements,l=this._stroke,c=this._linewidth,f=this._fill,d=this._decoration,u=kt(o),g=f._renderer&&f._renderer.offset&&l._renderer&&l._renderer.offset,_=this.dashes,p=xt.alignments[this._alignment]||this._alignment,m=this._baseline;let y,b,x,v,w,k,R,A,S,T,M;if(u||(t.save(),t.transform(o[0],o[3],o[1],o[4],o[2],o[5])),a&&xt[a._renderer.type].render.call(a,t,!0),g||(t.font=[this._style,this._weight,this._size+"px/"+this._leading+"px",this._family].join(" ")),t.textAlign=p,t.textBaseline=m,f&&("string"==typeof f?t.fillStyle=f:(xt[f._renderer.type].render.call(f,t,this),t.fillStyle=f._renderer.effect)),l&&("string"==typeof l?t.strokeStyle=l:(xt[l._renderer.type].render.call(l,t,this),t.strokeStyle=l._renderer.effect),c&&(t.lineWidth=c)),"number"==typeof n&&(t.globalAlpha=n),_&&_.length>0&&(t.lineDashOffset=_.offset||0,t.setLineDash(_)),h||i||(xt.isHidden.test(f)||(f._renderer&&f._renderer.offset?(k=f._renderer.scale.x,R=f._renderer.scale.y,t.save(),t.translate(-f._renderer.offset.x,-f._renderer.offset.y),t.scale(k,R),y=this._size/f._renderer.scale.y,b=this._leading/f._renderer.scale.y,t.font=[this._style,this._weight,y+"px/",b+"px",this._family].join(" "),x=f._renderer.offset.x/f._renderer.scale.x,v=f._renderer.offset.y/f._renderer.scale.y,t.fillText(this.value,x,v),t.restore()):t.fillText(this.value,0,0)),xt.isHidden.test(l)||(l._renderer&&l._renderer.offset?(k=l._renderer.scale.x,R=l._renderer.scale.y,t.save(),t.translate(-l._renderer.offset.x,-l._renderer.offset.y),t.scale(k,R),y=this._size/l._renderer.scale.y,b=this._leading/l._renderer.scale.y,t.font=[this._style,this._weight,y+"px/",b+"px",this._family].join(" "),x=l._renderer.offset.x/l._renderer.scale.x,v=l._renderer.offset.y/l._renderer.scale.y,w=c/l._renderer.scale.x,t.lineWidth=w,t.strokeText(this.value,x,v),t.restore()):t.strokeText(this.value,0,0))),/(underline|strikethrough)/i.test(d)){const e=t.measureText(this.value);let i=1;switch(d){case"underline":S=e.actualBoundingBoxAscent,M=e.actualBoundingBoxAscent;break;case"strikethrough":S=0,M=0,i=.5}switch(m){case"top":S+=this._size*i,M+=this._size*i;break;case"baseline":case"bottom":S-=this._size*i,M-=this._size*i}switch(p){case"left":case"start":A=0,T=e.width;break;case"right":case"end":A=-e.width,T=0;break;default:A=-e.width/2,T=e.width/2}t.lineWidth=Math.max(Math.floor(this._size/15),1),t.strokeStyle=t.fillStyle,t.beginPath(),t.moveTo(A,S),t.lineTo(T,M),t.stroke()}return u||t.restore(),h&&!i&&t.clip(),_&&_.length>0&&t.setLineDash(dt),this.flagReset()}},"linear-gradient":{render:function(t,e){if(e){if(this._update(),!this._renderer.effect||this._flagEndPoints||this._flagStops||this._flagUnits){let i,s=this.left._x,n=this.left._y,r=this.right._x,a=this.right._y;/objectBoundingBox/i.test(this._units)&&(i=e.getBoundingClientRect(!0),s=(s-.5)*i.width,n=(n-.5)*i.height,r=(r-.5)*i.width,a=(a-.5)*i.height),this._renderer.effect=t.createLinearGradient(s,n,r,a);for(let t=0;t<this.stops.length;t++){const e=this.stops[t];this._renderer.effect.addColorStop(e._offset,e._color)}}return this.flagReset()}}},"radial-gradient":{render:function(t,e){if(e){if(this._update(),!this._renderer.effect||this._flagCenter||this._flagFocal||this._flagRadius||this._flagStops||this._flagUnits){let i,s=this.center._x,n=this.center._y,r=this.focal._x,a=this.focal._y,h=this._radius;/objectBoundingBox/i.test(this._units)&&(i=e.getBoundingClientRect(!0),s=s*i.width*.5,n=n*i.height*.5,r=r*i.width*.5,a=a*i.height*.5,h*=.5*Math.min(i.width,i.height)),this._renderer.effect=t.createRadialGradient(s,n,0,r,a,h);for(let t=0;t<this.stops.length;t++){const e=this.stops[t];this._renderer.effect.addColorStop(e._offset,e._color)}}return this.flagReset()}}},texture:{render:function(t){this._update();const e=this.image;return(!this._renderer.effect||(this._flagLoaded||this._flagImage||this._flagVideo||this._flagRepeat)&&this.loaded)&&(this._renderer.effect=t.createPattern(this.image,this._repeat)),(this._flagOffset||this._flagLoaded||this._flagScale)&&(this._renderer.offset instanceof S||(this._renderer.offset=new S),this._renderer.offset.x=-this._offset.x,this._renderer.offset.y=-this._offset.y,e&&(this._renderer.offset.x+=e.width/2,this._renderer.offset.y+=e.height/2,this._scale instanceof S?(this._renderer.offset.x*=this._scale.x,this._renderer.offset.y*=this._scale.y):(this._renderer.offset.x*=this._scale,this._renderer.offset.y*=this._scale))),(this._flagScale||this._flagLoaded)&&(this._renderer.scale instanceof S||(this._renderer.scale=new S),this._scale instanceof S?this._renderer.scale.copy(this._scale):this._renderer.scale.set(this._scale,this._scale)),this.flagReset()}},renderSvgArcCommand:function(t,e,i,s,n,r,a,h,o,l){h=h*Math.PI/180,s=_t(s),n=_t(n);const f=(e-o)/2,d=(i-l)/2,u=mt(h)*f+pt(h)*d,g=-pt(h)*f+mt(h)*d,_=u*u,p=g*g;let m=s*s,b=n*n;const x=_/m+p/b;if(x>1){const t=bt(x);m=(s*=t)*s,b=(n*=t)*n}const v=m*p+b*_;let w=bt(ut(0,(m*b-v)/v));r===a&&(w=-w);const k=w*s*g/n,R=-w*n*u/s,A=mt(h)*k-pt(h)*R+(e+o)/2,S=pt(h)*k+mt(h)*R+(i+l)/2,T=wt(1,0,(u-k)/s,(g-R)/n);!function(t,e,i,s,n,r,a,h,o){const l=a-r,f=F.Tolerance.epsilon,d=Math.abs(l)<f;let u=y(l,c);u<f&&(u=d?0:c),!0!==h||d||(u===c?u=-c:u-=c);for(let a=0;a<12;a++){const h=r+a/11*u;let l=e+s*Math.cos(h),c=i+n*Math.sin(h);if(0!==o){const t=Math.cos(o),s=Math.sin(o),n=l-e,r=c-i;l=n*t-r*s+e,c=n*s+r*t+i}t.lineTo(l,c)}}(t,A,S,s,n,T,T+wt((u-k)/s,(g-R)/n,(-u-k)/s,(-g-R)/n)%c,0===a,h)}},vt=class extends k{constructor(t){super();const e=!1!==t.smoothing;this.domElement=t.domElement||document.createElement("canvas"),this.ctx=this.domElement.getContext("2d"),this.overdraw=t.overdraw||!1,void 0!==this.ctx.imageSmoothingEnabled&&(this.ctx.imageSmoothingEnabled=e),this.scene=new ot,this.scene.parent=this}setSize(t,e,i){return this.width=t,this.height=e,this.ratio=void 0===i?W(this.ctx):i,this.domElement.width=t*this.ratio,this.domElement.height=e*this.ratio,this.domElement.style&&X.extend(this.domElement.style,{width:t+"px",height:e+"px"}),this.trigger(k.Types.resize,t,e,i)}render(){const t=1===this.ratio;return t||(this.ctx.save(),this.ctx.scale(this.ratio,this.ratio)),this.overdraw||this.ctx.clearRect(0,0,this.width,this.height),xt.group.render.call(this.scene,this.ctx),t||this.ctx.restore(),this}};function wt(t,e,i,s){const n=t*i+e*s,r=bt(t*t+e*e)*bt(i*i+s*s);let a=yt(ut(-1,gt(1,n/r)));return t*s-e*i<0&&(a=-a),a}function kt(t){return 1==t[0]&&0==t[3]&&0==t[1]&&1==t[4]&&0==t[2]&&0==t[5]}h(vt,"Utils",xt);var Rt={Image:null,isHeadless:!1,shim:function(t,e){return vt.Utils.shim(t),void 0!==e&&(Rt.Image=e),Rt.isHeadless=!0,t}},At={hasEventListeners:"function"==typeof s.addEventListener,bind:function(t,e,i,s){return this.hasEventListeners?t.addEventListener(e,i,!!s):t.attachEvent("on"+e,i),At},unbind:function(t,e,i,s){return At.hasEventListeners?t.removeEventListeners(e,i,!!s):t.detachEvent("on"+e,i),At},getRequestAnimationFrame:function(){const t=["ms","moz","webkit","o"];let e=0,i=s.requestAnimationFrame;if(!i){for(let e=0;e<t.length;e++)i=s[t[e]+"RequestAnimationFrame"]||i;i=i||function(t,i){const n=(new Date).getTime(),r=Math.max(0,16-(n-e)),a=s.setTimeout((function(){t(n+r)}),r);return e=n+r,a}}return i}},St=s.document?s.document.createElement("div"):{};St.id="help-two-load",Object.defineProperty(At,"temp",{enumerable:!0,get:function(){return X.isElement(St)&&!s.document.head.contains(St)&&(St.style.display="none",s.document.head.appendChild(St)),St}});var Tt=class extends Error{constructor(t){super(),h(this,"name","Two.js"),h(this,"message"),this.message=t}},Mt=class{constructor(){h(this,"map",{})}add(t,e){return this.map[t]=e,this}remove(t){return delete this.map[t],this}get(t){return this.map[t]}contains(t){return t in this.map}};function Et(t,e){if(0===e||1===e)return!0;const i=t._length*e;let s=0;for(let e=0;e<t._lengths.length;e++){const n=t._lengths[e];if(s>=i)return i-s>=0;s+=n}return!1}function Ot(t,e){const i=t._length;if(e<=0)return 0;if(e>=i)return t._lengths.length-1;for(let i=0,s=0;i<t._lengths.length;i++){if(s+t._lengths[i]>=e)return e-=s,Math.max(i-1,0)+e/t._lengths[i];s+=t._lengths[i]}return-1}function Ct(t,e,i){let s,n,r,a,h,o,l,c;const f=e.controls&&e.controls.right,d=t.controls&&t.controls.left;return s=e.x,h=e.y,n=(f||e).x,o=(f||e).y,r=(d||t).x,l=(d||t).y,a=t.x,c=t.y,f&&e._relative&&(n+=e.x,o+=e.y),d&&t._relative&&(r+=t.x,l+=t.y),j(s,h,n,o,r,l,a,c,i)}function Ft(t,e,i){let s,n,r,a,h,o,l,c;const f=e.controls&&e.controls.right,d=t.controls&&t.controls.left;return s=e.x,h=e.y,n=(f||e).x,o=(f||e).y,r=(d||t).x,l=(d||t).y,a=t.x,c=t.y,f&&e._relative&&(n+=e.x,o+=e.y),d&&t._relative&&(r+=t.x,l+=t.y),L(s,h,n,o,r,l,a,c,i)}var Pt=class extends Y{constructor(t,e,i){super(),h(this,"_flagOffset",!0),h(this,"_flagOpacity",!0),h(this,"_flagColor",!0),h(this,"_offset",0),h(this,"_opacity",1),h(this,"_color","#fff");for(let t in jt)Object.defineProperty(this,t,jt[t]);this._renderer.type="stop",this.offset="number"==typeof t?t:Pt.Index<=0?0:1,this.opacity="number"==typeof i?i:1,this.color="string"==typeof e?e:Pt.Index<=0?"#fff":"#000",Pt.Index=(Pt.Index+1)%2}clone(t){const e=new Pt;return X.each(Pt.Properties,(function(t){e[t]=this[t]}),this),t&&t.stops&&t.stops.push(e),e}toObject(){const t={};return X.each(Pt.Properties,(function(e){t[e]=this[e]}),this),t}flagReset(){return this._flagOffset=this._flagColor=this._flagOpacity=!1,super.flagReset.call(this),this}},Lt=Pt;h(Lt,"Index",0),h(Lt,"Properties",["offset","opacity","color"]);var jt={offset:{enumerable:!0,get:function(){return this._offset},set:function(t){this._offset=t,this._flagOffset=!0,this.parent&&(this.parent._flagStops=!0)}},opacity:{enumerable:!0,get:function(){return this._opacity},set:function(t){this._opacity=t,this._flagOpacity=!0,this.parent&&(this.parent._flagStops=!0)}},color:{enumerable:!0,get:function(){return this._color},set:function(t){this._color=t,this._flagColor=!0,this.parent&&(this.parent._flagStops=!0)}}},It=class extends Y{constructor(t){super(),h(this,"_flagStops",!1),h(this,"_flagSpread",!1),h(this,"_flagUnits",!1),h(this,"_spread",""),h(this,"_units","");for(let t in Bt)Object.defineProperty(this,t,Bt[t]);this._renderer.type="gradient",this.id=O+C(),this.classList=[],this._renderer.flagStops=Nt.bind(this),this._renderer.bindStops=Dt.bind(this),this._renderer.unbindStops=Gt.bind(this),this.spread="pad",this.units="objectBoundingBox",t&&(this.stops=t)}clone(t){const e=this.stops.map((function(t){return t.clone()})),i=new It(e);return X.each(It.Properties,(function(t){i[t]=this[t]}),this),t&&t.add(i),i}toObject(){const t={stops:this.stops.map((function(t){return t.toObject()}))};return X.each(It.Properties,(function(e){t[e]=this[e]}),this),t}_update(){return(this._flagSpread||this._flagStops)&&this.trigger(k.Types.change),this}flagReset(){return this._flagSpread=this._flagUnits=this._flagStops=!1,super.flagReset.call(this),this}},zt=It;h(zt,"Stop",Lt),h(zt,"Properties",["spread","stops","renderer","units"]);var Bt={spread:{enumerable:!0,get:function(){return this._spread},set:function(t){this._spread=t,this._flagSpread=!0}},units:{enumerable:!0,get:function(){return this._units},set:function(t){this._units=t,this._flagUnits=!0}},stops:{enumerable:!0,get:function(){return this._stops},set:function(t){const e=this._renderer.bindStops,i=this._renderer.unbindStops;this._stops&&this._stops.unbind(k.Types.insert,e).unbind(k.Types.remove,i),this._stops=new st((t||[]).slice(0)),this._stops.bind(k.Types.insert,e).bind(k.Types.remove,i),e(this._stops)}}};function Nt(){this._flagStops=!0}function Dt(t){let e=t.length;for(;e--;)t[e].bind(k.Types.change,this._renderer.flagStops),t[e].parent=this;this._renderer.flagStops()}function Gt(t){let e=t.length;for(;e--;)t[e].unbind(k.Types.change,this._renderer.flagStops),delete t[e].parent;this._renderer.flagStops()}var Vt=class extends zt{constructor(t,e,i,s,n){super(n),h(this,"_flagEndPoints",!1),h(this,"_left",null),h(this,"_right",null);for(let t in Ht)Object.defineProperty(this,t,Ht[t]);this._renderer.type="linear-gradient",this._renderer.flagEndPoints=Xt.bind(this),this.left=new S,this.right=new S,"number"==typeof t&&(this.left.x=t),"number"==typeof e&&(this.left.y=e),"number"==typeof i&&(this.right.x=i),"number"==typeof s&&(this.right.y=s)}clone(t){const e=this.stops.map((function(t){return t.clone()})),i=new Vt(this.left._x,this.left._y,this.right._x,this.right._y,e);return X.each(zt.Properties,(function(t){i[t]=this[t]}),this),t&&t.add(i),i}toObject(){const t=super.toObject.call(this);return t.left=this.left.toObject(),t.right=this.right.toObject(),t}_update(){return(this._flagEndPoints||this._flagSpread||this._flagStops)&&this.trigger(k.Types.change),this}flagReset(){return this._flagEndPoints=!1,super.flagReset.call(this),this}},Wt=Vt;h(Wt,"Properties",["left","right"]),h(Wt,"Stop",Lt);var Ht={left:{enumerable:!0,get:function(){return this._left},set:function(t){this._left instanceof S&&this._left.unbind(k.Types.change,this._renderer.flagEndPoints),this._left=t,this._left.bind(k.Types.change,this._renderer.flagEndPoints),this._flagEndPoints=!0}},right:{enumerable:!0,get:function(){return this._right},set:function(t){this._right instanceof S&&this._right.unbind(k.Types.change,this._renderer.flagEndPoints),this._right=t,this._right.bind(k.Types.change,this._renderer.flagEndPoints),this._flagEndPoints=!0}}};function Xt(){this._flagEndPoints=!0}var Yt=class extends zt{constructor(t,e,i,s,n,r){super(s),h(this,"_flagRadius",!1),h(this,"_flagCenter",!1),h(this,"_flagFocal",!1),h(this,"_radius",0),h(this,"_center",null),h(this,"_focal",null);for(let t in Kt)Object.defineProperty(this,t,Kt[t]);this._renderer.type="radial-gradient",this._renderer.flagCenter=Jt.bind(this),this._renderer.flagFocal=$t.bind(this),this.center=new S,this.radius="number"==typeof i?i:1,this.focal=new S,"number"==typeof t&&(this.center.x=t),"number"==typeof e&&(this.center.y=e),this.focal.copy(this.center),"number"==typeof n&&(this.focal.x=n),"number"==typeof r&&(this.focal.y=r)}clone(t){const e=this.stops.map((function(t){return t.clone()})),i=new Yt(this.center._x,this.center._y,this._radius,e,this.focal._x,this.focal._y);return X.each(zt.Properties.concat(Yt.Properties),(function(t){i[t]=this[t]}),this),t&&t.add(i),i}toObject(){const t=super.toObject.call(this);return X.each(Yt.Properties,(function(e){t[e]=this[e]}),this),t.center=this.center.toObject(),t.focal=this.focal.toObject(),t}_update(){return(this._flagRadius||this._flatCenter||this._flagFocal||this._flagSpread||this._flagStops)&&this.trigger(k.Types.change),this}flagReset(){return this._flagRadius=this._flagCenter=this._flagFocal=!1,super.flagReset.call(this),this}},Ut=Yt;h(Ut,"Stop",Lt),h(Ut,"Properties",["center","radius","focal"]);var qt,Kt={radius:{enumerable:!0,get:function(){return this._radius},set:function(t){this._radius=t,this._flagRadius=!0}},center:{enumerable:!0,get:function(){return this._center},set:function(t){this._center&&this._center.unbind(k.Types.change,this._renderer.flagCenter),this._center=t,this._center.bind(k.Types.change,this._renderer.flagCenter),this._flagCenter=!0}},focal:{enumerable:!0,get:function(){return this._focal},set:function(t){this._focal&&this._focal.unbind(k.Types.change,this._renderer.flagFocal),this._focal=t,this._focal.bind(k.Types.change,this._renderer.flagFocal),this._flagFocal=!0}}};function Jt(){this._flagCenter=!0}function $t(){this._flagFocal=!0}var Zt={video:/\.(mp4|webm|ogg)$/i,image:/\.(jpe?g|png|gif|tiff|webp)$/i,effect:/texture|gradient/i};s.document&&(qt=document.createElement("a"));var Qt=class extends Y{constructor(t,e){super(),h(this,"_flagSrc",!1),h(this,"_flagImage",!1),h(this,"_flagVideo",!1),h(this,"_flagLoaded",!1),h(this,"_flagRepeat",!1),h(this,"_flagOffset",!1),h(this,"_flagScale",!1),h(this,"_src",""),h(this,"_image",null),h(this,"_loaded",!1),h(this,"_repeat","no-repeat"),h(this,"_scale",1),h(this,"_offset",null),this._renderer={};for(let t in ee)Object.defineProperty(this,t,ee[t]);if(this._renderer.type="texture",this._renderer.flagOffset=ie.bind(this),this._renderer.flagScale=se.bind(this),this.id=O+C(),this.classList=[],this.loaded=!1,this.repeat="no-repeat",this.offset=new S,"function"==typeof e){const t=function(){this.unbind(k.Types.load,t),"function"==typeof e&&e()}.bind(this);this.bind(k.Types.load,t)}if("string"==typeof t)this.src=t;else if("object"==typeof t){const e=Object.prototype.toString.call(t);"[object HTMLImageElement]"!==e&&"[object HTMLCanvasElement]"!==e&&"[object HTMLVideoElement]"!==e&&"[object Image]"!==e||(this.image=t)}this._update()}static getAbsoluteURL(t){return qt?(qt.href=t,qt.href):t}static loadHeadlessBuffer(t,e){t.image.onload=e,t.image.src=t.src}static getTag(t){return t&&t.nodeName&&t.nodeName.toLowerCase()||"img"}static getImage(t){const e=Qt.getAbsoluteURL(t);if(Qt.ImageRegistry.contains(e))return Qt.ImageRegistry.get(e);let i;return Rt.Image?(i=new Rt.Image,vt.Utils.shim(i,"img")):s.document?i=Zt.video.test(e)?document.createElement("video"):document.createElement("img"):console.warn("Two.js: no prototypical image defined for Two.Texture"),i.crossOrigin="anonymous",i}static load(t,e){let i=t.image,s=Qt.getTag(i);t._flagImage&&(/canvas/i.test(s)?Qt.Register.canvas(t,e):(t._src=!Rt.isHeadless&&i.getAttribute("two-src")||i.src,Qt.Register[s](t,e))),t._flagSrc&&(i||(i=Qt.getImage(t.src),t.image=i),s=Qt.getTag(i),Qt.Register[s](t,e))}clone(){const t=new Qt(this.src);return t.repeat=this.repeat,t.offset.copy(this.origin),t.scale=this.scale,t}toObject(){return{src:this.src,repeat:this.repeat,origin:this.origin.toObject(),scale:"number"==typeof this.scale?this.scale:this.scale.toObject()}}_update(){return(this._flagSrc||this._flagImage)&&(this.trigger(k.Types.change),(this._flagSrc||this._flagImage)&&(this.loaded=!1,Qt.load(this,function(){this.loaded=!0,this.trigger(k.Types.change).trigger(k.Types.load)}.bind(this)))),this._image&&this._image.readyState>=4&&(this._flagVideo=!0),this}flagReset(){return this._flagSrc=this._flagImage=this._flagLoaded=this._flagRepeat=this._flagVideo=this._flagScale=this._flagOffset=!1,super.flagReset.call(this),this}},te=Qt;h(te,"Properties",["src","loaded","repeat","scale","offset","image"]),h(te,"RegularExpressions",Zt),h(te,"ImageRegistry",new Mt),h(te,"Register",{canvas:function(t,e){t._src="#"+t.id,Qt.ImageRegistry.add(t.src,t.image),"function"==typeof e&&e()},img:function(t,e){const i=t.image,s=function(t){!Rt.isHeadless&&i.removeEventListener&&"function"==typeof i.removeEventListener&&(i.removeEventListener("load",s,!1),i.removeEventListener("error",n,!1)),"function"==typeof e&&e()},n=function(e){throw Rt.isHeadless||"function"!=typeof i.removeEventListener||(i.removeEventListener("load",s,!1),i.removeEventListener("error",n,!1)),new Tt("unable to load "+t.src)};"number"==typeof i.width&&i.width>0&&"number"==typeof i.height&&i.height>0?s():Rt.isHeadless||"function"!=typeof i.addEventListener||(i.addEventListener("load",s,!1),i.addEventListener("error",n,!1)),t._src=Qt.getAbsoluteURL(t._src),!Rt.isHeadless&&i&&i.getAttribute("two-src")||(Rt.isHeadless||i.setAttribute("two-src",t.src),Qt.ImageRegistry.add(t.src,i),Rt.isHeadless?Qt.loadHeadlessBuffer(t,s):t.image.src=t.src)},video:function(t,e){if(Rt.isHeadless)throw new Tt("video textures are not implemented in headless environments.");const i=function(n){t.image.removeEventListener("canplaythrough",i,!1),t.image.removeEventListener("error",s,!1),t.image.width=t.image.videoWidth,t.image.height=t.image.videoHeight,"function"==typeof e&&e()},s=function(e){throw t.image.removeEventListener("canplaythrough",i,!1),t.image.removeEventListener("error",s,!1),new Tt("unable to load "+t.src)};t._src=Qt.getAbsoluteURL(t._src),t.image.getAttribute("two-src")||(t.image.setAttribute("two-src",t.src),Qt.ImageRegistry.add(t.src,t.image)),t.image.readyState>=4?i():(t.image.addEventListener("canplaythrough",i,!1),t.image.addEventListener("error",s,!1),t.image.src=t.src,t.image.load())}});var ee={src:{enumerable:!0,get:function(){return this._src},set:function(t){this._src=t,this._flagSrc=!0}},loaded:{enumerable:!0,get:function(){return this._loaded},set:function(t){this._loaded=t,this._flagLoaded=!0}},repeat:{enumerable:!0,get:function(){return this._repeat},set:function(t){this._repeat=t,this._flagRepeat=!0}},image:{enumerable:!0,get:function(){return this._image},set:function(t){let e;e="canvas"===te.getTag(t)?"#"+t.id:t.src,te.ImageRegistry.contains(e)?this._image=te.ImageRegistry.get(t.src):this._image=t,this._flagImage=!0}},offset:{enumerable:!0,get:function(){return this._offset},set:function(t){this._offset&&this._offset.unbind(k.Types.change,this._renderer.flagOffset),this._offset=t,this._offset.bind(k.Types.change,this._renderer.flagOffset),this._flagOffset=!0}},scale:{enumerable:!0,get:function(){return this._scale},set:function(t){this._scale instanceof S&&this._scale.unbind(k.Types.change,this._renderer.flagScale),this._scale=t,this._scale instanceof S&&this._scale.bind(k.Types.change,this._renderer.flagScale),this._flagScale=!0}}};function ie(){this._flagOffset=!0}function se(){this._flagScale=!0}var ne=Math.min,re=Math.max,ae=Math.ceil,he=Math.floor,oe=new S,le=class extends tt{constructor(t,e,i,s){super(),h(this,"_flagVertices",!0),h(this,"_flagLength",!0),h(this,"_flagFill",!0),h(this,"_flagStroke",!0),h(this,"_flagLinewidth",!0),h(this,"_flagOpacity",!0),h(this,"_flagVisible",!0),h(this,"_flagCap",!0),h(this,"_flagJoin",!0),h(this,"_flagMiter",!0),h(this,"_flagMask",!1),h(this,"_flagClip",!1),h(this,"_length",0),h(this,"_fill","#fff"),h(this,"_stroke","#000"),h(this,"_linewidth",1),h(this,"_opacity",1),h(this,"_visible",!0),h(this,"_cap","round"),h(this,"_join","round"),h(this,"_miter",4),h(this,"_closed",!0),h(this,"_curved",!1),h(this,"_automatic",!0),h(this,"_beginning",0),h(this,"_ending",1),h(this,"_mask",null),h(this,"_clip",!1),h(this,"_dashes",null);for(let t in fe)Object.defineProperty(this,t,fe[t]);this._renderer.type="path",this._renderer.flagVertices=de.bind(this),this._renderer.bindVertices=ue.bind(this),this._renderer.unbindVertices=ge.bind(this),this._renderer.flagFill=_e.bind(this),this._renderer.flagStroke=pe.bind(this),this._renderer.vertices=[],this._renderer.collection=[],this.closed=!!e,this.curved=!!i,this.beginning=0,this.ending=1,this.fill="#fff",this.stroke="#000",this.linewidth=1,this.opacity=1,this.className="",this.visible=!0,this.cap="butt",this.join="miter",this.miter=4,this.vertices=t,this.automatic=!s,this.dashes=[],this.dashes.offset=0}clone(t){const e=new le;for(let t=0;t<this.vertices.length;t++)e.vertices.push(this.vertices[t].clone());for(let t=0;t<le.Properties.length;t++){const i=le.Properties[t];e[i]=this[i]}return e.className=this.className,e.translation.copy(this.translation),e.rotation=this.rotation,e.scale=this.scale,e.skewX=this.skewX,e.skewY=this.skewY,this.matrix.manual&&e.matrix.copy(this.matrix),t&&t.add(e),e._update()}toObject(){const t={vertices:this.vertices.map((function(t){return t.toObject()}))};return X.each(le.Properties,(function(e){void 0!==this[e]&&(this[e].toObject?t[e]=this[e].toObject():t[e]=this[e])}),this),t.className=this.className,t.translation=this.translation.toObject(),t.rotation=this.rotation,t.scale=this.scale instanceof S?this.scale.toObject():this.scale,t.skewX=this.skewX,t.skewY=this.skewY,this.matrix.manual&&(t.matrix=this.matrix.toObject()),t}noFill(){return this.fill="transparent",this}noStroke(){return this.stroke=void 0,this}corner(){const t=this.getBoundingClientRect(!0),e=t.width/2,i=t.height/2,s=t.left+t.width/2,n=t.top+t.height/2;for(let t=0;t<this.vertices.length;t++){const r=this.vertices[t];r.x-=s,r.y-=n,r.x+=e,r.y+=i}return this.mask&&(this.mask.translation.x-=s,this.mask.translation.x+=e,this.mask.translation.y-=n,this.mask.translation.y+=i),this}center(){const t=this.getBoundingClientRect(!0),e=t.left+t.width/2-this.translation.x,i=t.top+t.height/2-this.translation.y;for(let t=0;t<this.vertices.length;t++){const s=this.vertices[t];s.x-=e,s.y-=i}return this.mask&&(this.mask.translation.x-=e,this.mask.translation.y-=i),this}getBoundingClientRect(t){let e,i,s,n,r,a,h,o,l,c,f,d,u,_,p=1/0,m=-1/0,y=1/0,b=-1/0;if(this._update(!0),e=t?this._matrix:g(this),i=(this.linewidth||0)/2,s=this._renderer.vertices.length,s<=0)return{width:0,height:0};for(n=0;n<s;n++)if(a=this._renderer.vertices[n],r=this._renderer.vertices[(n+s-1)%s],r.controls&&a.controls){h=r.controls.right.x,o=r.controls.right.y,r.relative&&(h+=r.x,o+=r.y),l=a.controls.left.x,c=a.controls.left.y,a.relative&&(l+=a.x,c+=a.y);const t=I(r.x,r.y,h,o,l,c,a.x,a.y);y=ne(t.min.y-i,y),p=ne(t.min.x-i,p),m=re(t.max.x+i,m),b=re(t.max.y+i,b)}else n<=1&&(y=ne(r.y-i,y),p=ne(r.x-i,p),m=re(r.x+i,m),b=re(r.y+i,b)),y=ne(a.y-i,y),p=ne(a.x-i,p),m=re(a.x+i,m),b=re(a.y+i,b);return f=e.multiply(p,y,1),d=e.multiply(p,b,1),u=e.multiply(m,y,1),_=e.multiply(m,b,1),y=ne(f.y,d.y,u.y,_.y),p=ne(f.x,d.x,u.x,_.x),m=re(f.x,d.x,u.x,_.x),b=re(f.y,d.y,u.y,_.y),{top:y,left:p,right:m,bottom:b,width:m-p,height:b-y}}getPointAt(t,e){let i,s,n,r,a,h,l,c,f,d,u,g,p,m,b,x=this.length*Math.min(Math.max(t,0),1);const v=this.vertices.length,w=v-1;let k=null,R=null;for(let e=0,n=this._lengths.length,r=0;e<n;e++){if(r+this._lengths[e]>=x){this._closed?(i=y(e,v),s=y(e-1,v),0===e&&(i=s,s=e)):(i=e,s=Math.min(Math.max(e-1,0),w)),k=this.vertices[i],R=this.vertices[s],x-=r,t=0!==this._lengths[e]?x/this._lengths[e]:0;break}r+=this._lengths[e]}if(null===k||null===R)return null;if(!k)return R;if(!R)return k;b=R.controls&&R.controls.right,m=k.controls&&k.controls.left,a=R.x,d=R.y,h=(b||R).x,u=(b||R).y,l=(m||k).x,g=(m||k).y,c=k.x,p=k.y,b&&R.relative&&(h+=R.x,u+=R.y),m&&k.relative&&(l+=k.x,g+=k.y),r=P(t,a,h,l,c),f=P(t,d,u,g,p);const A=_(a,h,t),S=_(d,u,t),M=_(h,l,t),E=_(u,g,t),O=_(l,c,t),C=_(g,p,t),F=_(A,M,t),L=_(S,E,t),j=_(M,O,t),I=_(E,C,t);return X.isObject(e)?(e.x=r,e.y=f,e instanceof T&&(e.controls.left.x=F,e.controls.left.y=L,e.controls.right.x=j,e.controls.right.y=I,("boolean"!=typeof e.relative||e.relative)&&(e.controls.left.x-=r,e.controls.left.y-=f,e.controls.right.x-=r,e.controls.right.y-=f)),e.t=t,e):(n=new T(r,f,F-r,L-f,j-r,I-f,this._curved?o.curve:o.line),n.t=t,n)}plot(){if(this.curved)return B(this._collection,this.closed),this;for(let t=0;t<this._collection.length;t++)this._collection[t].command=0===t?o.move:o.line;return this}subdivide(t){this._update();const e=this.vertices.length-1,i=this._closed||this.vertices[e]._command===o.close;let s,n=this.vertices[e],r=[];return X.each(this.vertices,(function(a,h){if(h<=0&&!i)n=a;else{if(a.command===o.move)return r.push(new T(n.x,n.y)),h>0&&(r[r.length-1].command=o.line),void(n=a);s=Ft(a,n,t),r=r.concat(s),X.each(s,(function(t,e){e<=0&&n.command===o.move?t.command=o.move:t.command=o.line})),h>=e&&(this._closed&&this._automatic?(n=a,s=Ft(a,n,t),r=r.concat(s),X.each(s,(function(t,e){e<=0&&n.command===o.move?t.command=o.move:t.command=o.line}))):i&&r.push(new T(a.x,a.y)),r[r.length-1].command=i?o.close:o.line),n=a}}),this),this._automatic=!1,this._curved=!1,this.vertices=r,this}_updateLength(t,e){e||this._update();const i=this.vertices.length-1;let s=this.vertices[i],n=0;return void 0===this._lengths&&(this._lengths=[]),X.each(this.vertices,(function(e,i){if(i<=0||e.command===o.move)return s=e,void(this._lengths[i]=0);this._lengths[i]=Ct(e,s,t),n+=this._lengths[i],s=e}),this),this._length=n,this._flagLength=!1,this}_update(){if(this._flagVertices){this._automatic&&this.plot(),this._flagLength&&this._updateLength(void 0,!0);const t=this._collection.length,e=this._closed,i=Math.min(this._beginning,this._ending),s=Math.max(this._beginning,this._ending),n=Ot(this,i*this._length),r=Ot(this,s*this._length),a=ae(n),h=he(r);let l,c,f,d,u,g;for(this._renderer.vertices.length=0,g=0;g<t;g++)this._renderer.collection.length<=g&&this._renderer.collection.push(new T),g>h&&!c?(u=this._renderer.collection[g].copy(this._collection[g]),this.getPointAt(s,u),u.command=this._renderer.collection[g].command,this._renderer.vertices.push(u),c=u,f=this._collection[g-1],f&&f.controls&&(u.relative?u.controls.right.clear():u.controls.right.copy(u),f.relative?this._renderer.collection[g-1].controls.right.copy(f.controls.right).lerp(S.zero,1-u.t):this._renderer.collection[g-1].controls.right.copy(f.controls.right).lerp(f,1-u.t))):g>=a&&g<=h&&(u=this._renderer.collection[g].copy(this._collection[g]),this._renderer.vertices.push(u),g===h&&Et(this,s)?(c=u,!e&&c.controls&&(c.relative?c.controls.right.clear():c.controls.right.copy(c))):g===a&&Et(this,i)&&(l=u,l.command=o.move,!e&&l.controls&&(l.relative?l.controls.left.clear():l.controls.left.copy(l))));a>0&&!l&&(g=a-1,u=this._renderer.collection[g].copy(this._collection[g]),this.getPointAt(i,u),u.command=o.move,this._renderer.vertices.unshift(u),d=this._collection[g+1],d&&d.controls&&(u.controls.left.clear(),d.relative?this._renderer.collection[g+1].controls.left.copy(d.controls.left).lerp(S.zero,u.t):(oe.copy(d),this._renderer.collection[g+1].controls.left.copy(d.controls.left).lerp(d,u.t))))}return tt.prototype._update.apply(this,arguments),this}flagReset(){return this._flagVertices=this._flagLength=this._flagFill=this._flagStroke=this._flagLinewidth=this._flagOpacity=this._flagVisible=this._flagCap=this._flagJoin=this._flagMiter=this._flagClip=!1,tt.prototype.flagReset.call(this),this}},ce=le;h(ce,"Properties",["fill","stroke","linewidth","opacity","visible","cap","join","miter","closed","curved","automatic","beginning","ending"]),h(ce,"Utils",{getCurveLength:Ct});var fe={linewidth:{enumerable:!0,get:function(){return this._linewidth},set:function(t){this._linewidth=t,this._flagLinewidth=!0}},opacity:{enumerable:!0,get:function(){return this._opacity},set:function(t){this._opacity=t,this._flagOpacity=!0}},visible:{enumerable:!0,get:function(){return this._visible},set:function(t){this._visible=t,this._flagVisible=!0}},cap:{enumerable:!0,get:function(){return this._cap},set:function(t){this._cap=t,this._flagCap=!0}},join:{enumerable:!0,get:function(){return this._join},set:function(t){this._join=t,this._flagJoin=!0}},miter:{enumerable:!0,get:function(){return this._miter},set:function(t){this._miter=t,this._flagMiter=!0}},fill:{enumerable:!0,get:function(){return this._fill},set:function(t){(this._fill instanceof zt||this._fill instanceof Wt||this._fill instanceof Ut||this._fill instanceof te)&&this._fill.unbind(k.Types.change,this._renderer.flagFill),this._fill=t,this._flagFill=!0,(this._fill instanceof zt||this._fill instanceof Wt||this._fill instanceof Ut||this._fill instanceof te)&&this._fill.bind(k.Types.change,this._renderer.flagFill)}},stroke:{enumerable:!0,get:function(){return this._stroke},set:function(t){(this._stroke instanceof zt||this._stroke instanceof Wt||this._stroke instanceof Ut||this._stroke instanceof te)&&this._stroke.unbind(k.Types.change,this._renderer.flagStroke),this._stroke=t,this._flagStroke=!0,(this._stroke instanceof zt||this._stroke instanceof Wt||this._stroke instanceof Ut||this._stroke instanceof te)&&this._stroke.bind(k.Types.change,this._renderer.flagStroke)}},length:{get:function(){return this._flagLength&&this._updateLength(),this._length}},closed:{enumerable:!0,get:function(){return this._closed},set:function(t){this._closed=!!t,this._flagVertices=!0}},curved:{enumerable:!0,get:function(){return this._curved},set:function(t){this._curved=!!t,this._flagVertices=!0}},automatic:{enumerable:!0,get:function(){return this._automatic},set:function(t){if(t===this._automatic)return;this._automatic=!!t;const e=this._automatic?"ignore":"listen";X.each(this.vertices,(function(t){t[e]()}))}},beginning:{enumerable:!0,get:function(){return this._beginning},set:function(t){this._beginning=t,this._flagVertices=!0}},ending:{enumerable:!0,get:function(){return this._ending},set:function(t){this._ending=t,this._flagVertices=!0}},vertices:{enumerable:!0,get:function(){return this._collection},set:function(t){const e=this._renderer.bindVertices,i=this._renderer.unbindVertices;this._collection&&this._collection.unbind(k.Types.insert,e).unbind(k.Types.remove,i),this._collection=t instanceof st?t:new st(t||[]),this._collection.bind(k.Types.insert,e).bind(k.Types.remove,i),e(this._collection)}},mask:{enumerable:!0,get:function(){return this._mask},set:function(t){this._mask=t,this._flagMask=!0,X.isObject(t)&&!t.clip&&(t.clip=!0)}},clip:{enumerable:!0,get:function(){return this._clip},set:function(t){this._clip=t,this._flagClip=!0}},dashes:{enumerable:!0,get:function(){return this._dashes},set:function(t){"number"!=typeof t.offset&&(t.offset=this.dashes&&this._dashes.offset||0),this._dashes=t}}};function de(){this._flagVertices=!0,this._flagLength=!0,this.parent&&(this.parent._flagLength=!0)}function ue(t){let e=t.length;for(;e--;)t[e].bind(k.Types.change,this._renderer.flagVertices);this._renderer.flagVertices()}function ge(t){let e=t.length;for(;e--;)t[e].unbind(k.Types.change,this._renderer.flagVertices);this._renderer.flagVertices()}function _e(){this._flagFill=!0}function pe(){this._flagStroke=!0}var me=class extends ce{constructor(t,e,i,s){super([new T,new T,new T,new T],!0,!1,!0),h(this,"_flagWidth",0),h(this,"_flagHeight",0),h(this,"_width",0),h(this,"_height",0),h(this,"_origin",null);for(let t in be)Object.defineProperty(this,t,be[t]);this.width="number"==typeof i?i:1,this.height="number"==typeof s?s:1,this.origin=new S,"number"==typeof t&&(this.translation.x=t),"number"==typeof e&&(this.translation.y=e),this._update()}_update(){if(this._flagVertices||this._flagWidth||this._flagHeight){const t=this._width/2,e=this._height/2;this._closed||4!==this.vertices.length||this.vertices.push(new T),this.vertices[0].set(-t,-e).sub(this._origin).command=o.move,this.vertices[1].set(t,-e).sub(this._origin).command=o.line,this.vertices[2].set(t,e).sub(this._origin).command=o.line,this.vertices[3].set(-t,e).sub(this._origin).command=o.line,this.vertices[4]&&(this.vertices[4].set(-t,-e).sub(this._origin).command=o.line)}return super._update.call(this),this}flagReset(){return this._flagWidth=this._flagHeight=!1,super.flagReset.call(this),this}clone(t){const e=new me(0,0,this.width,this.height);e.translation.copy(this.translation),e.rotation=this.rotation,e.scale=this.scale,e.skewX=this.skewX,e.skewY=this.skewY,this.matrix.manual&&e.matrix.copy(this.matrix);for(let t=0;t<ce.Properties.length;t++){const i=ce.Properties[t];e[i]=this[i]}return t&&t.add(e),e}toObject(){const t=super.toObject.call(this);return t.width=this.width,t.height=this.height,t.origin=this.origin.toObject(),t}},ye=me;h(ye,"Properties",["width","height"]);var be={width:{enumerable:!0,get:function(){return this._width},set:function(t){this._width=t,this._flagWidth=!0}},height:{enumerable:!0,get:function(){return this._height},set:function(t){this._height=t,this._flagHeight=!0}},origin:{enumerable:!0,get:function(){return this._origin},set:function(t){this._origin&&this._origin.unbind(k.Types.change,this._renderer.flagVertices),this._origin=t,this._origin.bind(k.Types.change,this._renderer.flagVertices),this._renderer.flagVertices()}}},xe=class extends ye{constructor(t,e,i,s,n,r){super(e,i,0,0),h(this,"_flagTexture",!1),h(this,"_flagColumns",!1),h(this,"_flagRows",!1),h(this,"_flagFrameRate",!1),h(this,"_flagIndex",!1),h(this,"_amount",1),h(this,"_duration",0),h(this,"_startTime",0),h(this,"_playing",!1),h(this,"_firstFrame",0),h(this,"_lastFrame",0),h(this,"_loop",!0),h(this,"_texture",null),h(this,"_columns",1),h(this,"_rows",1),h(this,"_frameRate",0),h(this,"_index",0),h(this,"_origin",null);for(let t in we)Object.defineProperty(this,t,we[t]);this.noStroke(),this.noFill(),t instanceof te?this.texture=t:"string"==typeof t&&(this.texture=new te(t)),this.origin=new S,this._update(),"number"==typeof s&&(this.columns=s),"number"==typeof n&&(this.rows=n),"number"==typeof r&&(this.frameRate=r),this.index=0}play(t,e,i){return this._playing=!0,this._firstFrame=0,this._lastFrame=this.amount-1,this._startTime=X.performance.now(),"number"==typeof t&&(this._firstFrame=t),"number"==typeof e&&(this._lastFrame=e),"function"==typeof i?this._onLastFrame=i:delete this._onLastFrame,this._index!==this._firstFrame&&(this._startTime-=1e3*Math.abs(this._index-this._firstFrame)/this._frameRate),this}pause(){return this._playing=!1,this}stop(){return this._playing=!1,this._index=0,this}clone(t){const e=new xe(this.texture,this.translation.x,this.translation.y,this.columns,this.rows,this.frameRate);return this.playing&&(e.play(this._firstFrame,this._lastFrame),e._loop=this._loop),t&&t.add(e),e}toObject(){const t=super.toObject.call(this);return t.texture=this.texture.toObject(),t.columns=this.columns,t.rows=this.rows,t.frameRate=this.frameRate,t.index=this.index,t._firstFrame=this._firstFrame,t._lastFrame=this._lastFrame,t._loop=this._loop,t}_update(){const t=this._texture,e=this._columns,i=this._rows;let s,n,r,a,h,o,l,c,f;if(t&&((this._flagColumns||this._flagRows)&&(this._amount=this._columns*this._rows),this._flagFrameRate&&(this._duration=1e3*this._amount/this._frameRate),this._flagTexture&&(this.fill=t),t.loaded)){l=t.image.width,c=t.image.height,s=l/e,n=c/i,a=this._amount,this.width!==s&&(this.width=s),this.height!==n&&(this.height=n),this._playing&&this._frameRate>0&&(X.isNaN(this._lastFrame)&&(this._lastFrame=a-1),r=X.performance.now()-this._startTime,f=this._lastFrame+1,h=1e3*(f-this._firstFrame)/this._frameRate,this._loop?r%=h:r=Math.min(r,h),o=_(this._firstFrame,f,r/h),o=Math.floor(o),o!==this._index&&(this._index=o,o>=this._lastFrame-1&&this._onLastFrame&&this._onLastFrame()));const d=-s*(this._index%e)+(l-s)/2,u=-n*Math.floor(this._index/e)+(c-n)/2;d!==t.offset.x&&(t.offset.x=d),u!==t.offset.y&&(t.offset.y=u)}return super._update.call(this),this}flagReset(){return this._flagTexture=this._flagColumns=this._flagRows=this._flagFrameRate=!1,super.flagReset.call(this),this}},ve=xe;h(ve,"Properties",["texture","columns","rows","frameRate","index"]);var we={texture:{enumerable:!0,get:function(){return this._texture},set:function(t){this._texture=t,this._flagTexture=!0}},columns:{enumerable:!0,get:function(){return this._columns},set:function(t){this._columns=t,this._flagColumns=!0}},rows:{enumerable:!0,get:function(){return this._rows},set:function(t){this._rows=t,this._flagRows=!0}},frameRate:{enumerable:!0,get:function(){return this._frameRate},set:function(t){this._frameRate=t,this._flagFrameRate=!0}},index:{enumerable:!0,get:function(){return this._index},set:function(t){this._index=t,this._flagIndex=!0}}},ke=Math.cos,Re=Math.sin,Ae=class extends ce{constructor(t,e,i,s){const n=s?Math.max(s,2):4,r=[];for(let t=0;t<n;t++)r.push(new T(0,0,0,0,0,0));super(r,!0,!0,!0),h(this,"_flagRadius",!1),h(this,"_radius",0);for(let t in Te)Object.defineProperty(this,t,Te[t]);"number"==typeof i&&(this.radius=i),this._update(),"number"==typeof t&&(this.translation.x=t),"number"==typeof e&&(this.translation.y=e)}_update(){if(this._flagVertices||this._flagRadius){let t=this.vertices.length;!this._closed&&t>2&&(t-=1);const e=4/3*Math.tan(Math.PI/(2*t)),i=this._radius,s=i*e;for(let e=0;e<this.vertices.length;e++){const n=e/t*c,r=i*ke(n),a=i*Re(n),h=s*ke(n-f),l=s*Re(n-f),d=s*ke(n+f),u=s*Re(n+f),g=this.vertices[e];g.command=0===e?o.move:o.curve,g.set(r,a),g.controls.left.set(h,l),g.controls.right.set(d,u)}}return super._update.call(this),this}flagReset(){return this._flagRadius=!1,super.flagReset.call(this),this}clone(t){const e=new Ae(0,0,this.radius,this.vertices.length);e.translation.copy(this.translation),e.rotation=this.rotation,e.scale=this.scale,e.skewX=this.skewX,e.skewY=this.skewY,this.matrix.manual&&e.matrix.copy(this.matrix);for(let t=0;t<ce.Properties.length;t++){const i=ce.Properties[t];e[i]=this[i]}return t&&t.add(e),e}toObject(){const t=super.toObject.call(this);for(let e=0;e<Ae.Properties.length;e++){const i=Ae.Properties[e];t[i]=this[i]}return t}},Se=Ae;h(Se,"Properties",["radius"]);var Te={radius:{enumerable:!0,get:function(){return this._radius},set:function(t){this._radius=t,this._flagRadius=!0}}},Me=Math.cos,Ee=Math.sin,Oe=class extends ce{constructor(t,e,i,s,n){"number"!=typeof s&&"number"==typeof i&&(s=i);const r=n?Math.max(n,2):4,a=[];for(let t=0;t<r;t++)a.push(new T);super(a,!0,!0,!0),h(this,"_flagWidth",!1),h(this,"_flagHeight",!1),h(this,"_width",0),h(this,"_height",0);for(let t in Fe)Object.defineProperty(this,t,Fe[t]);"number"==typeof i&&(this.width=2*i),"number"==typeof s&&(this.height=2*s),this._update(),"number"==typeof t&&(this.translation.x=t),"number"==typeof e&&(this.translation.y=e)}_update(){if(this._flagVertices||this._flagWidth||this._flagHeight){let t=this.vertices.length;!this._closed&&t>2&&(t-=1);const e=4/3*Math.tan(Math.PI/(2*this.vertices.length)),i=this._width/2,s=this._height/2;for(let n=0;n<this.vertices.length;n++){const r=n/t*c,a=i*Me(r),h=s*Ee(r),l=i*e*Me(r-f),d=s*e*Ee(r-f),u=i*e*Me(r+f),g=s*e*Ee(r+f),_=this.vertices[n];_.command=0===n?o.move:o.curve,_.set(a,h),_.controls.left.set(l,d),_.controls.right.set(u,g)}}return super._update.call(this),this}flagReset(){return this._flagWidth=this._flagHeight=!1,super.flagReset.call(this),this}clone(t){const e=this.width/2,i=this.height/2,s=this.vertices.length,n=new Oe(0,0,e,i,s);n.translation.copy(this.translation),n.rotation=this.rotation,n.scale=this.scale,n.skewX=this.skewX,n.skewY=this.skewY,this.matrix.manual&&n.matrix.copy(this.matrix);for(let t=0;t<ce.Properties.length;t++){const e=ce.Properties[t];n[e]=this[e]}return t&&t.add(n),n}toObject(){const t=super.toObject.call(this);for(let e=0;e<Oe.Properties.length;e++){const i=Oe.Properties[e];t[i]=this[i]}return t}},Ce=Oe;h(Ce,"Properties",["width","height"]);var Fe={width:{enumerable:!0,get:function(){return this._width},set:function(t){this._width=t,this._flagWidth=!0}},height:{enumerable:!0,get:function(){return this._height},set:function(t){this._height=t,this._flagHeight=!0}}},Pe=class extends ce{constructor(t,e,i,s){super([new T(t,e),new T(i,s)]);for(let t in Le)Object.defineProperty(this,t,Le[t]);this.vertices[0].command=o.move,this.vertices[1].command=o.line,this.automatic=!1}},Le={left:{enumerable:!0,get:function(){return this.vertices[0]},set:function(t){if(X.isObject(t))this.vertices.splice(0,1,t);else{const t=new Tt("Two.Line.x argument is not an object.");console.warn(t.name,t.message)}}},right:{enumerable:!0,get:function(){return this.vertices[0]},set:function(t){if(X.isObject(t))this.vertices.splice(1,1,t);else{const t=new Tt("Two.Line.y argument is not an object.");console.warn(t.name,t.message)}}}},je=class extends ce{constructor(t,e,i,s,n){void 0===n&&"number"==typeof i&&"number"==typeof s&&(n=Math.floor(Math.min(i,s)/12));const r=[];for(let t=0;t<10;t++)r.push(new T(0,0,0,0,0,0,0===t?o.move:o.curve));super(r),h(this,"_flagWidth",!1),h(this,"_flagHeight",!1),h(this,"_flagRadius",!1),h(this,"_width",0),h(this,"_height",0),h(this,"_radius",12);for(let t in ze)Object.defineProperty(this,t,ze[t]);this.closed=!0,this.automatic=!1,this._renderer.flagRadius=Be.bind(this),"number"==typeof i&&(this.width=i),"number"==typeof s&&(this.height=s),"number"==typeof n&&(this.radius=n),this._update(),"number"==typeof t&&(this.translation.x=t),"number"==typeof e&&(this.translation.y=e)}_update(){if(this._flagVertices||this._flagWidth||this._flagHeight||this._flagRadius){const t=this._width,e=this._height;let i,s,n;this._radius instanceof S?(i=this._radius.x,s=this._radius.y):(i=this._radius,s=this._radius);let r=t/2,a=e/2;n=this.vertices[0],n.x=-(r-i),n.y=-a,n=this.vertices[1],n.x=r-i,n.y=-a,n.controls.left.clear(),n.controls.right.x=i,n.controls.right.y=0,n=this.vertices[2],n.x=r,n.y=-(a-s),n.controls.right.clear(),n.controls.left.clear(),n=this.vertices[3],n.x=r,n.y=a-s,n.controls.left.clear(),n.controls.right.x=0,n.controls.right.y=s,n=this.vertices[4],n.x=r-i,n.y=a,n.controls.right.clear(),n.controls.left.clear(),n=this.vertices[5],n.x=-(r-i),n.y=a,n.controls.left.clear(),n.controls.right.x=-i,n.controls.right.y=0,n=this.vertices[6],n.x=-r,n.y=a-s,n.controls.left.clear(),n.controls.right.clear(),n=this.vertices[7],n.x=-r,n.y=-(a-s),n.controls.left.clear(),n.controls.right.x=0,n.controls.right.y=-s,n=this.vertices[8],n.x=-(r-i),n.y=-a,n.controls.left.clear(),n.controls.right.clear(),n=this.vertices[9],n.copy(this.vertices[8])}return super._update.call(this),this}flagReset(){return this._flagWidth=this._flagHeight=this._flagRadius=!1,super.flagReset.call(this),this}clone(t){const e=this.width,i=this.height,s=this.radius,n=new je(0,0,e,i,s);n.translation.copy(this.translation),n.rotation=this.rotation,n.scale=this.scale,n.skewX=this.skewX,n.skewY=this.skewY,this.matrix.manual&&n.matrix.copy(this.matrix);for(let t=0;t<ce.Properties.length;t++){const e=ce.Properties[t];n[e]=this[e]}return t&&t.add(n),n}toObject(){const t=super.toObject.call(this);for(let e=0;e<je.Properties.length;e++){const i=je.Properties[e];t[i]=this[i]}return t.radius="number"==typeof this.radius?this.radius:this.radius.toObject(),t}},Ie=je;h(Ie,"Properties",["width","height","radius"]);var ze={width:{enumerable:!0,get:function(){return this._width},set:function(t){this._width=t,this._flagWidth=!0}},height:{enumerable:!0,get:function(){return this._height},set:function(t){this._height=t,this._flagHeight=!0}},radius:{enumerable:!0,get:function(){return this._radius},set:function(t){this._radius instanceof S&&this._radius.unbind(k.Types.change,this._renderer.flagRadius),this._radius=t,this._radius instanceof S&&this._radius.bind(k.Types.change,this._renderer.flagRadius),this._flagRadius=!0}}};function Be(){this._flagRadius=!0}var Ne=Math.min,De=Math.max,Ge=class extends tt{constructor(t,e,i,s){super(),h(this,"_flagValue",!0),h(this,"_flagFamily",!0),h(this,"_flagSize",!0),h(this,"_flagLeading",!0),h(this,"_flagAlignment",!0),h(this,"_flagBaseline",!0),h(this,"_flagStyle",!0),h(this,"_flagWeight",!0),h(this,"_flagDecoration",!0),h(this,"_flagFill",!0),h(this,"_flagStroke",!0),h(this,"_flagLinewidth",!0),h(this,"_flagOpacity",!0),h(this,"_flagVisible",!0),h(this,"_flagMask",!1),h(this,"_flagClip",!1),h(this,"_value",""),h(this,"_family","sans-serif"),h(this,"_size",13),h(this,"_leading",17),h(this,"_alignment","center"),h(this,"_baseline","middle"),h(this,"_style","normal"),h(this,"_weight",500),h(this,"_decoration","none"),h(this,"_fill","#000"),h(this,"_stroke","transparent"),h(this,"_linewidth",1),h(this,"_opacity",1),h(this,"_visible",!0),h(this,"_mask",null),h(this,"_clip",!1),h(this,"_dashes",null);for(let t in We)Object.defineProperty(this,t,We[t]);if(this._renderer.type="text",this._renderer.flagFill=He.bind(this),this._renderer.flagStroke=Xe.bind(this),this.value=t,"number"==typeof e&&(this.translation.x=e),"number"==typeof i&&(this.translation.y=i),this.dashes=[],this.dashes.offset=0,!X.isObject(s))return this;for(let t=0;t<Ge.Properties.length;t++){const e=Ge.Properties[t];e in s&&(this[e]=s[e])}}clone(t){const e=new Ge(this.value);e.translation.copy(this.translation),e.rotation=this.rotation,e.scale=this.scale;for(let t=0;t<Ge.Properties.length;t++){const i=Ge.Properties[t];e[i]=this[i]}return this.matrix.manual&&e.matrix.copy(this.matrix),t&&t.add(e),e._update()}toObject(){const t={translation:this.translation.toObject(),rotation:this.rotation,scale:this.scale};this.matrix.manual&&(t.matrix=this.matrix.toObject());for(let e=0;e<Ge.Properties.length;e++){const i=Ge.Properties[e];t[i]=this[i]}return t}noFill(){return this.fill="transparent",this}noStroke(){return this.stroke=void 0,this.linewidth=void 0,this}getBoundingClientRect(t){let e,i,s,n,r,a,h,o,l;this._update(!0),e=t?this._matrix:g(this);const c=this.leading,f=this.value.length*this.size*Ge.Ratio,d=(this._linewidth||0)/2;switch(this.alignment){case"left":a=-d,h=f+d;break;case"right":a=-(f+d),h=d;break;default:a=-(f/2+d),h=f/2+d}switch(this.baseline){case"top":o=-d,l=c+d;break;case"bottom":o=-(c+d),l=d;break;default:o=-(c/2+d),l=c/2+d}return i=e.multiply(a,o,1),s=e.multiply(a,l,1),n=e.multiply(h,o,1),r=e.multiply(h,l,1),o=Ne(i.y,s.y,n.y,r.y),a=Ne(i.x,s.x,n.x,r.x),h=De(i.x,s.x,n.x,r.x),l=De(i.y,s.y,n.y,r.y),{top:o,left:a,right:h,bottom:l,width:h-a,height:l-o}}flagReset(){return super.flagReset.call(this),this._flagValue=this._flagFamily=this._flagSize=this._flagLeading=this._flagAlignment=this._flagFill=this._flagStroke=this._flagLinewidth=this._flagOpacity=this._flagVisible=this._flagClip=this._flagDecoration=this._flagClassName=this._flagBaseline=this._flagWeight=this._flagStyle=!1,this}},Ve=Ge;h(Ve,"Ratio",.6),h(Ve,"Properties",["value","family","size","leading","alignment","linewidth","style","weight","decoration","baseline","opacity","visible","fill","stroke"]);var We={value:{enumerable:!0,get:function(){return this._value},set:function(t){this._value=t,this._flagValue=!0}},family:{enumerable:!0,get:function(){return this._family},set:function(t){this._family=t,this._flagFamily=!0}},size:{enumerable:!0,get:function(){return this._size},set:function(t){this._size=t,this._flagSize=!0}},leading:{enumerable:!0,get:function(){return this._leading},set:function(t){this._leading=t,this._flagLeading=!0}},alignment:{enumerable:!0,get:function(){return this._alignment},set:function(t){this._alignment=t,this._flagAlignment=!0}},linewidth:{enumerable:!0,get:function(){return this._linewidth},set:function(t){this._linewidth=t,this._flagLinewidth=!0}},style:{enumerable:!0,get:function(){return this._style},set:function(t){this._style=t,this._flagStyle=!0}},weight:{enumerable:!0,get:function(){return this._weight},set:function(t){this._weight=t,this._flagWeight=!0}},decoration:{enumerable:!0,get:function(){return this._decoration},set:function(t){this._decoration=t,this._flagDecoration=!0}},baseline:{enumerable:!0,get:function(){return this._baseline},set:function(t){this._baseline=t,this._flagBaseline=!0}},opacity:{enumerable:!0,get:function(){return this._opacity},set:function(t){this._opacity=t,this._flagOpacity=!0}},visible:{enumerable:!0,get:function(){return this._visible},set:function(t){this._visible=t,this._flagVisible=!0}},fill:{enumerable:!0,get:function(){return this._fill},set:function(t){(this._fill instanceof zt||this._fill instanceof Wt||this._fill instanceof Ut||this._fill instanceof te)&&this._fill.unbind(k.Types.change,this._renderer.flagFill),this._fill=t,this._flagFill=!0,(this._fill instanceof zt||this._fill instanceof Wt||this._fill instanceof Ut||this._fill instanceof te)&&this._fill.bind(k.Types.change,this._renderer.flagFill)}},stroke:{enumerable:!0,get:function(){return this._stroke},set:function(t){(this._stroke instanceof zt||this._stroke instanceof Wt||this._stroke instanceof Ut||this._stroke instanceof te)&&this._stroke.unbind(k.Types.change,this._renderer.flagStroke),this._stroke=t,this._flagStroke=!0,(this._stroke instanceof zt||this._stroke instanceof Wt||this._stroke instanceof Ut||this._stroke instanceof te)&&this._stroke.bind(k.Types.change,this._renderer.flagStroke)}},mask:{enumerable:!0,get:function(){return this._mask},set:function(t){this._mask=t,this._flagMask=!0,X.isObject(t)&&!t.clip&&(t.clip=!0)}},clip:{enumerable:!0,get:function(){return this._clip},set:function(t){this._clip=t,this._flagClip=!0}},dashes:{enumerable:!0,get:function(){return this._dashes},set:function(t){"number"!=typeof t.offset&&(t.offset=this.dashes&&this._dashes.offset||0),this._dashes=t}}};function He(){this._flagFill=!0}function Xe(){this._flagStroke=!0}var Ye={path:/[+-]?(?:\d*\.\d+|\d+)(?:[eE][+-]\d+)?/g,cssBackgroundImage:/url\(['"]?#([\w\d-_]*)['"]?\)/i,unitSuffix:/[a-zA-Z%]*/i},Ue={start:"left",middle:"center",end:"right"},qe=["id","class","transform","xmlns","viewBox"],Ke=["x","y","width","height","href","xlink:href"];function Je(t){return t.replace(/svg:/gi,"").toLowerCase()}function $e(t,e){if(e.x+=t.translateX,e.y+=t.translateY,e.x*=t.scaleX,e.y*=t.scaleY,0!==t.rotation){const i=e.length();e.x=i*Math.cos(t.rotation),e.y=i*Math.sin(t.rotation)}}function Ze(t,e){e||(e={});const i=t.split(";");for(let t=0;t<i.length;t++){const s=i[t].split(":"),n=s[0],r=s[1];void 0!==n&&void 0!==r&&(e[n]=r.replace(/\s/,""))}return e}function Qe(t){const e={},i=function(t){const e=t.getAttributeNames();for(let t=0;t<qe.length;t++){const i=qe[t],s=Array.prototype.indexOf.call(e,i);s>=0&&e.splice(s,1)}return e}(t),s=Math.max(i.length,t.style.length);for(let n=0;n<s;n++){const s=t.style[n],r=i[n];s&&(e[s]=t.style[s]),r&&(e[r]=t.getAttribute(r))}return e}function ti(t,e,i){const n={},r={},a={};let h,o,l,c,f,u,g,_,p,m,y,b,x,v,w,k,R;if(s.getComputedStyle){const e=s.getComputedStyle(t);for(h=e.length;h--;)l=e[h],c=e[l],void 0!==c&&(n[l]=c)}for(h=0;h<t.attributes.length;h++)u=t.attributes[h],/style/i.test(u.nodeName)?Ze(u.value,a):r[u.nodeName]=u.value;for(l in void 0!==n.opacity&&(n["stroke-opacity"]=n.opacity,n["fill-opacity"]=n.opacity,delete n.opacity),i&&X.defaults(n,i),X.extend(n,a,r),n.visible=!(void 0===n.display&&/none/i.test(n.display))||void 0===n.visibility&&/hidden/i.test(n.visibility),n)switch(c=n[l],l){case"gradientTransform":if(/none/i.test(c))break;if(o=t.gradientTransform&&t.gradientTransform.baseVal&&t.gradientTransform.baseVal.length>0?t.gradientTransform.baseVal[0].matrix:t.getCTM?t.getCTM():null,null===o)break;switch(g=d(o),e._renderer.type){case"linear-gradient":$e(g,e.left),$e(g,e.right);break;case"radial-gradient":e.center.x+=g.translateX,e.center.y+=g.translateY,e.focal.x+=g.translateX,e.focal.y+=g.translateY,e.radius*=Math.max(g.scaleX,g.scaleY)}break;case"transform":if(/none/i.test(c))break;if(o=t.transform&&t.transform.baseVal&&t.transform.baseVal.length>0?t.transform.baseVal[0].matrix:t.getCTM?t.getCTM():null,null===o)break;g=d(o),e.translation.set(g.translateX,g.translateY),e.rotation=Math.PI*(g.rotation/180),e.scale=new S(g.scaleX,g.scaleY),_=parseFloat((n.x+"").replace("px")),p=parseFloat((n.y+"").replace("px")),_&&(e.translation.x=_),p&&(e.translation.y=p);break;case"visible":if(e instanceof ot){e._visible=c;break}e.visible=c;break;case"stroke-linecap":if(e instanceof ot){e._cap=c;break}e.cap=c;break;case"stroke-linejoin":if(e instanceof ot){e._join=c;break}e.join=c;break;case"stroke-miterlimit":if(e instanceof ot){e._miter=c;break}e.miter=c;break;case"stroke-width":if(e instanceof ot){e._linewidth=parseFloat(c);break}e.linewidth=parseFloat(c);break;case"opacity":case"stroke-opacity":case"fill-opacity":if(e instanceof ot){e._opacity=parseFloat(c);break}e.opacity=parseFloat(c);break;case"clip-path":if(Ye.cssBackgroundImage.test(c)&&(m=c.replace(Ye.cssBackgroundImage,"$1"),si.defs.current&&si.defs.current.contains(m)&&(b=si.defs.current.get(m),b&&b.childNodes.length>0)))switch(b=b.childNodes[0],x=Je(b.nodeName),e.mask=si[x].call(this,b,{}),e._renderer.type){case"text":case"path":e.position.add(e.mask.position),e.mask.position.clear()}break;case"fill":case"stroke":f=(e instanceof ot?"_":"")+l,Ye.cssBackgroundImage.test(c)?(m=c.replace(Ye.cssBackgroundImage,"$1"),si.defs.current&&si.defs.current.contains(m)?(b=si.defs.current.get(m),b.object||(x=Je(b.nodeName),b.object=si[x].call(this,b,{})),b=b.object):(y=ii(this),b=y.getById(m)),e[f]=b):e[f]=/none/i.test(c)?"transparent":c;break;case"id":e.id=c;break;case"class":case"className":e.classList=c.split(" "),e._flagClassName=!0;break;case"x":case"y":if(v=e instanceof zt,w=e instanceof Wt,k=e instanceof Ut,v||w||k)break;c.match("[a-z%]$")&&!c.endsWith("px")&&(R=new Tt("only pixel values are supported with the "+l+" attribute."),console.warn(R.name,R.message)),e.translation[l]=parseFloat(c);break;case"font-family":e instanceof Ve&&(e.family=c);break;case"font-size":e instanceof Ve&&(e.size=c);break;case"font-weight":e instanceof Ve&&(e.weight=c);break;case"font-style":e instanceof Ve&&(e.style=c);break;case"text-decoration":e instanceof Ve&&(e.decoration=c);break;case"line-height":e instanceof Ve&&(e.leading=c)}return Object.keys(t.dataset).length&&(e.dataset=t.dataset),n}function ei(t,e){for(let i=0,s=t.childNodes.length;i<s;i++){const s=t.childNodes[i];s.id&&("#text"!==Je(t.nodeName)&&e.add(s.id,s))}}function ii(t){for(;t.parent;)t=t.parent;return t.scene}var si={svg:function(t){const e=si.defs.current=new Mt,i=t.getElementsByTagName("defs");for(let t=0;t<i.length;t++)ei(i[t],e);const s=si.g.call(this,t),n=t.getAttribute("viewBox"),r=t.getAttribute("x"),a=t.getAttribute("y"),h=t.getAttribute("width"),o=t.getAttribute("height");s.defs=e;const l=null!==n,c=null!==a,f=null!==h,d=null!==o;return null!==r&&(s.x=parseFloat(r.replace(Ye.unitSuffix,""))),c&&(s.y=parseFloat(a.replace(Ye.unitSuffix,""))),f&&(s.width=parseFloat(h.replace(Ye.unitSuffix,""))),d&&(s.height=parseFloat(o.replace(Ye.unitSuffix,""))),l&&function(t,e){const i=e.split(/[\s,]/),s=-parseFloat(i[0]),n=-parseFloat(i[1]),r=parseFloat(i[2]),a=parseFloat(i[3]);if(s&&n)for(let e=0;e<t.children.length;e++){const i=t.children[e];"translation"in i?i.translation.add(s,n):"x"in i?i.x=s:"y"in i&&(i.y=n)}const h="number"==typeof t.x,o="number"==typeof t.y,l="number"==typeof t.width,c="number"==typeof t.height;h&&(t.translation.x+=t.x),o&&(t.translation.y+=t.y),(l||c)&&(t.scale=new S(1,1)),l&&(t.scale.x=t.width/r),c&&(t.scale.y=t.height/a),t.mask=new ye(0,0,r,a),t.mask.origin.set(-r/2,-a/2)}(s,n),delete si.defs.current,s},defs:function(t){return null},use:function(t,e){let i;const s=t.getAttribute("href")||t.getAttribute("xlink:href");if(!s)return i=new Tt("encountered <use /> with no href."),console.warn(i.name,i.message),null;const n=s.slice(1);if(!si.defs.current.contains(n))return i=new Tt("unable to find element for reference "+s+"."),console.warn(i.name,i.message),null;const r=si.defs.current.get(n).cloneNode(!0);for(let e=0;e<t.attributes.length;e++){const i=t.attributes[e],s=Ke.includes(i.nodeName),n=!r.hasAttribute(i.nodeName);(s||n)&&r.setAttribute(i.nodeName,i.value)}const a=Je(r.nodeName);return si[a].call(this,r,e)},g:function(t,e){const i=new ot;ti.call(this,t,i,e),this.add(i);const s=Qe.call(this,t);for(let e=0,n=t.childNodes.length;e<n;e++){const n=t.childNodes[e],r=n.nodeName;if(!r)return;const a=Je(r);if(a in si){const t=si[a].call(i,n,s);t&&!t.parent&&i.add(t)}}return i},polygon:function(t,e){let i;i="string"==typeof t?t:t.getAttribute("points");const s=[];i.replace(/(-?[\d.eE-]+)[,|\s](-?[\d.eE-]+)/g,(function(t,e,i){s.push(new T(parseFloat(e),parseFloat(i)))}));const n=new ce(s,!0).noStroke();return n.fill="black",ti.call(this,t,n,e),n},polyline:function(t,e){const i=si.polygon.call(this,t,e);return i.closed=!1,i},path:function(t,e){let i;i="string"==typeof t?t:t.getAttribute("d");let s=[],n=!1,r=!1;if(i){let t,e,a=new T,h=i.match(/[a-df-z][^a-df-z]*/gi);const l=h.length-1;X.each(h.slice(0),(function(t,e){const i=t.slice(1).trim().match(Ye.path),s=t[0],n=s.toLowerCase();let r,a,o,l,c;const f=[];switch(0===e&&(h=[]),n){case"h":case"v":i.length>1&&(r=1);break;case"m":case"l":case"t":i.length>2&&(r=2);break;case"s":case"q":i.length>4&&(r=4);break;case"c":i.length>6&&(r=6);break;case"a":i.length>7&&(r=7)}if(r){for(a=0,o=i.length,c=0;a<o;a+=r){if(l=s,c>0)switch(s){case"m":l="l";break;case"M":l="L"}f.push(l+i.slice(a,a+r).join(" ")),c++}h=Array.prototype.concat.apply(h,f)}else h.push(t)})),X.each(h,(function(i,h){let c,f,d;const u=i[0],g=u.toLowerCase();let _,p,m,y,b,x,v,w,k,R,A,M,E,O,C,F,P;switch(e=i.slice(1).trim().match(Ye.path),r=u===g,g){case"z":if(h>=l)n=!0;else{f=a.x,d=a.y,c=new T(f,d,void 0,void 0,void 0,void 0,o.close);for(let t=s.length-1;t>=0;t--){const e=s[t];if(/m/i.test(e.command)){a=e;break}}}break;case"m":case"l":t=void 0,f=parseFloat(e[0]),d=parseFloat(e[1]),c=new T(f,d,void 0,void 0,void 0,void 0,/m/i.test(g)?o.move:o.line),r&&c.addSelf(a),a=c;break;case"h":case"v":R=/h/i.test(g)?"x":"y",A=/x/i.test(R)?"y":"x",c=new T(void 0,void 0,void 0,void 0,void 0,void 0,o.line),c[R]=parseFloat(e[0]),c[A]=a[A],r&&(c[R]+=a[R]),a=c;break;case"c":case"s":_=a.x,p=a.y,t||(t=new S),/c/i.test(g)?(m=parseFloat(e[0]),y=parseFloat(e[1]),b=parseFloat(e[2]),x=parseFloat(e[3]),v=parseFloat(e[4]),w=parseFloat(e[5])):(k=D(a,t,r),m=k.x,y=k.y,b=parseFloat(e[0]),x=parseFloat(e[1]),v=parseFloat(e[2]),w=parseFloat(e[3])),r&&(m+=_,y+=p,b+=_,x+=p,v+=_,w+=p),a.controls.right.set(m-a.x,y-a.y),c=new T(v,w,b-v,x-w,void 0,void 0,o.curve),a=c,t=c.controls.left;break;case"t":case"q":_=a.x,p=a.y,t||(t=new S),/q/i.test(g)?(m=parseFloat(e[0]),y=parseFloat(e[1]),b=parseFloat(e[0]),x=parseFloat(e[1]),v=parseFloat(e[2]),w=parseFloat(e[3])):(k=D(a,t,r),m=k.x,y=k.y,b=k.x,x=k.y,v=parseFloat(e[0]),w=parseFloat(e[1])),r&&(m+=_,y+=p,b+=_,x+=p,v+=_,w+=p),a.controls.right.set(.33*(m-a.x),.33*(y-a.y)),c=new T(v,w,b-v,x-w,void 0,void 0,o.curve),a=c,t=c.controls.left;break;case"a":_=a.x,p=a.y,E=parseFloat(e[0]),O=parseFloat(e[1]),C=parseFloat(e[2]),F=parseFloat(e[3]),P=parseFloat(e[4]),v=parseFloat(e[5]),w=parseFloat(e[6]),r&&(v+=_,w+=p),M=new T(v,w),M.command=o.arc,M.rx=E,M.ry=O,M.xAxisRotation=C,M.largeArcFlag=F,M.sweepFlag=P,c=M,a=M,t=void 0}c&&(Array.isArray(c)?s=s.concat(c):s.push(c))}))}i=new ce(s,n,void 0,!0).noStroke(),i.fill="black";const a=i.getBoundingClientRect(!0);return a.centroid={x:a.left+a.width/2,y:a.top+a.height/2},X.each(i.vertices,(function(t){t.subSelf(a.centroid)})),ti.call(this,t,i,e),i.translation.addSelf(a.centroid),i},circle:function(t,e){const i=parseFloat(t.getAttribute("cx")),s=parseFloat(t.getAttribute("cy")),n=parseFloat(t.getAttribute("r")),r=new Se(0,0,n).noStroke();return r.fill="black",ti.call(this,t,r,e),r.translation.x=i,r.translation.y=s,r},ellipse:function(t,e){const i=parseFloat(t.getAttribute("cx")),s=parseFloat(t.getAttribute("cy")),n=parseFloat(t.getAttribute("rx")),r=parseFloat(t.getAttribute("ry")),a=new Ce(0,0,n,r).noStroke();return a.fill="black",ti.call(this,t,a,e),a.translation.x=i,a.translation.y=s,a},rect:function(t,e){const i=parseFloat(t.getAttribute("rx")),s=parseFloat(t.getAttribute("ry"));if(!X.isNaN(i)||!X.isNaN(s))return si["rounded-rect"](t);const n=parseFloat(t.getAttribute("width")),r=parseFloat(t.getAttribute("height")),a=n/2,h=r/2,o=new ye(0,0,n,r).noStroke();return o.fill="black",ti.call(this,t,o,e),o.translation.x+=a,o.translation.y+=h,o},"rounded-rect":function(t,e){const i=parseFloat(t.getAttribute("rx"))||0,s=parseFloat(t.getAttribute("ry"))||0,n=parseFloat(t.getAttribute("width")),r=parseFloat(t.getAttribute("height")),a=n/2,h=r/2,o=new S(i,s),l=new Ie(0,0,n,r,o).noStroke();return l.fill="black",ti.call(this,t,l,e),l.translation.x+=a,l.translation.y+=h,l},line:function(t,e){const i=parseFloat(t.getAttribute("x1")),s=parseFloat(t.getAttribute("y1")),n=parseFloat(t.getAttribute("x2")),r=parseFloat(t.getAttribute("y2")),a=new Pe(i,s,n,r).noFill();return ti.call(this,t,a,e),a},lineargradient:function(t,e){let i=t.getAttribute("gradientUnits"),s=t.getAttribute("spreadMethod");i||(i="objectBoundingBox"),s||(s="pad");let n=parseFloat(t.getAttribute("x1")||0),r=parseFloat(t.getAttribute("y1")||0),a=parseFloat(t.getAttribute("x2")||0),h=parseFloat(t.getAttribute("y2")||0);const o=(a+n)/2,l=(h+r)/2;/userSpaceOnUse/i.test(i)&&(n-=o,r-=l,a-=o,h-=l);const c=[];for(let e=0;e<t.children.length;e++){const i=t.children[e];let s=i.getAttribute("offset");/%/gi.test(s)&&(s=parseFloat(s.replace(/%/gi,""))/100),s=parseFloat(s);let n,r=i.getAttribute("stop-color"),a=i.getAttribute("stop-opacity"),h=i.getAttribute("style");null===r&&(n=!!h&&h.match(/stop-color:\s?([#a-fA-F0-9]*)/),r=n&&n.length>1?n[1]:void 0),null===a?(n=!!h&&h.match(/stop-opacity:\s?([0-9.-]*)/),a=n&&n.length>1?parseFloat(n[1]):1):a=parseFloat(a),c.push(new Lt(s,r,a))}const f=new Wt(n,r,a,h,c);return f.spread=s,f.units=i,ti.call(this,t,f,e),f},radialgradient:function(t,e){let i=t.getAttribute("gradientUnits"),s=t.getAttribute("spreadMethod");i||(i="objectBoundingBox"),s||(s="pad");let n=parseFloat(t.getAttribute("cx"))||0,r=parseFloat(t.getAttribute("cy"))||0,a=parseFloat(t.getAttribute("r")),h=parseFloat(t.getAttribute("fx")),o=parseFloat(t.getAttribute("fy"));X.isNaN(h)&&(h=n),X.isNaN(o)&&(o=r);const l=Math.abs(n+h)/2,c=Math.abs(r+o)/2;/userSpaceOnUse/i.test(i)&&(n-=l,r-=c,h-=l,o-=c);const f=[];for(let e=0;e<t.children.length;e++){const i=t.children[e];let s=i.getAttribute("offset");/%/gi.test(s)&&(s=parseFloat(s.replace(/%/gi,""))/100),s=parseFloat(s);let n,r=i.getAttribute("stop-color"),a=i.getAttribute("stop-opacity"),h=i.getAttribute("style");null===r&&(n=!!h&&h.match(/stop-color:\s?([#a-fA-F0-9]*)/),r=n&&n.length>1?n[1]:void 0),null===a?(n=!!h&&h.match(/stop-opacity:\s?([0-9.-]*)/),a=n&&n.length>1?parseFloat(n[1]):1):a=parseFloat(a),f.push(new Lt(s,r,a))}const d=new Ut(n,r,a,f,h,o);return d.spread=s,d.units=i,ti.call(this,t,d,e),d},text:function(t,e){const i=(s=t.getAttribute("text-anchor"),Ue[s]||"left");var s;const n=function(t){const e=t.getAttribute("dominant-baseline"),i=t.getAttribute("alignment-baseline");return e||i}(t)||"baseline",r=t.textContent,a=new Ve(r);return ti.call(this,t,a,e),a.alignment=i,a.baseline=n,a},clippath:function(t,e){return si.defs.current&&!si.defs.current.contains(t.id)&&si.defs.current.add(t.id,t),null},image:function(t,e){let i;const s=t.getAttribute("href")||t.getAttribute("xlink:href");if(!s)return i=new Tt("encountered <image /> with no href."),console.warn(i.name,i.message),null;const n=parseFloat(t.getAttribute("x"))||0,r=parseFloat(t.getAttribute("y"))||0,a=parseFloat(t.getAttribute("width")),h=parseFloat(t.getAttribute("height")),o=new ve(s,n,r);return X.isNaN(a)||(o.width=a),X.isNaN(h)||(o.height=h),ti.call(this,t,o,e),o}};function ni(t,e){const i=new XMLHttpRequest;return i.open("GET",t),i.onreadystatechange=function(){4===i.readyState&&200===i.status&&e(i.responseText)},i.send(),i}var ri=class extends ye{constructor(t,e,i,s){super(e,i,0,0),h(this,"_flagTextures",!1),h(this,"_flagFrameRate",!1),h(this,"_flagIndex",!1),h(this,"_amount",1),h(this,"_duration",0),h(this,"_index",0),h(this,"_startTime",0),h(this,"_playing",!1),h(this,"_firstFrame",0),h(this,"_lastFrame",0),h(this,"_loop",!0),h(this,"_textures",null),h(this,"_frameRate",0),h(this,"_origin",null);for(let t in hi)Object.defineProperty(this,t,hi[t]);this._renderer.flagTextures=oi.bind(this),this._renderer.bindTextures=li.bind(this),this._renderer.unbindTextures=ci.bind(this),this.noStroke(),this.noFill(),Array.isArray(t)?this.textures=t.map(fi.bind(this)):this.textures=[fi(t)],this.origin=new S,this._update(),this.frameRate="number"==typeof s?s:ri.DefaultFrameRate,this.index=0}play(t,e,i){return this._playing=!0,this._firstFrame=0,this._lastFrame=this.amount-1,this._startTime=X.performance.now(),"number"==typeof t&&(this._firstFrame=t),"number"==typeof e&&(this._lastFrame=e),"function"==typeof i?this._onLastFrame=i:delete this._onLastFrame,this._index!==this._firstFrame&&(this._startTime-=1e3*Math.abs(this._index-this._firstFrame)/this._frameRate),this}pause(){return this._playing=!1,this}stop(){return this._playing=!1,this._index=this._firstFrame,this}clone(t){const e=new ri(this.textures,this.translation.x,this.translation.y,this.frameRate);return e._loop=this._loop,this._playing&&e.play(),t&&t.add(e),e}toObject(){const t=super.toObject.call(this);return t.textures=this.textures.map((function(t){return t.toObject()})),t.frameRate=this.frameRate,t.index=this.index,t._firstFrame=this._firstFrame,t._lastFrame=this._lastFrame,t._loop=this._loop,t}_update(){const t=this._textures;let e,i,s,n,r,a,h,o;return t&&(this._flagTextures&&(this._amount=t.length),this._flagFrameRate&&(this._duration=1e3*this._amount/this._frameRate),this._playing&&this._frameRate>0?(n=this._amount,X.isNaN(this._lastFrame)&&(this._lastFrame=n-1),s=X.performance.now()-this._startTime,o=this._lastFrame+1,r=1e3*(o-this._firstFrame)/this._frameRate,this._loop?s%=r:s=Math.min(s,r),h=_(this._firstFrame,o,s/r),h=Math.floor(h),h!==this._index&&(this._index=h,a=t[this._index],a.loaded&&(e=a.image.width,i=a.image.height,this.width!==e&&(this.width=e),this.height!==i&&(this.height=i),this.fill=a,h>=this._lastFrame-1&&this._onLastFrame&&this._onLastFrame()))):!this._flagIndex&&this.fill instanceof te||(a=t[this._index],a.loaded&&(e=a.image.width,i=a.image.height,this.width!==e&&(this.width=e),this.height!==i&&(this.height=i)),this.fill=a)),super._update.call(this),this}flagReset(){return this._flagTextures=this._flagFrameRate=!1,super.flagReset.call(this),this}},ai=ri;h(ai,"Properties",["textures","frameRate","index"]),h(ai,"DefaultFrameRate",30);var hi={frameRate:{enumerable:!0,get:function(){return this._frameRate},set:function(t){this._frameRate=t,this._flagFrameRate=!0}},index:{enumerable:!0,get:function(){return this._index},set:function(t){this._index=t,this._flagIndex=!0}},textures:{enumerable:!0,get:function(){return this._textures},set:function(t){const e=this._renderer.bindTextures,i=this._renderer.unbindTextures;this._textures&&this._textures.unbind(k.Types.insert,e).unbind(k.Types.remove,i),this._textures=new st((t||[]).slice(0)),this._textures.bind(k.Types.insert,e).bind(k.Types.remove,i),e(this._textures)}}};function oi(){this._flagTextures=!0}function li(t){let e=t.length;for(;e--;)t[e].bind(k.Types.change,this._renderer.flagTextures);this._renderer.flagTextures()}function ci(t){let e=t.length;for(;e--;)t[e].unbind(k.Types.change,this._renderer.flagTextures);this._renderer.flagTextures()}function fi(t){return t instanceof te?t:"string"==typeof t?new te(t):void 0}var di=class extends ce{constructor(t,e,i,s,n,r,a){const o=a||36,l=[];for(let t=0;t<o;t++)l.push(new T);super(l,!0,!1,!0),h(this,"_flagStartAngle",!1),h(this,"_flagEndAngle",!1),h(this,"_flagInnerRadius",!1),h(this,"_flagOuterRadius",!1),h(this,"_startAngle",0),h(this,"_endAngle",c),h(this,"_innerRadius",0),h(this,"_outerRadius",0);for(let t in gi)Object.defineProperty(this,t,gi[t]);"number"==typeof i&&(this.innerRadius=i),"number"==typeof s&&(this.outerRadius=s),"number"==typeof n&&(this.startAngle=n),"number"==typeof r&&(this.endAngle=r),this._update(),"number"==typeof t&&(this.translation.x=t),"number"==typeof e&&(this.translation.y=e)}_update(){if(this._flagVertices||this._flagStartAngle||this._flagEndAngle||this._flagInnerRadius||this._flagOuterRadius){const t=this._startAngle,e=this._endAngle,i=this._innerRadius,s=this._outerRadius,n=y(t,c)===y(e,c),r=i>0,a=this.vertices;let h,l,d,u,g,_,p,m,b,x,v=r?a.length/2:a.length,w=0;for(n?v--:r||(v-=2),l=0,d=v-1;l<v;l++)u=l/d,g=a[w],_=u*(e-t)+t,p=(e-t)/v,m=s*Math.cos(_),b=s*Math.sin(_),h=0===l?o.move:o.curve,g.command=h,g.x=m,g.y=b,g.controls.left.clear(),g.controls.right.clear(),g.command===o.curve&&(x=s*p/Math.PI,g.controls.left.x=x*Math.cos(_-f),g.controls.left.y=x*Math.sin(_-f),g.controls.right.x=x*Math.cos(_+f),g.controls.right.y=x*Math.sin(_+f),1===l&&g.controls.left.multiplyScalar(2),l===d&&g.controls.right.multiplyScalar(2)),w++;if(r){for(n?(a[w].command=o.close,w++):(v--,d=v-1),l=0;l<v;l++)u=l/d,g=a[w],_=(1-u)*(e-t)+t,p=(e-t)/v,m=i*Math.cos(_),b=i*Math.sin(_),h=o.curve,l<=0&&(h=n?o.move:o.line),g.command=h,g.x=m,g.y=b,g.controls.left.clear(),g.controls.right.clear(),g.command===o.curve&&(x=i*p/Math.PI,g.controls.left.x=x*Math.cos(_+f),g.controls.left.y=x*Math.sin(_+f),g.controls.right.x=x*Math.cos(_-f),g.controls.right.y=x*Math.sin(_-f),1===l&&g.controls.left.multiplyScalar(2),l===d&&g.controls.right.multiplyScalar(2)),w++;a[w].copy(a[0]),a[w].command=o.line}else n||(a[w].command=o.line,a[w].x=0,a[w].y=0,w++,a[w].copy(a[0]),a[w].command=o.line)}return super._update.call(this),this}flagReset(){return super.flagReset.call(this),this._flagStartAngle=this._flagEndAngle=this._flagInnerRadius=this._flagOuterRadius=!1,this}clone(t){const e=this.innerRadius,i=this.outerRadius,s=this.startAngle,n=this.endAngle,r=this.vertices.length,a=new di(0,0,e,i,s,n,r);a.translation.copy(this.translation),a.rotation=this.rotation,a.scale=this.scale,a.skewX=this.skewX,a.skewY=this.skewY,this.matrix.manual&&a.matrix.copy(this.matrix);for(let t=0;t<ce.Properties.length;t++){const e=ce.Properties[t];a[e]=this[e]}return t&&t.add(a),a}toObject(){const t=super.toObject.call(this);for(let e=0;e<di.Properties.length;e++){const i=di.Properties[e];t[i]=this[i]}return t}},ui=di;h(ui,"Properties",["startAngle","endAngle","innerRadius","outerRadius"]);var gi={startAngle:{enumerable:!0,get:function(){return this._startAngle},set:function(t){this._startAngle=t,this._flagStartAngle=!0}},endAngle:{enumerable:!0,get:function(){return this._endAngle},set:function(t){this._endAngle=t,this._flagEndAngle=!0}},innerRadius:{enumerable:!0,get:function(){return this._innerRadius},set:function(t){this._innerRadius=t,this._flagInnerRadius=!0}},outerRadius:{enumerable:!0,get:function(){return this._outerRadius},set:function(t){this._outerRadius=t,this._flagOuterRadius=!0}}},_i=Math.ceil,pi=Math.floor,mi=class extends tt{constructor(t){super(),h(this,"_flagVertices",!0),h(this,"_flagLength",!0),h(this,"_flagFill",!0),h(this,"_flagStroke",!0),h(this,"_flagLinewidth",!0),h(this,"_flagOpacity",!0),h(this,"_flagVisible",!0),h(this,"_flagSize",!0),h(this,"_flagSizeAttenuation",!0),h(this,"_length",0),h(this,"_fill","#fff"),h(this,"_stroke","#000"),h(this,"_linewidth",1),h(this,"_opacity",1),h(this,"_visible",!0),h(this,"_size",1),h(this,"_sizeAttenuation",!1),h(this,"_beginning",0),h(this,"_ending",1),h(this,"_dashes",null),h(this,"noFill",ce.prototype.noFill),h(this,"noStroke",ce.prototype.noStroke),h(this,"corner",ce.prototype.corner),h(this,"center",ce.prototype.center),h(this,"getBoundingClientRect",ce.prototype.getBoundingClientRect),h(this,"_updateLength",ce.prototype._updateLength);for(let t in bi)Object.defineProperty(this,t,bi[t]);this._renderer.type="points",this._renderer.flagVertices=de.bind(this),this._renderer.bindVertices=ue.bind(this),this._renderer.unbindVertices=ge.bind(this),this._renderer.flagFill=_e.bind(this),this._renderer.flagStroke=pe.bind(this),this._renderer.vertices=null,this._renderer.collection=null,this.sizeAttenuation=!1,this.beginning=0,this.ending=1,this.fill="#fff",this.stroke="#000",this.className="",this.visible=!0,this.vertices=t,this.dashes=[],this.dashes.offset=0}clone(t){const e=new mi;for(let t=0;t<this.vertices.length;t++)e.vertices.push(this.vertices[t].clone());for(let t=0;t<mi.Properties.length;t++){const i=mi.Properties[t];e[i]=this[i]}return e.className=this.className,e.translation.copy(this.translation),e.rotation=this.rotation,e.scale=this.scale,e.skewX=this.skewX,e.skewY=this.skewY,this.matrix.manual&&e.matrix.copy(this.matrix),t&&t.add(e),e._update()}toObject(){const t={vertices:this.vertices.map((function(t){return t.toObject()}))};return X.each(mi.Properties,(function(e){t[e]=this[e]}),this),t.className=this.className,t.translation=this.translation.toObject(),t.rotation=this.rotation,t.scale=this.scale instanceof S?this.scale.toObject():this.scale,t.skewX=this.skewX,t.skewY=this.skewY,this.matrix.manual&&(t.matrix=this.matrix.toObject()),t}subdivide(t){this._update();let e=[];for(let i=0;i<this.vertices.length;i++){const s=this.vertices[i],n=this.vertices[i-1];if(!n)continue;const r=s.x,a=s.y,h=n.x,o=n.y,l=L(r,a,r,a,h,o,h,o,t);e=e.concat(l)}return this.vertices=e,this}_update(){if(this._flagVertices){this._flagLength&&this._updateLength(void 0,!0);const t=Math.min(this._beginning,this._ending),e=Math.max(this._beginning,this._ending),i=Ot(this,t*this._length),s=Ot(this,e*this._length),n=_i(i),r=pi(s);let a,h=0;this._renderer.vertices=[],this._renderer.collection=[];for(let t=0;t<this._collection.length;t++)t>=n&&t<=r&&(a=this._collection[t],this._renderer.collection.push(a),this._renderer.vertices[2*h+0]=a.x,this._renderer.vertices[2*h+1]=a.y,h++)}return super._update.apply(this,arguments),this}flagReset(){return this._flagVertices=this._flagLength=this._flagFill=this._flagStroke=this._flagLinewidth=this._flagOpacity=this._flagVisible=this._flagSize=this._flagSizeAttenuation=!1,super.flagReset.call(this),this}},yi=mi;h(yi,"Properties",["fill","stroke","linewidth","opacity","visible","size","sizeAttenuation","beginning","ending"]);var bi={linewidth:{enumerable:!0,get:function(){return this._linewidth},set:function(t){this._linewidth=t,this._flagLinewidth=!0}},opacity:{enumerable:!0,get:function(){return this._opacity},set:function(t){this._opacity=t,this._flagOpacity=!0}},visible:{enumerable:!0,get:function(){return this._visible},set:function(t){this._visible=t,this._flagVisible=!0}},size:{enumerable:!0,get:function(){return this._size},set:function(t){this._size=t,this._flagSize=!0}},sizeAttenuation:{enumerable:!0,get:function(){return this._sizeAttenuation},set:function(t){this._sizeAttenuation=t,this._flagSizeAttenuation=!0}},fill:{enumerable:!0,get:function(){return this._fill},set:function(t){(this._fill instanceof zt||this._fill instanceof Wt||this._fill instanceof Ut||this._fill instanceof te)&&this._fill.unbind(k.Types.change,this._renderer.flagFill),this._fill=t,this._flagFill=!0,(this._fill instanceof zt||this._fill instanceof Wt||this._fill instanceof Ut||this._fill instanceof te)&&this._fill.bind(k.Types.change,this._renderer.flagFill)}},stroke:{enumerable:!0,get:function(){return this._stroke},set:function(t){(this._stroke instanceof zt||this._stroke instanceof Wt||this._stroke instanceof Ut||this._stroke instanceof te)&&this._stroke.unbind(k.Types.change,this._renderer.flagStroke),this._stroke=t,this._flagStroke=!0,(this._stroke instanceof zt||this._stroke instanceof Wt||this._stroke instanceof Ut||this._stroke instanceof te)&&this._stroke.bind(k.Types.change,this._renderer.flagStroke)}},length:{get:function(){return this._flagLength&&this._updateLength(),this._length}},beginning:{enumerable:!0,get:function(){return this._beginning},set:function(t){this._beginning=t,this._flagVertices=!0}},ending:{enumerable:!0,get:function(){return this._ending},set:function(t){this._ending=t,this._flagVertices=!0}},vertices:{enumerable:!0,get:function(){return this._collection},set:function(t){const e=this._renderer.bindVertices,i=this._renderer.unbindVertices;this._collection&&this._collection.unbind(k.Types.insert,e).unbind(k.Types.remove,i),this._collection=t instanceof st?t:new st(t||[]),this._collection.bind(k.Types.insert,e).bind(k.Types.remove,i),e(this._collection)}},dashes:{enumerable:!0,get:function(){return this._dashes},set:function(t){"number"!=typeof t.offset&&(t.offset=this.dashes&&this._dashes.offset||0),this._dashes=t}}},xi=Math.cos,vi=Math.sin,wi=class extends ce{constructor(t,e,i,s){s=Math.max(s||0,3),super(),h(this,"_flagWidth",!1),h(this,"_flagHeight",!1),h(this,"_flagSides",!1),h(this,"_radius",0),h(this,"_width",0),h(this,"_height",0),h(this,"_sides",0);for(let t in Ri)Object.defineProperty(this,t,Ri[t]);this.closed=!0,this.automatic=!1,"number"==typeof i&&(this.radius=i),"number"==typeof s&&(this.sides=s),this._update(),"number"==typeof t&&(this.translation.x=t),"number"==typeof e&&(this.translation.y=e)}_update(){if(this._flagVertices||this._flagWidth||this._flagHeight||this._flagSides){const t=this._sides,e=t+1;let i=this.vertices.length;i>t&&(this.vertices.splice(t-1,i-t),i=t);for(let s=0;s<e;s++){const e=c*((s+.5)/t)+Math.PI/2,n=this._width*xi(e)/2,r=this._height*vi(e)/2;s>=i?this.vertices.push(new T(n,r)):this.vertices[s].set(n,r),this.vertices[s].command=0===s?o.move:o.line}}return super._update.call(this),this}flagReset(){return this._flagWidth=this._flagHeight=this._flagSides=!1,super.flagReset.call(this),this}clone(t){const e=new wi(0,0,0,this.sides);e.translation.copy(this.translation),e.rotation=this.rotation,e.scale=this.scale,e.skewX=this.skewX,e.skewY=this.skewY,e.width=this.width,e.height=this.height,this.matrix.manual&&e.matrix.copy(this.matrix);for(let t=0;t<ce.Properties.length;t++){const i=ce.Properties[t];e[i]=this[i]}return t&&t.add(e),e}toObject(){const t=super.toObject.call(this);for(let e=0;e<wi.Properties.length;e++){const i=wi.Properties[e];t[i]=this[i]}return t}},ki=wi;h(ki,"Properties",["width","height","sides"]);var Ri={radius:{enumerable:!0,get:function(){return this._radius},set:function(t){this._radius=t,this.width=2*t,this.height=2*t}},width:{enumerable:!0,get:function(){return this._width},set:function(t){this._width=t,this._flagWidth=!0,this._radius=Math.max(this.width,this.height)/2}},height:{enumerable:!0,get:function(){return this._height},set:function(t){this._height=t,this._flagHeight=!0,this._radius=Math.max(this.width,this.height)/2}},sides:{enumerable:!0,get:function(){return this._sides},set:function(t){this._sides=t,this._flagSides=!0}}},Ai=Math.cos,Si=Math.sin,Ti=class extends ce{constructor(t,e,i,s,n){arguments.length<=3&&(i=(s=i)/2),("number"!=typeof n||n<=0)&&(n=5),super(),h(this,"_flagInnerRadius",!1),h(this,"_flagOuterRadius",!1),h(this,"_flagSides",!1),h(this,"_innerRadius",0),h(this,"_outerRadius",0),h(this,"_sides",0);for(let t in Ei)Object.defineProperty(this,t,Ei[t]);this.closed=!0,this.automatic=!1,"number"==typeof i&&(this.innerRadius=i),"number"==typeof s&&(this.outerRadius=s),"number"==typeof n&&(this.sides=n),this._update(),"number"==typeof t&&(this.translation.x=t),"number"==typeof e&&(this.translation.y=e)}_update(){if(this._flagVertices||this._flagInnerRadius||this._flagOuterRadius||this._flagSides){const t=2*this._sides,e=t+1;let i=this.vertices.length;i>t&&(this.vertices.splice(t-1,i-t),i=t);for(let s=0;s<e;s++){const e=c*((s+.5)/t),n=(s%2?this._outerRadius:this._innerRadius)/2,r=n*Ai(e),a=n*Si(e);s>=i?this.vertices.push(new T(r,a)):this.vertices[s].set(r,a),this.vertices[s].command=0===s?o.move:o.line}}return super._update.call(this),this}flagReset(){return this._flagInnerRadius=this._flagOuterRadius=this._flagSides=!1,super.flagReset.call(this),this}clone(t){const e=this.innerRadius,i=this.outerRadius,s=this.sides,n=new Ti(0,0,e,i,s);n.translation.copy(this.translation),n.rotation=this.rotation,n.scale=this.scale,n.skewX=this.skewX,n.skewY=this.skewY,this.matrix.manual&&n.matrix.copy(this.matrix);for(let t=0;t<ce.Properties.length;t++){const e=ce.Properties[t];n[e]=this[e]}return t&&t.add(n),n}toObject(){const t=super.toObject.call(this);for(let e=0;e<Ti.Properties.length;e++){const i=Ti.Properties[e];t[i]=this[i]}return t}},Mi=Ti;h(Mi,"Properties",["innerRadius","outerRadius","sides"]);var Ei={innerRadius:{enumerable:!0,get:function(){return this._innerRadius},set:function(t){this._innerRadius=t,this._flagInnerRadius=!0}},outerRadius:{enumerable:!0,get:function(){return this._outerRadius},set:function(t){this._outerRadius=t,this._flagOuterRadius=!0}},sides:{enumerable:!0,get:function(){return this._sides},set:function(t){this._sides=t,this._flagSides=!0}}},Oi=new Q,Ci={version:1.1,ns:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",alignments:{left:"start",center:"middle",right:"end"},createElement:function(t,e){const i=t,s=document.createElementNS(Ci.ns,i);return"svg"===i&&(e=X.defaults(e||{},{version:Ci.version})),e&&Object.keys(e).length>0&&Ci.setAttributes(s,e),s},setAttributes:function(t,e){const i=Object.keys(e);for(let s=0;s<i.length;s++)/href/.test(i[s])?t.setAttributeNS(Ci.xlink,i[s],e[i[s]]):t.setAttribute(i[s],e[i[s]]);return this},removeAttributes:function(t,e){for(let i in e)t.removeAttribute(i);return this},toString:function(t,e){let i,s=t.length,n=s-1,r="";for(let a=0;a<s;a++){const h=t[a],l=t[e?y(a-1,s):Math.max(a-1,0)];let c,f,d,u,g,_,p,m,b,x,w,k,R,A,T,M=v(h.x),E=v(h.y);switch(h.command){case o.close:c=o.close;break;case o.arc:w=h.rx,k=h.ry,R=h.xAxisRotation,A=h.largeArcFlag,T=h.sweepFlag,c=o.arc+" "+w+" "+k+" "+R+" "+A+" "+T+" "+M+" "+E;break;case o.curve:p=l.controls&&l.controls.right||S.zero,m=h.controls&&h.controls.left||S.zero,l.relative?(d=v(p.x+l.x),u=v(p.y+l.y)):(d=v(p.x),u=v(p.y)),h.relative?(g=v(m.x+h.x),_=v(m.y+h.y)):(g=v(m.x),_=v(m.y)),c=(0===a?o.move:o.curve)+" "+d+" "+u+" "+g+" "+_+" "+M+" "+E;break;case o.move:i=h,c=o.move+" "+M+" "+E;break;default:c=h.command+" "+M+" "+E}a>=n&&e&&(h.command===o.curve&&(f=i,b=h.controls&&h.controls.right||h,x=f.controls&&f.controls.left||f,h.relative?(d=v(b.x+h.x),u=v(b.y+h.y)):(d=v(b.x),u=v(b.y)),f.relative?(g=v(x.x+f.x),_=v(x.y+f.y)):(g=v(x.x),_=v(x.y)),M=v(f.x),E=v(f.y),c+=" C "+d+" "+u+" "+g+" "+_+" "+M+" "+E),h.command!==o.close&&(c+=" Z")),r+=c+" "}return r},pointsToString:function(t,e){let i="";const s=.5*e;for(let e=0;e<t.length;e++){const n=t[e].x,r=t[e].y-s;i+=o.move+" "+n+" "+r+" ",i+="a "+s+" "+s+" 0 1 0 0.001 0 Z"}return i},getClip:function(t,e){let i=t._renderer.clip;return i||(i=t._renderer.clip=Ci.createElement("clipPath",{"clip-rule":"nonzero"}),e.defs.appendChild(i)),i},group:{appendChild:function(t){const e=t._renderer.elem;if(!e)return;const i=e.nodeName;!i||/(radial|linear)gradient/i.test(i)||t._clip||this.elem.appendChild(e)},removeChild:function(t){const e=t._renderer.elem;e&&e.parentNode==this.elem&&e.nodeName&&(t._clip||this.elem.removeChild(e))},orderChild:function(t){this.elem.appendChild(t._renderer.elem)},renderChild:function(t){Ci[t._renderer.type].render.call(t,this)},render:function(t){if(!this._visible&&!this._flagVisible||0===this._opacity&&!this._flagOpacity)return this;this._update(),this._renderer.elem||(this._renderer.elem=Ci.createElement("g",{id:this.id}),t.appendChild(this._renderer.elem));const e=this._matrix.manual||this._flagMatrix,i={domElement:t,elem:this._renderer.elem};e&&this._renderer.elem.setAttribute("transform","matrix("+this._matrix.toString()+")");for(let e=0;e<this.children.length;e++){const i=this.children[e];Ci[i._renderer.type].render.call(i,t)}return this._flagId&&this._renderer.elem.setAttribute("id",this._id),this._flagOpacity&&this._renderer.elem.setAttribute("opacity",this._opacity),this._flagVisible&&this._renderer.elem.setAttribute("display",this._visible?"inline":"none"),this._flagClassName&&this._renderer.elem.setAttribute("class",this.classList.join(" ")),this._flagAdditions&&this.additions.forEach(Ci.group.appendChild,i),this._flagSubtractions&&this.subtractions.forEach(Ci.group.removeChild,i),this._flagOrder&&this.children.forEach(Ci.group.orderChild,i),this._flagMask&&(this._mask?(Ci[this._mask._renderer.type].render.call(this._mask,t),this._renderer.elem.setAttribute("clip-path","url(#"+this._mask.id+")")):this._renderer.elem.removeAttribute("clip-path")),this.dataset&&Object.assign(this._renderer.elem.dataset,this.dataset),this.flagReset()}},path:{render:function(t){if(0===this._opacity&&!this._flagOpacity)return this;this._update();const e={};if((this._matrix.manual||this._flagMatrix)&&(e.transform="matrix("+this._matrix.toString()+")"),this._flagId&&(e.id=this._id),this._flagVertices){const t=Ci.toString(this._renderer.vertices,this._closed);e.d=t}if(this._fill&&this._fill._renderer&&(this._fill._update(),Ci[this._fill._renderer.type].render.call(this._fill,t,!0)),this._flagFill&&(e.fill=this._fill&&this._fill.id?"url(#"+this._fill.id+")":this._fill),this._stroke&&this._stroke._renderer&&(this._stroke._update(),Ci[this._stroke._renderer.type].render.call(this._stroke,t,!0)),this._flagStroke&&(e.stroke=this._stroke&&this._stroke.id?"url(#"+this._stroke.id+")":this._stroke),this._flagLinewidth&&(e["stroke-width"]=this._linewidth),this._flagOpacity&&(e["stroke-opacity"]=this._opacity,e["fill-opacity"]=this._opacity),this._flagClassName&&(e.class=this.classList.join(" ")),this._flagVisible&&(e.visibility=this._visible?"visible":"hidden"),this._flagCap&&(e["stroke-linecap"]=this._cap),this._flagJoin&&(e["stroke-linejoin"]=this._join),this._flagMiter&&(e["stroke-miterlimit"]=this._miter),this.dashes&&this.dashes.length>0&&(e["stroke-dasharray"]=this.dashes.join(" "),e["stroke-dashoffset"]=this.dashes.offset||0),this._renderer.elem?Ci.setAttributes(this._renderer.elem,e):(e.id=this._id,this._renderer.elem=Ci.createElement("path",e),t.appendChild(this._renderer.elem)),this._flagClip){const e=Ci.getClip(this,t),i=this._renderer.elem;this._clip?(i.removeAttribute("id"),e.setAttribute("id",this.id),e.appendChild(i)):(e.removeAttribute("id"),i.setAttribute("id",this.id),this.parent._renderer.elem.appendChild(i))}return this._flagMask&&(this._mask?(Ci[this._mask._renderer.type].render.call(this._mask,t),this._renderer.elem.setAttribute("clip-path","url(#"+this._mask.id+")")):this._renderer.elem.removeAttribute("clip-path")),this.flagReset()}},points:{render:function(t){if(0===this._opacity&&!this._flagOpacity)return this;this._update();const e={};if((this._matrix.manual||this._flagMatrix)&&(e.transform="matrix("+this._matrix.toString()+")"),this._flagId&&(e.id=this._id),this._flagVertices||this._flagSize||this._flagSizeAttenuation){let t=this._size;if(!this._sizeAttenuation){g(this,Oi);const e=Oi.elements,i=d(e[0],e[3],e[1],e[4],e[2],e[5]);t/=Math.max(i.scaleX,i.scaleY)}const i=Ci.pointsToString(this._renderer.collection,t);e.d=i}return this._fill&&this._fill._renderer&&(this._fill._update(),Ci[this._fill._renderer.type].render.call(this._fill,t,!0)),this._flagFill&&(e.fill=this._fill&&this._fill.id?"url(#"+this._fill.id+")":this._fill),this._stroke&&this._stroke._renderer&&(this._stroke._update(),Ci[this._stroke._renderer.type].render.call(this._stroke,t,!0)),this._flagStroke&&(e.stroke=this._stroke&&this._stroke.id?"url(#"+this._stroke.id+")":this._stroke),this._flagLinewidth&&(e["stroke-width"]=this._linewidth),this._flagOpacity&&(e["stroke-opacity"]=this._opacity,e["fill-opacity"]=this._opacity),this._flagClassName&&(e.class=this.classList.join(" ")),this._flagVisible&&(e.visibility=this._visible?"visible":"hidden"),this.dashes&&this.dashes.length>0&&(e["stroke-dasharray"]=this.dashes.join(" "),e["stroke-dashoffset"]=this.dashes.offset||0),this._renderer.elem?Ci.setAttributes(this._renderer.elem,e):(e.id=this._id,this._renderer.elem=Ci.createElement("path",e),t.appendChild(this._renderer.elem)),this.flagReset()}},text:{render:function(t){this._update();const e={};if((this._matrix.manual||this._flagMatrix)&&(e.transform="matrix("+this._matrix.toString()+")"),this._flagId&&(e.id=this._id),this._flagFamily&&(e["font-family"]=this._family),this._flagSize&&(e["font-size"]=this._size),this._flagLeading&&(e["line-height"]=this._leading),this._flagAlignment&&(e["text-anchor"]=Ci.alignments[this._alignment]||this._alignment),this._flagBaseline&&(e["alignment-baseline"]=e["dominant-baseline"]=this._baseline),this._flagStyle&&(e["font-style"]=this._style),this._flagWeight&&(e["font-weight"]=this._weight),this._flagDecoration&&(e["text-decoration"]=this._decoration),this._fill&&this._fill._renderer&&(this._fill._update(),Ci[this._fill._renderer.type].render.call(this._fill,t,!0)),this._flagFill&&(e.fill=this._fill&&this._fill.id?"url(#"+this._fill.id+")":this._fill),this._stroke&&this._stroke._renderer&&(this._stroke._update(),Ci[this._stroke._renderer.type].render.call(this._stroke,t,!0)),this._flagStroke&&(e.stroke=this._stroke&&this._stroke.id?"url(#"+this._stroke.id+")":this._stroke),this._flagLinewidth&&(e["stroke-width"]=this._linewidth),this._flagOpacity&&(e.opacity=this._opacity),this._flagClassName&&(e.class=this.classList.join(" ")),this._flagVisible&&(e.visibility=this._visible?"visible":"hidden"),this.dashes&&this.dashes.length>0&&(e["stroke-dasharray"]=this.dashes.join(" "),e["stroke-dashoffset"]=this.dashes.offset||0),this._renderer.elem?Ci.setAttributes(this._renderer.elem,e):(e.id=this._id,this._renderer.elem=Ci.createElement("text",e),t.defs.appendChild(this._renderer.elem)),this._flagClip){const e=Ci.getClip(this,t),i=this._renderer.elem;this._clip?(i.removeAttribute("id"),e.setAttribute("id",this.id),e.appendChild(i)):(e.removeAttribute("id"),i.setAttribute("id",this.id),this.parent._renderer.elem.appendChild(i))}return this._flagMask&&(this._mask?(Ci[this._mask._renderer.type].render.call(this._mask,t),this._renderer.elem.setAttribute("clip-path","url(#"+this._mask.id+")")):this._renderer.elem.removeAttribute("clip-path")),this._flagValue&&(this._renderer.elem.textContent=this._value),this.flagReset()}},"linear-gradient":{render:function(t,e){e||this._update();const i={};if(this._flagId&&(i.id=this._id),this._flagEndPoints&&(i.x1=this.left._x,i.y1=this.left._y,i.x2=this.right._x,i.y2=this.right._y),this._flagSpread&&(i.spreadMethod=this._spread),this._flagUnits&&(i.gradientUnits=this._units),this._renderer.elem?Ci.setAttributes(this._renderer.elem,i):(i.id=this._id,this._renderer.elem=Ci.createElement("linearGradient",i),t.defs.appendChild(this._renderer.elem)),this._flagStops){const t=this._renderer.elem.childNodes.length!==this.stops.length;if(t)for(;this._renderer.elem.lastChild;)this._renderer.elem.removeChild(this._renderer.elem.lastChild);for(let e=0;e<this.stops.length;e++){const i=this.stops[e],s={};i._flagOffset&&(s.offset=100*i._offset+"%"),i._flagColor&&(s["stop-color"]=i._color),i._flagOpacity&&(s["stop-opacity"]=i._opacity),i._renderer.elem?Ci.setAttributes(i._renderer.elem,s):i._renderer.elem=Ci.createElement("stop",s),t&&this._renderer.elem.appendChild(i._renderer.elem),i.flagReset()}}return this.flagReset()}},"radial-gradient":{render:function(t,e){e||this._update();const i={};if(this._flagId&&(i.id=this._id),this._flagCenter&&(i.cx=this.center._x,i.cy=this.center._y),this._flagFocal&&(i.fx=this.focal._x,i.fy=this.focal._y),this._flagRadius&&(i.r=this._radius),this._flagSpread&&(i.spreadMethod=this._spread),this._flagUnits&&(i.gradientUnits=this._units),this._renderer.elem?Ci.setAttributes(this._renderer.elem,i):(i.id=this._id,this._renderer.elem=Ci.createElement("radialGradient",i),t.defs.appendChild(this._renderer.elem)),this._flagStops){const t=this._renderer.elem.childNodes.length!==this.stops.length;if(t)for(;this._renderer.elem.lastChild;)this._renderer.elem.removeChild(this._renderer.elem.lastChild);for(let e=0;e<this.stops.length;e++){const i=this.stops[e],s={};i._flagOffset&&(s.offset=100*i._offset+"%"),i._flagColor&&(s["stop-color"]=i._color),i._flagOpacity&&(s["stop-opacity"]=i._opacity),i._renderer.elem?Ci.setAttributes(i._renderer.elem,s):i._renderer.elem=Ci.createElement("stop",s),t&&this._renderer.elem.appendChild(i._renderer.elem),i.flagReset()}}return this.flagReset()}},texture:{render:function(t,e){e||this._update();const i={},s={x:0,y:0},n=this.image;if(this._flagId&&(i.id=this._id),this._flagLoaded&&this.loaded)switch(n.nodeName.toLowerCase()){case"canvas":s.href=s["xlink:href"]=n.toDataURL("image/png");break;case"img":case"image":s.href=s["xlink:href"]=this.src}return(this._flagOffset||this._flagLoaded||this._flagScale)&&(i.x=this._offset.x,i.y=this._offset.y,n&&(i.x-=n.width/2,i.y-=n.height/2,this._scale instanceof S?(i.x*=this._scale.x,i.y*=this._scale.y):(i.x*=this._scale,i.y*=this._scale)),i.x>0&&(i.x*=-1),i.y>0&&(i.y*=-1)),(this._flagScale||this._flagLoaded||this._flagRepeat)&&(i.width=0,i.height=0,n)&&(s.width=i.width=n.width,s.height=i.height=n.height,"no-repeat"===this._repeat&&(i.width+=1,i.height+=1),this._scale instanceof S?(i.width*=this._scale.x,i.height*=this._scale.y):(i.width*=this._scale,i.height*=this._scale)),(this._flagScale||this._flagLoaded)&&(this._renderer.image?Ci.setAttributes(this._renderer.image,s):this._renderer.image=Ci.createElement("image",s)),this._renderer.elem?0!==Object.keys(i).length&&Ci.setAttributes(this._renderer.elem,i):(i.id=this._id,i.patternUnits="userSpaceOnUse",this._renderer.elem=Ci.createElement("pattern",i),t.defs.appendChild(this._renderer.elem)),this._renderer.elem&&this._renderer.image&&!this._renderer.appended&&(this._renderer.elem.appendChild(this._renderer.image),this._renderer.appended=!0),this.flagReset()}}},Fi=class extends k{constructor(t){super(),this.domElement=t.domElement||Ci.createElement("svg"),this.scene=new ot,this.scene.parent=this,this.defs=Ci.createElement("defs"),this.domElement.appendChild(this.defs),this.domElement.defs=this.defs,this.domElement.style.overflow="hidden"}setSize(t,e){return this.width=t,this.height=e,Ci.setAttributes(this.domElement,{width:t,height:e}),this.trigger(k.Types.resize,t,e)}render(){return Ci.group.render.call(this.scene,this.domElement),this}};h(Fi,"Utils",Ci);var Pi=function(t,e,i){const s=t.createShader(t[i]);if(t.shaderSource(s,e),t.compileShader(s),!t.getShaderParameter(s,t.COMPILE_STATUS)){const e=t.getShaderInfoLog(s);throw t.deleteShader(s),new Tt("unable to compile shader "+s+": "+e)}return s},Li={vertex:"VERTEX_SHADER",fragment:"FRAGMENT_SHADER"},ji={vertex:"\n      precision mediump float;\n      attribute vec2 a_position;\n\n      uniform mat3 u_matrix;\n      uniform vec2 u_resolution;\n      uniform vec4 u_rect;\n\n      varying vec2 v_textureCoords;\n\n      void main() {\n        vec2 rectCoords = (a_position * (u_rect.zw - u_rect.xy)) + u_rect.xy;\n        vec2 projected = (u_matrix * vec3(rectCoords, 1.0)).xy;\n        vec2 normal = projected / u_resolution;\n        vec2 clipspace = (normal * 2.0) - 1.0;\n\n        gl_Position = vec4(clipspace * vec2(1.0, -1.0), 0.0, 1.0);\n        v_textureCoords = a_position;\n      }\n    ",fragment:"\n      precision mediump float;\n\n      uniform sampler2D u_image;\n      varying vec2 v_textureCoords;\n\n      void main() {\n        vec4 texel = texture2D(u_image, v_textureCoords);\n        if (texel.a == 0.0) {\n          discard;\n        }\n        gl_FragColor = texel;\n      }\n    "},Ii={vertex:"\n      precision mediump float;\n      attribute vec2 a_position;\n\n      uniform float u_size;\n      uniform mat3 u_matrix;\n      uniform vec2 u_resolution;\n\n      varying vec2 v_textureCoords;\n\n      void main() {\n        vec2 projected = (u_matrix * vec3(a_position, 1.0)).xy;\n        vec2 normal = projected / u_resolution;\n        vec2 clipspace = (normal * 2.0) - 1.0;\n\n        gl_PointSize = u_size;\n        gl_Position = vec4(clipspace * vec2(1.0, -1.0), 0.0, 1.0);\n        v_textureCoords = a_position;\n      }\n    ",fragment:"\n      precision mediump float;\n\n      uniform sampler2D u_image;\n\n      void main() {\n        vec4 texel = texture2D(u_image, gl_PointCoord);\n        if (texel.a == 0.0) {\n          discard;\n        }\n        gl_FragColor = texel;\n      }\n    "},zi=Q.Multiply,Bi=[1,0,0,0,1,0,0,0,1],Ni=new b(9),Di=vt.Utils,Gi=new b([0,0,1,0,0,1,0,1,1,0,1,1]),Vi={precision:.9,isHidden:/(undefined|none|transparent)/i,canvas:s.document?s.document.createElement("canvas"):{getContext:function(){}},alignments:{left:"start",middle:"center",right:"end"},matrix:new Q,group:{removeChild:function(t,e){if(t.children)for(let i=0;i<t.children.length;i++)Vi.group.removeChild(t.children[i],e);t._renderer.texture&&(e.deleteTexture(t._renderer.texture),delete t._renderer.texture),t._renderer.positionBuffer&&(e.deleteBuffer(t._renderer.positionBuffer),delete t._renderer.positionBuffer)},render:function(t,e){if(!this._visible)return;this._update();const i=this.parent,s=i._matrix&&i._matrix.manual||i._flagMatrix,n=this._matrix.manual||this._flagMatrix;let r;if((s||n)&&(this._renderer.matrix||(this._renderer.matrix=new b(9)),this._matrix.toTransformArray(!0,Ni),zi(Ni,i._renderer.matrix,this._renderer.matrix),this._renderer.scale instanceof S||(this._renderer.scale=new S),this._scale instanceof S?(this._renderer.scale.x=this._scale.x,this._renderer.scale.y=this._scale.y):(this._renderer.scale.x=this._scale,this._renderer.scale.y=this._scale),/renderer/i.test(i._renderer.type)||(this._renderer.scale.x*=i._renderer.scale.x,this._renderer.scale.y*=i._renderer.scale.y),s&&(this._flagMatrix=!0)),this._mask&&(t.clear(t.STENCIL_BUFFER_BIT),t.enable(t.STENCIL_TEST),t.stencilFunc(t.ALWAYS,1,0),t.stencilOp(t.KEEP,t.KEEP,t.REPLACE),t.colorMask(!1,!1,!1,!1),Vi[this._mask._renderer.type].render.call(this._mask,t,e,this),t.stencilFunc(t.EQUAL,1,255),t.stencilOp(t.KEEP,t.KEEP,t.KEEP),t.colorMask(!0,!0,!0,!0)),this._flagOpacity=i._flagOpacity||this._flagOpacity,this._renderer.opacity=this._opacity*(i&&i._renderer?i._renderer.opacity:1),this._flagSubtractions)for(r=0;r<this.subtractions.length;r++)Vi.group.removeChild(this.subtractions[r],t);for(r=0;r<this.children.length;r++){const i=this.children[r];Vi[i._renderer.type].render.call(i,t,e)}return this._mask&&t.disable(t.STENCIL_TEST),this.flagReset()}},path:{updateCanvas:function(t){let e,i,s,n,r,a,h,l,c,f,d,u,g,_;const p=t._renderer.vertices,m=this.canvas,b=this.ctx,x=t._renderer.scale,v=t._stroke,w=t._linewidth,k=t._fill,R=t._renderer.opacity||t._opacity,A=t._cap,T=t._join,M=t._miter,E=t._closed,O=t.dashes,C=p.length,F=C-1;m.width=Math.max(Math.ceil(t._renderer.rect.width*x.x),1),m.height=Math.max(Math.ceil(t._renderer.rect.height*x.y),1);const P=t._renderer.rect.centroid,L=P.x,j=P.y;let I,z,B,N,D,G,V,W;b.clearRect(0,0,m.width,m.height),k&&("string"==typeof k?b.fillStyle=k:(Vi[k._renderer.type].render.call(k,b,t),b.fillStyle=k._renderer.effect)),v&&("string"==typeof v?b.strokeStyle=v:(Vi[v._renderer.type].render.call(v,b,t),b.strokeStyle=v._renderer.effect),w&&(b.lineWidth=w),M&&(b.miterLimit=M),T&&(b.lineJoin=T),!E&&A&&(b.lineCap=A)),"number"==typeof R&&(b.globalAlpha=R),O&&O.length>0&&(b.lineDashOffset=O.offset||0,b.setLineDash(O)),b.save(),b.scale(x.x,x.y),b.translate(L,j),b.beginPath();for(let t=0;t<p.length;t++){const _=p[t];switch(u=_.x,g=_.y,_.command){case o.close:b.closePath();break;case o.arc:z=_.rx,B=_.ry,N=_.xAxisRotation,D=_.largeArcFlag,G=_.sweepFlag,e=E?y(t-1,C):Math.max(t-1,0),i=p[e],V=i.x,W=i.y,Di.renderSvgArcCommand(b,V,W,z,B,D,G,N,u,g);break;case o.curve:e=E?y(t-1,C):Math.max(t-1,0),i=p[e],l=i.controls&&i.controls.right||S.zero,c=_.controls&&_.controls.left||S.zero,i._relative?(a=l.x+i.x,h=l.y+i.y):(a=l.x,h=l.y),_._relative?(n=c.x+_.x,r=c.y+_.y):(n=c.x,r=c.y),b.bezierCurveTo(a,h,n,r,u,g),t>=F&&E&&(s=I,f=_.controls&&_.controls.right||S.zero,d=s.controls&&s.controls.left||S.zero,_._relative?(a=f.x+_.x,h=f.y+_.y):(a=f.x,h=f.y),s._relative?(n=d.x+s.x,r=d.y+s.y):(n=d.x,r=d.y),u=s.x,g=s.y,b.bezierCurveTo(a,h,n,r,u,g));break;case o.line:b.lineTo(u,g);break;case o.move:I=_,b.moveTo(u,g)}}E&&b.closePath(),Vi.isHidden.test(k)||(_=k._renderer&&k._renderer.offset,_&&(b.save(),b.translate(-k._renderer.offset.x,-k._renderer.offset.y),b.scale(k._renderer.scale.x,k._renderer.scale.y)),b.fill(),_&&b.restore()),Vi.isHidden.test(v)||(_=v._renderer&&v._renderer.offset,_&&(b.save(),b.translate(-v._renderer.offset.x,-v._renderer.offset.y),b.scale(v._renderer.scale.x,v._renderer.scale.y),b.lineWidth=w/v._renderer.scale.x),b.stroke(),_&&b.restore()),b.restore()},getBoundingClientRect:function(t,e,i){let s,n,r=1/0,a=-1/0,h=1/0,o=-1/0;t.forEach((function(t){const e=t.x,i=t.y,s=t.controls;let n,l,c,f,d,u;h=Math.min(i,h),r=Math.min(e,r),a=Math.max(e,a),o=Math.max(i,o),t.controls&&(d=s.left,u=s.right,d&&u&&(n=t._relative?d.x+e:d.x,l=t._relative?d.y+i:d.y,c=t._relative?u.x+e:u.x,f=t._relative?u.y+i:u.y,n&&l&&c&&f&&(h=Math.min(l,f,h),r=Math.min(n,c,r),a=Math.max(n,c,a),o=Math.max(l,f,o))))})),"number"==typeof e&&(h-=e,r-=e,a+=e,o+=e),s=a-r,n=o-h,i.top=h,i.left=r,i.right=a,i.bottom=o,i.width=s,i.height=n,i.centroid||(i.centroid={}),i.centroid.x=-r,i.centroid.y=-h},render:function(t,e,i){if(!this._visible||!this._opacity)return this;this._update();const s=i||this.parent,n=e[this._renderer.type],r=s._matrix.manual||s._flagMatrix,a=this._matrix.manual||this._flagMatrix,h=this._renderer.parent!==s,o=this._flagVertices||this._flagFill||this._fill instanceof Wt&&(this._fill._flagSpread||this._fill._flagStops||this._fill._flagEndPoints)||this._fill instanceof Ut&&(this._fill._flagSpread||this._fill._flagStops||this._fill._flagRadius||this._fill._flagCenter||this._fill._flagFocal)||this._fill instanceof te&&(this._fill._flagLoaded&&this._fill.loaded||this._fill._flagImage||this._fill._flagVideo||this._fill._flagRepeat||this._fill._flagOffset||this._fill._flagScale)||this._stroke instanceof Wt&&(this._stroke._flagSpread||this._stroke._flagStops||this._stroke._flagEndPoints)||this._stroke instanceof Ut&&(this._stroke._flagSpread||this._stroke._flagStops||this._stroke._flagRadius||this._stroke._flagCenter||this._stroke._flagFocal)||this._stroke instanceof te&&(this._stroke._flagLoaded&&this._stroke.loaded||this._stroke._flagImage||this._stroke._flagVideo||this._stroke._flagRepeat||this._stroke._flagOffset||this._fill._flagScale)||this._flagStroke||this._flagLinewidth||this._flagOpacity||s._flagOpacity||this._flagVisible||this._flagCap||this._flagJoin||this._flagMiter||this._flagScale||this.dashes&&this.dashes.length>0||!this._renderer.texture;if((r||a||h)&&(this._renderer.matrix||(this._renderer.matrix=new b(9)),this._matrix.toTransformArray(!0,Ni),zi(Ni,s._renderer.matrix,this._renderer.matrix),this._renderer.scale instanceof S||(this._renderer.scale=new S),this._scale instanceof S?(this._renderer.scale.x=this._scale.x*s._renderer.scale.x,this._renderer.scale.y=this._scale.y*s._renderer.scale.y):(this._renderer.scale.x=this._scale*s._renderer.scale.x,this._renderer.scale.y=this._scale*s._renderer.scale.y),h&&(this._renderer.parent=s)),this._mask&&(t.clear(t.STENCIL_BUFFER_BIT),t.enable(t.STENCIL_TEST),t.stencilFunc(t.ALWAYS,1,0),t.stencilOp(t.KEEP,t.KEEP,t.REPLACE),t.colorMask(!1,!1,!1,!1),Vi[this._mask._renderer.type].render.call(this._mask,t,e,this),t.stencilFunc(t.EQUAL,1,255),t.stencilOp(t.KEEP,t.KEEP,t.KEEP),t.colorMask(!0,!0,!0,!0)),o?(this._renderer.rect||(this._renderer.rect={}),this._renderer.opacity=this._opacity*s._renderer.opacity,Vi.path.getBoundingClientRect(this._renderer.vertices,this._linewidth,this._renderer.rect),Vi.updateTexture.call(Vi,t,this)):(this._fill&&this._fill._update&&this._fill._update(),this._stroke&&this._stroke._update&&this._stroke._update()),this._clip&&!i||!this._renderer.texture)return this;e.current!==n&&(t.useProgram(n),t.bindBuffer(t.ARRAY_BUFFER,e.buffers.position),t.vertexAttribPointer(n.position,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(n.position),t.bufferData(t.ARRAY_BUFFER,Gi,t.STATIC_DRAW),e.resolution.flagged||t.uniform2f(t.getUniformLocation(n,"u_resolution"),e.resolution.width,e.resolution.height),e.current=n),e.resolution.flagged&&t.uniform2f(t.getUniformLocation(n,"u_resolution"),e.resolution.width,e.resolution.height),t.bindTexture(t.TEXTURE_2D,this._renderer.texture);const l=this._renderer.rect;return t.uniformMatrix3fv(n.matrix,!1,this._renderer.matrix),t.uniform4f(n.rect,l.left,l.top,l.right,l.bottom),t.drawArrays(t.TRIANGLES,0,6),this._mask&&t.disable(t.STENCIL_TEST),this.flagReset()}},points:{updateCanvas:function(t){let e;const i=this.canvas,s=this.ctx,n=t._stroke,r=t._linewidth,a=t._fill,h=t._renderer.opacity||t._opacity,o=t.dashes,l=t._size;let f=l;Vi.isHidden.test(n)||(f+=r),i.width=m(f),i.height=i.width;const d=f/i.width,u=i.width/2,g=i.height/2;s.clearRect(0,0,i.width,i.height),a&&("string"==typeof a?s.fillStyle=a:(Vi[a._renderer.type].render.call(a,s,t),s.fillStyle=a._renderer.effect)),n&&("string"==typeof n?s.strokeStyle=n:(Vi[n._renderer.type].render.call(n,s,t),s.strokeStyle=n._renderer.effect),r&&(s.lineWidth=r/d)),"number"==typeof h&&(s.globalAlpha=h),o&&o.length>0&&(s.lineDashOffset=o.offset||0,s.setLineDash(o)),s.save(),s.translate(u,g),s.scale(Vi.precision,Vi.precision),s.beginPath(),s.arc(0,0,l/d*.5,0,c),s.restore(),closed&&s.closePath(),Vi.isHidden.test(a)||(e=a._renderer&&a._renderer.offset,e&&(s.save(),s.translate(-a._renderer.offset.x,-a._renderer.offset.y),s.scale(a._renderer.scale.x,a._renderer.scale.y)),s.fill(),e&&s.restore()),Vi.isHidden.test(n)||(e=n._renderer&&n._renderer.offset,e&&(s.save(),s.translate(-n._renderer.offset.x,-n._renderer.offset.y),s.scale(n._renderer.scale.x,n._renderer.scale.y),s.lineWidth=r/n._renderer.scale.x),s.stroke(),e&&s.restore())},render:function(t,e,i){if(!this._visible||!this._opacity)return this;this._update();let s=this._size;const n=i||this.parent,r=e[this._renderer.type],a=this._sizeAttenuation,h=this._stroke,o=this._linewidth,l=n._matrix.manual||n._flagMatrix,c=this._matrix.manual||this._flagMatrix,f=this._renderer.parent!==n,d=this._renderer.vertices,u=this._renderer.collection.length,g=this._flagVertices,_=this._flagFill||this._fill instanceof Wt&&(this._fill._flagSpread||this._fill._flagStops||this._fill._flagEndPoints)||this._fill instanceof Ut&&(this._fill._flagSpread||this._fill._flagStops||this._fill._flagRadius||this._fill._flagCenter||this._fill._flagFocal)||this._fill instanceof te&&(this._fill._flagLoaded&&this._fill.loaded||this._fill._flagImage||this._fill._flagVideo||this._fill._flagRepeat||this._fill._flagOffset||this._fill._flagScale)||this._stroke instanceof Wt&&(this._stroke._flagSpread||this._stroke._flagStops||this._stroke._flagEndPoints)||this._stroke instanceof Ut&&(this._stroke._flagSpread||this._stroke._flagStops||this._stroke._flagRadius||this._stroke._flagCenter||this._stroke._flagFocal)||this._stroke instanceof te&&(this._stroke._flagLoaded&&this._stroke.loaded||this._stroke._flagImage||this._stroke._flagVideo||this._stroke._flagRepeat||this._stroke._flagOffset||this._fill._flagScale)||this._flagStroke||this._flagLinewidth||this._flagOpacity||n._flagOpacity||this._flagVisible||this._flagScale||this.dashes&&this.dashes.length>0||!this._renderer.texture;if((l||c||f)&&(this._renderer.matrix||(this._renderer.matrix=new b(9)),this._matrix.toTransformArray(!0,Ni),zi(Ni,n._renderer.matrix,this._renderer.matrix),this._renderer.scale instanceof S||(this._renderer.scale=new S),this._scale instanceof S?(this._renderer.scale.x=this._scale.x*n._renderer.scale.x,this._renderer.scale.y=this._scale.y*n._renderer.scale.y):(this._renderer.scale.x=this._scale*n._renderer.scale.x,this._renderer.scale.y=this._scale*n._renderer.scale.y),f&&(this._renderer.parent=n)),g){const e=this._renderer.positionBuffer;e&&t.deleteBuffer(e),this._renderer.positionBuffer=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this._renderer.positionBuffer),t.vertexAttribPointer(r.position,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(r.position),t.bufferData(t.ARRAY_BUFFER,d,t.STATIC_DRAW)}return _?(this._renderer.opacity=this._opacity*n._renderer.opacity,Vi.updateTexture.call(Vi,t,this)):(this._fill&&this._fill._update&&this._fill._update(),this._stroke&&this._stroke._update&&this._stroke._update()),this._clip&&!i||!this._renderer.texture?this:(Vi.isHidden.test(h)||(s+=o),s/=Vi.precision,a&&(s*=Math.max(this._renderer.scale.x,this._renderer.scale.y)),e.current!==r&&(t.useProgram(r),e.resolution.flagged||t.uniform2f(t.getUniformLocation(r,"u_resolution"),e.resolution.width,e.resolution.height),e.current=r),e.resolution.flagged&&t.uniform2f(t.getUniformLocation(r,"u_resolution"),e.resolution.width,e.resolution.height),t.bindTexture(t.TEXTURE_2D,this._renderer.texture),t.uniformMatrix3fv(r.matrix,!1,this._renderer.matrix),t.uniform1f(r.size,s*e.resolution.ratio),t.drawArrays(t.POINTS,0,u),this.flagReset())}},text:{updateCanvas:function(t){const e=this.canvas,i=this.ctx,s=t._renderer.scale,n=t._stroke,r=t._linewidth*s,a=t._fill,h=t._renderer.opacity||t._opacity,o=t.dashes,l=t._decoration;e.width=Math.max(Math.ceil(t._renderer.rect.width*s.x),1),e.height=Math.max(Math.ceil(t._renderer.rect.height*s.y),1);const c=t._renderer.rect.centroid,f=c.x,d=c.y;let u,g,_,p,m,y,b,x,v,w,k;const R=a._renderer&&a._renderer.offset&&n._renderer&&n._renderer.offset;if(i.clearRect(0,0,e.width,e.height),R||(i.font=[t._style,t._weight,t._size+"px/"+t._leading+"px",t._family].join(" ")),i.textAlign="center",i.textBaseline="middle",a&&("string"==typeof a?i.fillStyle=a:(Vi[a._renderer.type].render.call(a,i,t),i.fillStyle=a._renderer.effect)),n&&("string"==typeof n?i.strokeStyle=n:(Vi[n._renderer.type].render.call(n,i,t),i.strokeStyle=n._renderer.effect),r&&(i.lineWidth=r)),"number"==typeof h&&(i.globalAlpha=h),o&&o.length>0&&(i.lineDashOffset=o.offset||0,i.setLineDash(o)),i.save(),i.scale(s.x,s.y),i.translate(f,d),Vi.isHidden.test(a)||(a._renderer&&a._renderer.offset?(y=a._renderer.scale.x,b=a._renderer.scale.y,i.save(),i.translate(-a._renderer.offset.x,-a._renderer.offset.y),i.scale(y,b),u=t._size/a._renderer.scale.y,g=t._leading/a._renderer.scale.y,i.font=[t._style,t._weight,u+"px/",g+"px",t._family].join(" "),_=a._renderer.offset.x/a._renderer.scale.x,p=a._renderer.offset.y/a._renderer.scale.y,i.fillText(t.value,_,p),i.restore()):i.fillText(t.value,0,0)),Vi.isHidden.test(n)||(n._renderer&&n._renderer.offset?(y=n._renderer.scale.x,b=n._renderer.scale.y,i.save(),i.translate(-n._renderer.offset.x,-n._renderer.offset.y),i.scale(y,b),u=t._size/n._renderer.scale.y,g=t._leading/n._renderer.scale.y,i.font=[t._style,t._weight,u+"px/",g+"px",t._family].join(" "),_=n._renderer.offset.x/n._renderer.scale.x,p=n._renderer.offset.y/n._renderer.scale.y,m=r/n._renderer.scale.x,i.lineWidth=m,i.strokeText(t.value,_,p),i.restore()):i.strokeText(t.value,0,0)),/(underline|strikethrough)/i.test(l)){const e=i.measureText(t.value);switch(l){case"underline":v=e.actualBoundingBoxAscent,k=e.actualBoundingBoxAscent;break;case"strikethrough":v=0,k=0}x=-e.width/2,w=e.width/2,i.lineWidth=Math.max(Math.floor(t._size/15),1),i.strokeStyle=i.fillStyle,i.beginPath(),i.moveTo(x,v),i.lineTo(w,k),i.stroke()}i.restore()},getBoundingClientRect:function(t,e){const i=Vi.ctx;i.font=[t._style,t._weight,t._size+"px/"+t._leading+"px",t._family].join(" "),i.textAlign="center",i.textBaseline=t._baseline;let s=1.25*i.measureText(t._value).width,n=1.25*Math.max(t._size,t._leading);this._linewidth&&!Vi.isHidden.test(this._stroke)&&(s+=2*this._linewidth,n+=2*this._linewidth);const r=s/2,a=n/2;switch(Vi.alignments[t._alignment]||t._alignment){case Vi.alignments.left:e.left=0,e.right=s;break;case Vi.alignments.right:e.left=-s,e.right=0;break;default:e.left=-r,e.right=r}switch(t._baseline){case"bottom":e.top=-n,e.bottom=0;break;case"top":e.top=0,e.bottom=n;break;default:e.top=-a,e.bottom=a}e.width=s,e.height=n,e.centroid||(e.centroid={}),e.centroid.x=r,e.centroid.y=a},render:function(t,e,i){if(!this._visible||!this._opacity)return this;this._update();const s=i||this.parent,n=e[this._renderer.type],r=s._matrix.manual||s._flagMatrix,a=this._matrix.manual||this._flagMatrix,h=this._renderer.parent!==s,o=this._flagVertices||this._flagFill||this._fill instanceof Wt&&(this._fill._flagSpread||this._fill._flagStops||this._fill._flagEndPoints)||this._fill instanceof Ut&&(this._fill._flagSpread||this._fill._flagStops||this._fill._flagRadius||this._fill._flagCenter||this._fill._flagFocal)||this._fill instanceof te&&(this._fill._flagLoaded&&this._fill.loaded||this._fill._flagImage||this._fill._flagVideo||this._fill._flagRepeat||this._fill._flagOffset||this._fill._flagScale)||this._stroke instanceof Wt&&(this._stroke._flagSpread||this._stroke._flagStops||this._stroke._flagEndPoints)||this._stroke instanceof Ut&&(this._stroke._flagSpread||this._stroke._flagStops||this._stroke._flagRadius||this._stroke._flagCenter||this._stroke._flagFocal)||this._stroke instanceof te&&(this._stroke._flagLoaded&&this._stroke.loaded||this._stroke._flagImage||this._stroke._flagVideo||this._stroke._flagRepeat||this._stroke._flagOffset||this._fill._flagScale)||this._flagStroke||this._flagLinewidth||this._flagOpacity||s._flagOpacity||this._flagVisible||this._flagScale||this._flagValue||this._flagFamily||this._flagSize||this._flagLeading||this._flagAlignment||this._flagBaseline||this._flagStyle||this._flagWeight||this._flagDecoration||this.dashes&&this.dashes.length>0||!this._renderer.texture;if((r||a||h)&&(this._renderer.matrix||(this._renderer.matrix=new b(9)),this._matrix.toTransformArray(!0,Ni),zi(Ni,s._renderer.matrix,this._renderer.matrix),this._renderer.scale instanceof S||(this._renderer.scale=new S),this._scale instanceof S?(this._renderer.scale.x=this._scale.x*s._renderer.scale.x,this._renderer.scale.y=this._scale.y*s._renderer.scale.y):(this._renderer.scale.x=this._scale*s._renderer.scale.x,this._renderer.scale.y=this._scale*s._renderer.scale.y),h&&(this._renderer.parent=s)),this._mask&&(t.clear(t.STENCIL_BUFFER_BIT),t.enable(t.STENCIL_TEST),t.stencilFunc(t.ALWAYS,1,0),t.stencilOp(t.KEEP,t.KEEP,t.REPLACE),t.colorMask(!1,!1,!1,!1),Vi[this._mask._renderer.type].render.call(this._mask,t,e,this),t.stencilFunc(t.EQUAL,1,255),t.stencilOp(t.KEEP,t.KEEP,t.KEEP),t.colorMask(!0,!0,!0,!0)),o?(this._renderer.rect||(this._renderer.rect={}),this._renderer.opacity=this._opacity*s._renderer.opacity,Vi.text.getBoundingClientRect(this,this._renderer.rect),Vi.updateTexture.call(Vi,t,this)):(this._fill&&this._fill._update&&this._fill._update(),this._stroke&&this._stroke._update&&this._stroke._update()),this._clip&&!i||!this._renderer.texture)return this;e.current!==n&&(t.useProgram(n),t.bindBuffer(t.ARRAY_BUFFER,e.buffers.position),t.vertexAttribPointer(n.position,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(n.position),t.bufferData(t.ARRAY_BUFFER,Gi,t.STATIC_DRAW),e.resolution.flagged||t.uniform2f(t.getUniformLocation(n,"u_resolution"),e.resolution.width,e.resolution.height),e.current=n),e.resolution.flagged&&t.uniform2f(t.getUniformLocation(n,"u_resolution"),e.resolution.width,e.resolution.height),t.bindTexture(t.TEXTURE_2D,this._renderer.texture);const l=this._renderer.rect;return t.uniformMatrix3fv(n.matrix,!1,this._renderer.matrix),t.uniform4f(n.rect,l.left,l.top,l.right,l.bottom),t.drawArrays(t.TRIANGLES,0,6),this._mask&&t.disable(t.STENCIL_TEST),this.flagReset()}},"linear-gradient":{render:function(t,e){if(t.canvas.getContext("2d")&&e){if(this._update(),!this._renderer.effect||this._flagEndPoints||this._flagStops||this._flagUnits){let i,s=this.left._x,n=this.left._y,r=this.right._x,a=this.right._y;/objectBoundingBox/i.test(this._units)&&(i=e.getBoundingClientRect(!0),s=(s-.5)*i.width,n=(n-.5)*i.height,r=(r-.5)*i.width,a=(a-.5)*i.height),this._renderer.effect=t.createLinearGradient(s,n,r,a);for(let t=0;t<this.stops.length;t++){const e=this.stops[t];this._renderer.effect.addColorStop(e._offset,e._color)}}return this.flagReset()}}},"radial-gradient":{render:function(t,e){if(t.canvas.getContext("2d")&&e){if(this._update(),!this._renderer.effect||this._flagCenter||this._flagFocal||this._flagRadius||this._flagStops||this._flagUnits){let i,s=this.center._x,n=this.center._y,r=this.focal._x,a=this.focal._y,h=this._radius;/objectBoundingBox/i.test(this._units)&&(i=e.getBoundingClientRect(!0),s=s*i.width*.5,n=n*i.height*.5,r=r*i.width*.5,a=a*i.height*.5,h*=.5*Math.min(i.width,i.height)),this._renderer.effect=t.createRadialGradient(s,n,0,r,a,h);for(let t=0;t<this.stops.length;t++){const e=this.stops[t];this._renderer.effect.addColorStop(e._offset,e._color)}}return this.flagReset()}}},texture:{render:function(t,e){if(!t.canvas.getContext("2d"))return;this._update();const i=this.image;if((this._flagLoaded||this._flagImage||this._flagVideo||this._flagRepeat)&&this.loaded)this._renderer.effect=t.createPattern(i,this._repeat);else if(!this._renderer.effect)return this.flagReset();return(this._flagOffset||this._flagLoaded||this._flagScale)&&(this._renderer.offset instanceof S||(this._renderer.offset=new S),this._renderer.offset.x=-this._offset.x,this._renderer.offset.y=-this._offset.y,i&&(this._renderer.offset.x+=i.width/2,this._renderer.offset.y+=i.height/2,this._scale instanceof S?(this._renderer.offset.x*=this._scale.x,this._renderer.offset.y*=this._scale.y):(this._renderer.offset.x*=this._scale,this._renderer.offset.y*=this._scale))),(this._flagScale||this._flagLoaded)&&(this._renderer.scale instanceof S||(this._renderer.scale=new S),this._scale instanceof S?this._renderer.scale.copy(this._scale):this._renderer.scale.set(this._scale,this._scale)),this.flagReset()}},updateTexture:function(t,e){if(this[e._renderer.type].updateCanvas.call(Vi,e),this.canvas.width<=0||this.canvas.height<=0)return e._renderer.texture&&t.deleteTexture(e._renderer.texture),void delete e._renderer.texture;e._renderer.texture||(e._renderer.texture=t.createTexture()),t.bindTexture(t.TEXTURE_2D,e._renderer.texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,this.canvas)},program:{create:function(t,e){let i,s,n;if(i=t.createProgram(),X.each(e,(function(e){t.attachShader(i,e)})),t.linkProgram(i),s=t.getProgramParameter(i,t.LINK_STATUS),!s)throw n=t.getProgramInfoLog(i),t.deleteProgram(i),new Tt("unable to link program: "+n);return i}},TextureRegistry:new Mt};Vi.ctx=Vi.canvas.getContext("2d");var Wi=class extends k{constructor(t){let e,i,s,n;if(super(),this.domElement=t.domElement||document.createElement("canvas"),void 0!==t.offscreenElement&&(Vi.canvas=t.offscreenElement,Vi.ctx=Vi.canvas.getContext("2d")),this.scene=new ot,this.scene.parent=this,this._renderer={type:"renderer",matrix:new b(Bi),scale:1,opacity:1},this._flagMatrix=!0,t=X.defaults(t||{},{antialias:!1,alpha:!0,premultipliedAlpha:!0,stencil:!0,preserveDrawingBuffer:!0,overdraw:!1}),this.overdraw=t.overdraw,e=this.ctx=this.domElement.getContext("webgl",t)||this.domElement.getContext("experimental-webgl",t),!this.ctx)throw new Tt("unable to create a webgl context. Try using another renderer.");s=Pi(e,ji.vertex,Li.vertex),n=Pi(e,ji.fragment,Li.fragment),this.programs={current:null,buffers:{position:e.createBuffer()},resolution:{width:0,height:0,ratio:1,flagged:!1}},i=this.programs.path=Vi.program.create(e,[s,n]),this.programs.text=this.programs.path,i.position=e.getAttribLocation(i,"a_position"),i.matrix=e.getUniformLocation(i,"u_matrix"),i.rect=e.getUniformLocation(i,"u_rect");const r=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,r),e.vertexAttribPointer(i.position,2,e.FLOAT,!1,0,0),e.enableVertexAttribArray(i.position),e.bufferData(e.ARRAY_BUFFER,Gi,e.STATIC_DRAW),s=Pi(e,Ii.vertex,Li.vertex),n=Pi(e,Ii.fragment,Li.fragment),i=this.programs.points=Vi.program.create(e,[s,n]),i.position=e.getAttribLocation(i,"a_position"),i.matrix=e.getUniformLocation(i,"u_matrix"),i.size=e.getUniformLocation(i,"u_size"),e.enable(e.BLEND),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ONE,e.ONE_MINUS_SRC_ALPHA)}setSize(t,e,i){let s,n;const r=this.ctx;return this.width=t,this.height=e,this.ratio=void 0===i?W(r):i,this.domElement.width=t*this.ratio,this.domElement.height=e*this.ratio,X.isObject(this.domElement.style)&&X.extend(this.domElement.style,{width:t+"px",height:e+"px"}),this._renderer.matrix[0]=this._renderer.matrix[4]=this._renderer.scale=this.ratio,this._flagMatrix=!0,s=t*this.ratio,n=e*this.ratio,r.viewport(0,0,s,n),this.programs.resolution.width=s,this.programs.resolution.height=n,this.programs.resolution.ratio=this.ratio,this.programs.resolution.flagged=!0,this.trigger(k.Types.resize,t,e,i)}render(){const t=this.ctx;return this.overdraw||t.clear(t.COLOR_BUFFER_BIT),Vi.group.render.call(this.scene,t,this.programs),this._flagMatrix=!1,this.programs.resolution.flagged=!0,this}};h(Wi,"Utils",Vi);var Hi=X.extend({Error:Tt,getRatio:W,read:si,xhr:ni},X,Rt,w,l),Xi=class{constructor(t){h(this,"_events",new k),h(this,"type",""),h(this,"renderer",null),h(this,"scene",null),h(this,"width",0),h(this,"height",0),h(this,"frameCount",0),h(this,"timeDelta",0),h(this,"playing",!1);const e=X.defaults(t||{},{fullscreen:!1,fitted:!1,width:640,height:480,type:Xi.Types.svg,autostart:!1});if(X.each(e,(function(t,e){/fullscreen/i.test(e)||/autostart/i.test(e)||(this[e]=t)}),this),X.isElement(e.domElement)){const t=e.domElement.tagName.toLowerCase();/^(CanvasRenderer-canvas|WebGLRenderer-canvas|SVGRenderer-svg)$/.test(this.type+"-"+t)||(this.type=Xi.Types[t])}this.renderer=new Xi[this.type](this),this.setPlaying(e.autostart),this.frameCount=0,e.fullscreen?(this.fit=Ui.bind(this),this.fit.domElement=window,this.fit.attached=!0,X.extend(document.body.style,{overflow:"hidden",margin:0,padding:0,top:0,left:0,right:0,bottom:0,position:"fixed"}),X.extend(this.renderer.domElement.style,{display:"block",top:0,left:0,right:0,bottom:0,position:"fixed"}),At.bind(this.fit.domElement,"resize",this.fit),this.fit()):e.fitted?(this.fit=qi.bind(this),X.extend(this.renderer.domElement.style,{display:"block"})):X.isElement(e.domElement)||(this.renderer.setSize(e.width,e.height,this.ratio),this.width=e.width,this.height=e.height),this.renderer.bind(k.Types.resize,Ki.bind(this)),this.scene=this.renderer.scene,Xi.Instances.push(this),e.autostart&&Ji.init()}get _bound(){return this._events._bound}set _bound(t){this._events._bound=t}addEventListener(){return this._events.addEventListener.apply(this,arguments)}on(){return this._events.addEventListener.apply(this,arguments)}bind(){return this._events.addEventListener.apply(this,arguments)}removeEventListener(){return this._events.removeEventListener.apply(this,arguments)}off(){return this._events.removeEventListener.apply(this,arguments)}unbind(){return this._events.removeEventListener.apply(this,arguments)}dispatchEvent(){return this._events.dispatchEvent.apply(this,arguments)}trigger(){return this._events.dispatchEvent.apply(this,arguments)}listen(){return this._events.listen.apply(this,arguments)}ignore(){return this._events.ignore.apply(this,arguments)}appendTo(t){return t.appendChild(this.renderer.domElement),this.fit&&(this.fit.domElement!==window&&(this.fit.domElement=t,this.fit.attached=!1),this.update()),this}play(){return this.playing=!0,Ji.init(),this.trigger(k.Types.play)}pause(){return this.playing=!1,this.trigger(k.Types.pause)}setPlaying(t){this.playing=t}release(t){let e,i,s;if(!X.isObject(t))return this.release(this.scene);if("function"==typeof t.unbind&&t.unbind(),t.vertices)for("function"==typeof t.vertices.unbind&&t.vertices.unbind(),e=0;e<t.vertices.length;e++)i=t.vertices[e],"function"==typeof i.unbind&&i.unbind(),i.controls&&(i.controls.left&&"function"==typeof i.controls.left.unbind&&i.controls.left.unbind(),i.controls.right&&"function"==typeof i.controls.right.unbind&&i.controls.right.unbind());if(t.children){for(e=0;e<t.children.length;e++)s=t.children[e],this.release(s);"function"==typeof t.children.unbind&&t.children.unbind()}return t}update(){const t=!!this._lastFrame,e=X.performance.now();t&&(this.timeDelta=parseFloat((e-this._lastFrame).toFixed(3))),this._lastFrame=e,this.fit&&this.fit.domElement&&!this.fit.attached&&(At.bind(this.fit.domElement,"resize",this.fit),this.fit.attached=!0,this.fit());const i=this.width,s=this.height,n=this.renderer;return i===n.width&&s===n.height||n.setSize(i,s,this.ratio),this.trigger(k.Types.update,this.frameCount,this.timeDelta),this.render()}render(){return this.renderer.render(),this.trigger(k.Types.render,this.frameCount++)}add(t){return t instanceof Array||(t=Array.prototype.slice.call(arguments)),this.scene.add(t),this}remove(t){return t instanceof Array||(t=Array.prototype.slice.call(arguments)),this.scene.remove(t),this}clear(){return this.scene.remove(this.scene.children),this}makeLine(t,e,i,s){const n=new Pe(t,e,i,s);return this.scene.add(n),n}makeArrow(t,e,i,s,n){const r="number"==typeof n?n:10,a=Math.atan2(s-e,i-t),h=[new T(t,e,void 0,void 0,void 0,void 0,o.move),new T(i,s,void 0,void 0,void 0,void 0,o.line),new T(i-r*Math.cos(a-Math.PI/4),s-r*Math.sin(a-Math.PI/4),void 0,void 0,void 0,void 0,o.line),new T(i,s,void 0,void 0,void 0,void 0,o.move),new T(i-r*Math.cos(a+Math.PI/4),s-r*Math.sin(a+Math.PI/4),void 0,void 0,void 0,void 0,o.line)],l=new ce(h,!1,!1,!0);return l.noFill(),l.cap="round",l.join="round",this.scene.add(l),l}makeRectangle(t,e,i,s){const n=new ye(t,e,i,s);return this.scene.add(n),n}makeRoundedRectangle(t,e,i,s,n){const r=new Ie(t,e,i,s,n);return this.scene.add(r),r}makeCircle(t,e,i,s){const n=new Se(t,e,i,s);return this.scene.add(n),n}makeEllipse(t,e,i,s,n){const r=new Ce(t,e,i,s,n);return this.scene.add(r),r}makeStar(t,e,i,s,n){const r=new Mi(t,e,i,s,n);return this.scene.add(r),r}makeCurve(t){const e=arguments.length;if(!Array.isArray(t)){t=[];for(let i=0;i<e;i+=2){const e=arguments[i];if("number"!=typeof e)break;const s=arguments[i+1];t.push(new T(e,s))}}const i=arguments[e-1],s=new ce(t,!("boolean"==typeof i?i:void 0),!0),n=s.getBoundingClientRect();return s.center().translation.set(n.left+n.width/2,n.top+n.height/2),this.scene.add(s),s}makePolygon(t,e,i,s){const n=new ki(t,e,i,s);return this.scene.add(n),n}makeArcSegment(t,e,i,s,n,r,a){const h=new ui(t,e,i,s,n,r,a);return this.scene.add(h),h}makePoints(t){const e=arguments.length;let i=t;if(!Array.isArray(t)){i=[];for(let t=0;t<e;t+=2){const e=arguments[t];if("number"!=typeof e)break;const s=arguments[t+1];i.push(new S(e,s))}}const s=new yi(i);return this.scene.add(s),s}makePath(t){const e=arguments.length;let i=t;if(!Array.isArray(t)){i=[];for(let t=0;t<e;t+=2){const e=arguments[t];if("number"!=typeof e)break;const s=arguments[t+1];i.push(new T(e,s))}}const s=arguments[e-1],n=new ce(i,!("boolean"==typeof s?s:void 0)),r=n.getBoundingClientRect();return"number"==typeof r.top&&"number"==typeof r.left&&"number"==typeof r.right&&"number"==typeof r.bottom&&n.center().translation.set(r.left+r.width/2,r.top+r.height/2),this.scene.add(n),n}makeText(t,e,i,s){const n=new Ve(t,e,i,s);return this.add(n),n}makeLinearGradient(t,e,i,s){const n=Array.prototype.slice.call(arguments,4),r=new Wt(t,e,i,s,n);return this.add(r),r}makeRadialGradient(t,e,i){const s=Array.prototype.slice.call(arguments,3),n=new Ut(t,e,i,s);return this.add(n),n}makeSprite(t,e,i,s,n,r,a){const h=new ve(t,e,i,s,n,r);return a&&h.play(),this.add(h),h}makeImageSequence(t,e,i,s,n){const r=new ai(t,e,i,s);return n&&r.play(),this.add(r),r}makeTexture(t,e){return new te(t,e)}makeGroup(t){t instanceof Array||(t=Array.prototype.slice.call(arguments));const e=new ot;return this.scene.add(e),e.add(t),e}interpret(t,e,i){const s=t.tagName.toLowerCase();if(i=void 0===i||i,!(s in si))return null;const n=si[s].call(this,t);return i?this.add(e&&n instanceof ot?n.children:n):n.parent&&n.remove(),n}load(t,e){const i=new ot;let s,n,r;const a=function(t){for(At.temp.innerHTML=t,n=0;n<At.temp.children.length;n++)s=At.temp.children[n],r=this.interpret(s,!1,!1),null!==r&&i.add(r);if("function"==typeof e){const t=At.temp.children.length<=1?At.temp.children[0]:At.temp.children;e(i,t)}}.bind(this);return/\.svg$/i.test(t)?(ni(t,a),i):(a(t),i)}},Yi=Xi;function Ui(){const t=document.body.getBoundingClientRect(),e=this.width=t.width,i=this.height=t.height;this.renderer.setSize(e,i,this.ratio)}function qi(){const t=this.renderer.domElement.parentElement;if(!t)return void console.warn("Two.js: Attempting to fit to parent, but no parent found.");const e=t.getBoundingClientRect(),i=this.width=e.width,s=this.height=e.height;this.renderer.setSize(i,s,this.ratio)}function Ki(t,e){this.width=t,this.height=e,this.trigger(k.Types.resize,t,e)}h(Yi,"nextFrameID",null),h(Yi,"Types",{webgl:"WebGLRenderer",svg:"SVGRenderer",canvas:"CanvasRenderer"}),h(Yi,"Version","v0.8.10"),h(Yi,"PublishDate","2022-06-09T16:09:22.888Z"),h(Yi,"Identifier",O),h(Yi,"Resolution",12),h(Yi,"AutoCalculateImportedMatrices",true),h(Yi,"Instances",[]),h(Yi,"uniqueId",C),h(Yi,"Anchor",T),h(Yi,"Collection",st),h(Yi,"Events",k),h(Yi,"Group",ot),h(Yi,"Matrix",Q),h(Yi,"Path",ce),h(Yi,"Registry",Mt),h(Yi,"Shape",tt),h(Yi,"Text",Ve),h(Yi,"Vector",S),h(Yi,"Gradient",zt),h(Yi,"ImageSequence",ai),h(Yi,"LinearGradient",Wt),h(Yi,"RadialGradient",Ut),h(Yi,"Sprite",ve),h(Yi,"Stop",Lt),h(Yi,"Texture",te),h(Yi,"ArcSegment",ui),h(Yi,"Circle",Se),h(Yi,"Ellipse",Ce),h(Yi,"Line",Pe),h(Yi,"Points",yi),h(Yi,"Polygon",ki),h(Yi,"Rectangle",ye),h(Yi,"RoundedRectangle",Ie),h(Yi,"Star",Mi),h(Yi,"CanvasRenderer",vt),h(Yi,"SVGRenderer",Fi),h(Yi,"WebGLRenderer",Wi),h(Yi,"Commands",o),h(Yi,"Utils",Hi);var Ji=At.getRequestAnimationFrame();function $i(){for(let t=0;t<Yi.Instances.length;t++){const e=Yi.Instances[t];e.playing&&e.update()}Yi.nextFrameID=Ji($i)}Ji.init=function(){$i(),Ji.init=function(){}}},463:(t,e,i)=>{i.d(e,{e:()=>a});var s=i(167),n=i(401),r=i(70);class a extends r.O{controls={left:new r.O,right:new r.O};_command=s.G.move;_relative=!0;_rx=0;_ry=0;_xAxisRotation=0;_largeArcFlag=0;_sweepFlag=1;constructor(t=0,e=0,i=0,r=0,o=0,l=0,c=s.G.move){super(t,e);for(let t in h)Object.defineProperty(this,t,h[t]);this.command=c,this.relative=!0;const f=a.makeBroadcast(this);this.controls.left.set(i,r).addEventListener(n.z.Types.change,f),this.controls.right.set(o,l).addEventListener(n.z.Types.change,f)}static makeBroadcast(t){return function(){t._bound&&t.dispatchEvent(n.z.Types.change)}}copy(t){return this.x=t.x,this.y=t.y,"string"==typeof t.command&&(this.command=t.command),t.controls&&(t.controls.left&&this.controls.left.copy(t.controls.left),t.controls.right&&this.controls.right.copy(t.controls.right)),"boolean"==typeof t.relative&&(this.relative=t.relative),"number"==typeof t.rx&&(this.rx=t.rx),"number"==typeof t.ry&&(this.ry=t.ry),"number"==typeof t.xAxisRotation&&(this.xAxisRotation=t.xAxisRotation),"number"==typeof t.largeArcFlag&&(this.largeArcFlag=t.largeArcFlag),"number"==typeof t.sweepFlag&&(this.sweepFlag=t.sweepFlag),this}clone(){return(new a).copy(this)}toObject(){return{x:this.x,y:this.y,command:this.command,relative:this.relative,controls:{left:this.controls.left.toObject(),right:this.controls.right.toObject()},rx:this.rx,ry:this.ry,xAxisRotation:this.xAxisRotation,largeArcFlag:this.largeArcFlag,sweepFlag:this.sweepFlag}}toString(){return JSON.stringify(this.toObject())}}const h={command:{enumerable:!0,get:function(){return this._command},set:function(t){this._command!==t&&(this._command=t,this._bound&&this.dispatchEvent(n.z.Types.change))}},relative:{enumerable:!0,get:function(){return this._relative},set:function(t){this._relative!==!!t&&(this._relative=!!t,this._bound&&this.dispatchEvent(n.z.Types.change))}},rx:{enumerable:!0,get:function(){return this._rx},set:function(t){this._rx!==t&&(this._rx=t,this._bound&&this.dispatchEvent(n.z.Types.change))}},ry:{enumerable:!0,get:function(){return this._ry},set:function(t){this._ry!==t&&(this._ry=t,this._bound&&this.dispatchEvent(n.z.Types.change))}},xAxisRotation:{enumerable:!0,get:function(){return this._xAxisRotation},set:function(t){this._xAxisRotation!==t&&(this._xAxisRotation=t,this._bound&&this.dispatchEvent(n.z.Types.change))}},largeArcFlag:{enumerable:!0,get:function(){return this._largeArcFlag},set:function(t){this._largeArcFlag!==t&&(this._largeArcFlag=t,this._bound&&this.dispatchEvent(n.z.Types.change))}},sweepFlag:{get:function(){return this._sweepFlag},set:function(t){this._sweepFlag!==t&&(this._sweepFlag=t,this._bound&&this.dispatchEvent(n.z.Types.change))}}}},503:(t,e,i)=>{i.d(e,{F:()=>n});var s=i(401);class n extends Array{_events=new s.z;get _bound(){return this._events._bound}set _bound(t){this._events._bound=t}addEventListener(){return this._events.addEventListener.apply(this,arguments)}on(){return this._events.on.apply(this,arguments)}bind(){return this._events.bind.apply(this,arguments)}removeEventListener(){return this._events.removeEventListener.apply(this,arguments)}off(){return this._events.off.apply(this,arguments)}unbind(){return this._events.unbind.apply(this,arguments)}dispatchEvent(){return this._events.dispatchEvent.apply(this,arguments)}trigger(){return this._events.trigger.apply(this,arguments)}listen(){return this._events.listen.apply(this,arguments)}ignore(){return this._events.ignore.apply(this,arguments)}constructor(){super(),arguments[0]&&Array.isArray(arguments[0])?arguments[0].length>0&&this.push.apply(this,arguments[0]):arguments.length>0&&this.push.apply(this,arguments)}pop(){const t=super.pop.apply(this,arguments);return this.trigger(s.z.Types.remove,[t]),t}shift(){const t=super.shift.apply(this,arguments);return this.trigger(s.z.Types.remove,[t]),t}push(){const t=super.push.apply(this,arguments);return this.trigger(s.z.Types.insert,arguments),t}unshift(){const t=super.unshift.apply(this,arguments);return this.trigger(s.z.Types.insert,arguments),t}splice(){const t=super.splice.apply(this,arguments);if(this.trigger(s.z.Types.remove,t),arguments.length>2){const t=this.slice(arguments[0],arguments[0]+arguments.length-2);this.trigger(s.z.Types.insert,t),this.trigger(s.z.Types.order)}return t}sort(){return super.sort.apply(this,arguments),this.trigger(s.z.Types.order),this}reverse(){return super.reverse.apply(this,arguments),this.trigger(s.z.Types.order),this}indexOf(){return super.indexOf.apply(this,arguments)}}},62:(t,e,i)=>{i.d(e,{g:()=>n});let s=0;const n={nextFrameID:null,Types:{webgl:"WebGLRenderer",svg:"SVGRenderer",canvas:"CanvasRenderer"},Version:"<%= version %>",PublishDate:"<%= publishDate %>",Identifier:"two-",Resolution:12,AutoCalculateImportedMatrices:!0,Instances:[],uniqueId:function(){return s++}}},297:(t,e,i)=>{i.d(e,{p:()=>l});var s=i(503),n=i(401),r=i(405),a=i(890),h=i(62),o=i(251);class l extends r.W{_flagStops=!1;_flagSpread=!1;_flagUnits=!1;_spread="";_units="";constructor(t){super();for(let t in c)Object.defineProperty(this,t,c[t]);this._renderer.type="gradient",this.id=h.g.Identifier+h.g.uniqueId(),this.classList=[],this._renderer.flagStops=f.bind(this),this._renderer.bindStops=d.bind(this),this._renderer.unbindStops=u.bind(this),this.spread="pad",this.units="objectBoundingBox",t&&(this.stops=t)}static Stop=o.d;static Properties=["spread","stops","renderer","units"];clone(t){const e=this.stops.map((function(t){return t.clone()})),i=new l(e);return a._.each(l.Properties,(function(t){i[t]=this[t]}),this),t&&t.add(i),i}toObject(){const t={stops:this.stops.map((function(t){return t.toObject()}))};return a._.each(l.Properties,(function(e){t[e]=this[e]}),this),t}_update(){return(this._flagSpread||this._flagStops)&&this.trigger(n.z.Types.change),this}flagReset(){return this._flagSpread=this._flagUnits=this._flagStops=!1,super.flagReset.call(this),this}}const c={spread:{enumerable:!0,get:function(){return this._spread},set:function(t){this._spread=t,this._flagSpread=!0}},units:{enumerable:!0,get:function(){return this._units},set:function(t){this._units=t,this._flagUnits=!0}},stops:{enumerable:!0,get:function(){return this._stops},set:function(t){const e=this._renderer.bindStops,i=this._renderer.unbindStops;this._stops&&this._stops.unbind(n.z.Types.insert,e).unbind(n.z.Types.remove,i),this._stops=new s.F((t||[]).slice(0)),this._stops.bind(n.z.Types.insert,e).bind(n.z.Types.remove,i),e(this._stops)}}};function f(){this._flagStops=!0}function d(t){let e=t.length;for(;e--;)t[e].bind(n.z.Types.change,this._renderer.flagStops),t[e].parent=this;this._renderer.flagStops()}function u(t){let e=t.length;for(;e--;)t[e].unbind(n.z.Types.change,this._renderer.flagStops),delete t[e].parent;this._renderer.flagStops()}},235:(t,e,i)=>{i.d(e,{o:()=>o});var s=i(401),n=i(890),r=i(251),a=i(297),h=i(70);class o extends a.p{_flagEndPoints=!1;_left=null;_right=null;constructor(t,e,i,s,n){super(n);for(let t in l)Object.defineProperty(this,t,l[t]);this._renderer.type="linear-gradient",this._renderer.flagEndPoints=c.bind(this),this.left=new h.O,this.right=new h.O,"number"==typeof t&&(this.left.x=t),"number"==typeof e&&(this.left.y=e),"number"==typeof i&&(this.right.x=i),"number"==typeof s&&(this.right.y=s)}static Properties=["left","right"];static Stop=r.d;clone(t){const e=this.stops.map((function(t){return t.clone()})),i=new o(this.left._x,this.left._y,this.right._x,this.right._y,e);return n._.each(a.p.Properties,(function(t){i[t]=this[t]}),this),t&&t.add(i),i}toObject(){const t=super.toObject.call(this);return t.left=this.left.toObject(),t.right=this.right.toObject(),t}_update(){return(this._flagEndPoints||this._flagSpread||this._flagStops)&&this.trigger(s.z.Types.change),this}flagReset(){return this._flagEndPoints=!1,super.flagReset.call(this),this}}const l={left:{enumerable:!0,get:function(){return this._left},set:function(t){this._left instanceof h.O&&this._left.unbind(s.z.Types.change,this._renderer.flagEndPoints),this._left=t,this._left.bind(s.z.Types.change,this._renderer.flagEndPoints),this._flagEndPoints=!0}},right:{enumerable:!0,get:function(){return this._right},set:function(t){this._right instanceof h.O&&this._right.unbind(s.z.Types.change,this._renderer.flagEndPoints),this._right=t,this._right.bind(s.z.Types.change,this._renderer.flagEndPoints),this._flagEndPoints=!0}}};function c(){this._flagEndPoints=!0}},559:(t,e,i)=>{i.d(e,{X:()=>o});var s=i(401),n=i(890),r=i(251),a=i(297),h=i(70);class o extends a.p{_flagRadius=!1;_flagCenter=!1;_flagFocal=!1;_radius=0;_center=null;_focal=null;constructor(t,e,i,s,n,r){super(s);for(let t in l)Object.defineProperty(this,t,l[t]);this._renderer.type="radial-gradient",this._renderer.flagCenter=c.bind(this),this._renderer.flagFocal=f.bind(this),this.center=new h.O,this.radius="number"==typeof i?i:1,this.focal=new h.O,"number"==typeof t&&(this.center.x=t),"number"==typeof e&&(this.center.y=e),this.focal.copy(this.center),"number"==typeof n&&(this.focal.x=n),"number"==typeof r&&(this.focal.y=r)}static Stop=r.d;static Properties=["center","radius","focal"];clone(t){const e=this.stops.map((function(t){return t.clone()})),i=new o(this.center._x,this.center._y,this._radius,e,this.focal._x,this.focal._y);return n._.each(a.p.Properties.concat(o.Properties),(function(t){i[t]=this[t]}),this),t&&t.add(i),i}toObject(){const t=super.toObject.call(this);return n._.each(o.Properties,(function(e){t[e]=this[e]}),this),t.center=this.center.toObject(),t.focal=this.focal.toObject(),t}_update(){return(this._flagRadius||this._flatCenter||this._flagFocal||this._flagSpread||this._flagStops)&&this.trigger(s.z.Types.change),this}flagReset(){return this._flagRadius=this._flagCenter=this._flagFocal=!1,super.flagReset.call(this),this}}const l={radius:{enumerable:!0,get:function(){return this._radius},set:function(t){this._radius=t,this._flagRadius=!0}},center:{enumerable:!0,get:function(){return this._center},set:function(t){this._center&&this._center.unbind(s.z.Types.change,this._renderer.flagCenter),this._center=t,this._center.bind(s.z.Types.change,this._renderer.flagCenter),this._flagCenter=!0}},focal:{enumerable:!0,get:function(){return this._focal},set:function(t){this._focal&&this._focal.unbind(s.z.Types.change,this._renderer.flagFocal),this._focal=t,this._focal.bind(s.z.Types.change,this._renderer.flagFocal),this._flagFocal=!0}}};function c(){this._flagCenter=!0}function f(){this._flagFocal=!0}},251:(t,e,i)=>{i.d(e,{d:()=>r});var s=i(890),n=i(405);class r extends n.W{_flagOffset=!0;_flagOpacity=!0;_flagColor=!0;_offset=0;_opacity=1;_color="#fff";constructor(t,e,i){super();for(let t in a)Object.defineProperty(this,t,a[t]);this._renderer.type="stop",this.offset="number"==typeof t?t:r.Index<=0?0:1,this.opacity="number"==typeof i?i:1,this.color="string"==typeof e?e:r.Index<=0?"#fff":"#000",r.Index=(r.Index+1)%2}static Index=0;static Properties=["offset","opacity","color"];clone(t){const e=new r;return s._.each(r.Properties,(function(t){e[t]=this[t]}),this),t&&t.stops&&t.stops.push(e),e}toObject(){const t={};return s._.each(r.Properties,(function(e){t[e]=this[e]}),this),t}flagReset(){return this._flagOffset=this._flagColor=this._flagOpacity=!1,super.flagReset.call(this),this}}const a={offset:{enumerable:!0,get:function(){return this._offset},set:function(t){this._offset=t,this._flagOffset=!0,this.parent&&(this.parent._flagStops=!0)}},opacity:{enumerable:!0,get:function(){return this._opacity},set:function(t){this._opacity=t,this._flagOpacity=!0,this.parent&&(this.parent._flagStops=!0)}},color:{enumerable:!0,get:function(){return this._color},set:function(t){this._color=t,this._flagColor=!0,this.parent&&(this.parent._flagStops=!0)}}}},32:(t,e,i)=>{i.d(e,{x:()=>P});var s=i(109),n=i(401),r=i(405),a=i(538),h=i(167),o=i(337),l=i(129);const c=s.J.devicePixelRatio||1;var f=i(890),d=i(81),u=i(70),g=i(156),_=i(62);const p=new g.y,m=[],y=Math.max,b=Math.min,x=Math.abs,v=Math.sin,w=Math.cos,k=Math.acos,R=Math.sqrt,A={isHidden:/(undefined|none|transparent)/i,alignments:{left:"start",middle:"center",right:"end"},shim:function(t,e){return t.tagName=t.nodeName=e||"canvas",t.nodeType=1,t.getAttribute=function(t){return this[t]},t.setAttribute=function(t,e){return this[t]=e,this},t},group:{renderChild:function(t){A[t._renderer.type].render.call(t,this.ctx,!0,this.clip)},render:function(t){if(!this._visible)return this;this._update();const e=this._matrix.elements,i=this.parent;this._renderer.opacity=this._opacity*(i&&i._renderer?i._renderer.opacity:1);const s=this._mask,n=M(e),r=!n||!!s;if(this._renderer.context||(this._renderer.context={}),this._renderer.context.ctx=t,r&&(t.save(),n||t.transform(e[0],e[3],e[1],e[4],e[2],e[5])),s&&A[s._renderer.type].render.call(s,t,!0),this._opacity>0&&0!==this._scale)for(let e=0;e<this.children.length;e++){const i=this.children[e];A[i._renderer.type].render.call(i,t)}return r&&t.restore(),this.flagReset()}},path:{render:function(t,e,i){let s,n,r,a,l,c,f,d,g,_,p,b,x,v,w,k,R,S,T,E,O,C,F,P,L,j,I,z,B,N,D,G,V,W,H,X,Y,U,q,K,J;if(W=this.parent&&this.parent._renderer?this.parent._renderer.opacity:1,B=this._mask,N=this._clip,l=this._opacity*(W||1),c=this._visible,!e&&(!c||N||0===l))return this;this._update(),s=this._matrix.elements,n=this._stroke,r=this._linewidth,a=this._fill,f=this._cap,d=this._join,g=this._miter,_=this._closed,p=this._renderer.vertices,b=p.length,x=b-1,D=M(s),V=this.dashes,D||(t.save(),t.transform(s[0],s[3],s[1],s[4],s[2],s[5])),B&&A[B._renderer.type].render.call(B,t,!0),a&&("string"==typeof a?t.fillStyle=a:(A[a._renderer.type].render.call(a,t,this),t.fillStyle=a._renderer.effect)),n&&("string"==typeof n?t.strokeStyle=n:(A[n._renderer.type].render.call(n,t,this),t.strokeStyle=n._renderer.effect),r&&(t.lineWidth=r),g&&(t.miterLimit=g),d&&(t.lineJoin=d),!_&&f&&(t.lineCap=f)),"number"==typeof l&&(t.globalAlpha=l),V&&V.length>0&&(t.lineDashOffset=V.offset||0,t.setLineDash(V)),t.beginPath();for(let e=0;e<b;e++)switch(k=p[e],I=k.x,z=k.y,k.command){case h.G.close:t.closePath();break;case h.G.arc:H=k.rx,X=k.ry,Y=k.xAxisRotation,U=k.largeArcFlag,q=k.sweepFlag,v=_?(0,o.YP)(e-1,b):y(e-1,0),w=p[v],K=w.x,J=w.y,A.renderSvgArcCommand(t,K,J,H,X,U,q,Y,I,z);break;case h.G.curve:v=_?(0,o.YP)(e-1,b):Math.max(e-1,0),w=p[v],F=w.controls&&w.controls.right||u.O.zero,P=k.controls&&k.controls.left||u.O.zero,w._relative?(O=F.x+w.x,C=F.y+w.y):(O=F.x,C=F.y),k._relative?(T=P.x+k.x,E=P.y+k.y):(T=P.x,E=P.y),t.bezierCurveTo(O,C,T,E,I,z),e>=x&&_&&(R=S,L=k.controls&&k.controls.right||u.O.zero,j=R.controls&&R.controls.left||u.O.zero,k._relative?(O=L.x+k.x,C=L.y+k.y):(O=L.x,C=L.y),R._relative?(T=j.x+R.x,E=j.y+R.y):(T=j.x,E=j.y),I=R.x,z=R.y,t.bezierCurveTo(O,C,T,E,I,z));break;case h.G.line:t.lineTo(I,z);break;case h.G.move:S=k,t.moveTo(I,z)}return _&&t.closePath(),N||i||(A.isHidden.test(a)||(G=a._renderer&&a._renderer.offset,G&&(t.save(),t.translate(-a._renderer.offset.x,-a._renderer.offset.y),t.scale(a._renderer.scale.x,a._renderer.scale.y)),t.fill(),G&&t.restore()),A.isHidden.test(n)||(G=n._renderer&&n._renderer.offset,G&&(t.save(),t.translate(-n._renderer.offset.x,-n._renderer.offset.y),t.scale(n._renderer.scale.x,n._renderer.scale.y),t.lineWidth=r/n._renderer.scale.x),t.stroke(),G&&t.restore())),D||t.restore(),N&&!i&&t.clip(),V&&V.length>0&&t.setLineDash(m),this.flagReset()}},points:{render:function(t,e,i){let s,n,r,a,h,l,c,f,d,u,g,_,y,b,x,v;if(v=this.parent&&this.parent._renderer?this.parent._renderer.opacity:1,h=this._opacity*(v||1),l=this._visible,!(e||l&&0!==h))return this;this._update(),s=this._matrix.elements,n=this._stroke,r=this._linewidth,a=this._fill,f=this._renderer.collection,d=f.length,y=M(s),x=this.dashes,c=this._size,y||(t.save(),t.transform(s[0],s[3],s[1],s[4],s[2],s[5])),a&&("string"==typeof a?t.fillStyle=a:(A[a._renderer.type].render.call(a,t,this),t.fillStyle=a._renderer.effect)),n&&("string"==typeof n?t.strokeStyle=n:(A[n._renderer.type].render.call(n,t,this),t.strokeStyle=n._renderer.effect),r&&(t.lineWidth=r)),"number"==typeof h&&(t.globalAlpha=h),x&&x.length>0&&(t.lineDashOffset=x.offset||0,t.setLineDash(x)),t.beginPath();let w,k=.5*c;this._sizeAttenuation||((0,o.l6)(this,p),w=p.elements,w=(0,o.cV)(w[0],w[3],w[1],w[4],w[2],w[5]),k/=Math.max(w.scaleX,w.scaleY));for(let e=0;e<d;e++)u=f[e],g=u.x,_=u.y,t.moveTo(g+k,_),t.arc(g,_,k,0,o.uo);return i||(A.isHidden.test(a)||(b=a._renderer&&a._renderer.offset,b&&(t.save(),t.translate(-a._renderer.offset.x,-a._renderer.offset.y),t.scale(a._renderer.scale.x,a._renderer.scale.y)),t.fill(),b&&t.restore()),A.isHidden.test(n)||(b=n._renderer&&n._renderer.offset,b&&(t.save(),t.translate(-n._renderer.offset.x,-n._renderer.offset.y),t.scale(n._renderer.scale.x,n._renderer.scale.y),t.lineWidth=r/n._renderer.scale.x),t.stroke(),b&&t.restore())),y||t.restore(),x&&x.length>0&&t.setLineDash(m),this.flagReset()}},text:{render:function(t,e,i){const s=this.parent&&this.parent._renderer?this.parent._renderer.opacity:1,n=this._opacity*s,r=this._visible,a=this._mask,h=this._clip;if(!e&&(!r||h||0===n))return this;this._update();const o=this._matrix.elements,l=this._stroke,c=this._linewidth,f=this._fill,d=this._decoration,u=M(o),g=f._renderer&&f._renderer.offset&&l._renderer&&l._renderer.offset,_=this.dashes,p=A.alignments[this._alignment]||this._alignment,y=this._baseline;let b,x,v,w,k,R,S,T,E,O,C;if(u||(t.save(),t.transform(o[0],o[3],o[1],o[4],o[2],o[5])),a&&A[a._renderer.type].render.call(a,t,!0),g||(t.font=[this._style,this._weight,this._size+"px/"+this._leading+"px",this._family].join(" ")),t.textAlign=p,t.textBaseline=y,f&&("string"==typeof f?t.fillStyle=f:(A[f._renderer.type].render.call(f,t,this),t.fillStyle=f._renderer.effect)),l&&("string"==typeof l?t.strokeStyle=l:(A[l._renderer.type].render.call(l,t,this),t.strokeStyle=l._renderer.effect),c&&(t.lineWidth=c)),"number"==typeof n&&(t.globalAlpha=n),_&&_.length>0&&(t.lineDashOffset=_.offset||0,t.setLineDash(_)),h||i||(A.isHidden.test(f)||(f._renderer&&f._renderer.offset?(R=f._renderer.scale.x,S=f._renderer.scale.y,t.save(),t.translate(-f._renderer.offset.x,-f._renderer.offset.y),t.scale(R,S),b=this._size/f._renderer.scale.y,x=this._leading/f._renderer.scale.y,t.font=[this._style,this._weight,b+"px/",x+"px",this._family].join(" "),v=f._renderer.offset.x/f._renderer.scale.x,w=f._renderer.offset.y/f._renderer.scale.y,t.fillText(this.value,v,w),t.restore()):t.fillText(this.value,0,0)),A.isHidden.test(l)||(l._renderer&&l._renderer.offset?(R=l._renderer.scale.x,S=l._renderer.scale.y,t.save(),t.translate(-l._renderer.offset.x,-l._renderer.offset.y),t.scale(R,S),b=this._size/l._renderer.scale.y,x=this._leading/l._renderer.scale.y,t.font=[this._style,this._weight,b+"px/",x+"px",this._family].join(" "),v=l._renderer.offset.x/l._renderer.scale.x,w=l._renderer.offset.y/l._renderer.scale.y,k=c/l._renderer.scale.x,t.lineWidth=k,t.strokeText(this.value,v,w),t.restore()):t.strokeText(this.value,0,0))),/(underline|strikethrough)/i.test(d)){const e=t.measureText(this.value);let i=1;switch(d){case"underline":E=e.actualBoundingBoxAscent,C=e.actualBoundingBoxAscent;break;case"strikethrough":E=0,C=0,i=.5}switch(y){case"top":E+=this._size*i,C+=this._size*i;break;case"baseline":case"bottom":E-=this._size*i,C-=this._size*i}switch(p){case"left":case"start":T=0,O=e.width;break;case"right":case"end":T=-e.width,O=0;break;default:T=-e.width/2,O=e.width/2}t.lineWidth=Math.max(Math.floor(this._size/15),1),t.strokeStyle=t.fillStyle,t.beginPath(),t.moveTo(T,E),t.lineTo(O,C),t.stroke()}return u||t.restore(),h&&!i&&t.clip(),_&&_.length>0&&t.setLineDash(m),this.flagReset()}},"linear-gradient":{render:function(t,e){if(e){if(this._update(),!this._renderer.effect||this._flagEndPoints||this._flagStops||this._flagUnits){let i,s=this.left._x,n=this.left._y,r=this.right._x,a=this.right._y;/objectBoundingBox/i.test(this._units)&&(i=e.getBoundingClientRect(!0),s=(s-.5)*i.width,n=(n-.5)*i.height,r=(r-.5)*i.width,a=(a-.5)*i.height),this._renderer.effect=t.createLinearGradient(s,n,r,a);for(let t=0;t<this.stops.length;t++){const e=this.stops[t];this._renderer.effect.addColorStop(e._offset,e._color)}}return this.flagReset()}}},"radial-gradient":{render:function(t,e){if(e){if(this._update(),!this._renderer.effect||this._flagCenter||this._flagFocal||this._flagRadius||this._flagStops||this._flagUnits){let i,s=this.center._x,n=this.center._y,r=this.focal._x,a=this.focal._y,h=this._radius;/objectBoundingBox/i.test(this._units)&&(i=e.getBoundingClientRect(!0),s=s*i.width*.5,n=n*i.height*.5,r=r*i.width*.5,a=a*i.height*.5,h*=.5*Math.min(i.width,i.height)),this._renderer.effect=t.createRadialGradient(s,n,0,r,a,h);for(let t=0;t<this.stops.length;t++){const e=this.stops[t];this._renderer.effect.addColorStop(e._offset,e._color)}}return this.flagReset()}}},texture:{render:function(t){this._update();const e=this.image;return(!this._renderer.effect||(this._flagLoaded||this._flagImage||this._flagVideo||this._flagRepeat)&&this.loaded)&&(this._renderer.effect=t.createPattern(this.image,this._repeat)),(this._flagOffset||this._flagLoaded||this._flagScale)&&(this._renderer.offset instanceof u.O||(this._renderer.offset=new u.O),this._renderer.offset.x=-this._offset.x,this._renderer.offset.y=-this._offset.y,e&&(this._renderer.offset.x+=e.width/2,this._renderer.offset.y+=e.height/2,this._scale instanceof u.O?(this._renderer.offset.x*=this._scale.x,this._renderer.offset.y*=this._scale.y):(this._renderer.offset.x*=this._scale,this._renderer.offset.y*=this._scale))),(this._flagScale||this._flagLoaded)&&(this._renderer.scale instanceof u.O||(this._renderer.scale=new u.O),this._scale instanceof u.O?this._renderer.scale.copy(this._scale):this._renderer.scale.set(this._scale,this._scale)),this.flagReset()}},renderSvgArcCommand:function(t,e,i,s,n,r,a,h,c,f){h=h*Math.PI/180,s=x(s),n=x(n);const d=(e-c)/2,u=(i-f)/2,g=w(h)*d+v(h)*u,p=-v(h)*d+w(h)*u,m=g*g,b=p*p;let k=s*s,A=n*n;const S=m/k+b/A;if(S>1){const t=R(S);k=(s*=t)*s,A=(n*=t)*n}const M=k*b+A*m;let E=R(y(0,(k*A-M)/M));r===a&&(E=-E);const O=E*s*p/n,C=-E*n*g/s,F=w(h)*O-v(h)*C+(e+c)/2,P=v(h)*O+w(h)*C+(i+f)/2,L=T(1,0,(g-O)/s,(p-C)/n);!function(t,e,i,s,n,r,a,h,c){const f=a-r,d=l.Hy.Tolerance.epsilon,u=Math.abs(f)<d;let g=(0,o.YP)(f,o.uo);g<d&&(g=u?0:o.uo),!0!==h||u||(g===o.uo?g=-o.uo:g-=o.uo);for(let a=0;a<_.g.Resolution;a++){const h=r+a/(_.g.Resolution-1)*g;let o=e+s*Math.cos(h),l=i+n*Math.sin(h);if(0!==c){const t=Math.cos(c),s=Math.sin(c),n=o-e,r=l-i;o=n*t-r*s+e,l=n*s+r*t+i}t.lineTo(o,l)}}(t,F,P,s,n,L,L+T((g-O)/s,(p-C)/n,(-g-O)/s,(-p-C)/n)%o.uo,0===a,h)}};class S extends n.z{constructor(t){super();const e=!1!==t.smoothing;this.domElement=t.domElement||document.createElement("canvas"),this.ctx=this.domElement.getContext("2d"),this.overdraw=t.overdraw||!1,void 0!==this.ctx.imageSmoothingEnabled&&(this.ctx.imageSmoothingEnabled=e),this.scene=new d.Group,this.scene.parent=this}static Utils=A;setSize(t,e,i){var s;return this.width=t,this.height=e,this.ratio=void 0===i?(s=this.ctx,c/function(t){return t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1}(s)):i,this.domElement.width=t*this.ratio,this.domElement.height=e*this.ratio,this.domElement.style&&f._.extend(this.domElement.style,{width:t+"px",height:e+"px"}),this.trigger(n.z.Types.resize,t,e,i)}render(){const t=1===this.ratio;return t||(this.ctx.save(),this.ctx.scale(this.ratio,this.ratio)),this.overdraw||this.ctx.clearRect(0,0,this.width,this.height),A.group.render.call(this.scene,this.ctx),t||this.ctx.restore(),this}}function T(t,e,i,s){const n=t*i+e*s,r=R(t*t+e*e)*R(i*i+s*s);let a=k(y(-1,b(1,n/r)));return t*s-e*i<0&&(a=-a),a}function M(t){return 1==t[0]&&0==t[3]&&0==t[1]&&1==t[4]&&0==t[2]&&0==t[5]}const E={Image:null,isHeadless:!1,shim:function(t,e){return S.Utils.shim(t),void 0!==e&&(E.Image=e),E.isHeadless=!0,t}};class O{map={};constructor(){}add(t,e){return this.map[t]=e,this}remove(t){return delete this.map[t],this}get(t){return this.map[t]}contains(t){return t in this.map}}let C;const F={video:/\.(mp4|webm|ogg)$/i,image:/\.(jpe?g|png|gif|tiff|webp)$/i,effect:/texture|gradient/i};s.J.document&&(C=document.createElement("a"));class P extends r.W{_flagSrc=!1;_flagImage=!1;_flagVideo=!1;_flagLoaded=!1;_flagRepeat=!1;_flagOffset=!1;_flagScale=!1;_src="";_image=null;_loaded=!1;_repeat="no-repeat";_scale=1;_offset=null;constructor(t,e){super(),this._renderer={};for(let t in L)Object.defineProperty(this,t,L[t]);if(this._renderer.type="texture",this._renderer.flagOffset=j.bind(this),this._renderer.flagScale=I.bind(this),this.id=_.g.Identifier+_.g.uniqueId(),this.classList=[],this.loaded=!1,this.repeat="no-repeat",this.offset=new u.O,"function"==typeof e){const t=function(){this.unbind(n.z.Types.load,t),"function"==typeof e&&e()}.bind(this);this.bind(n.z.Types.load,t)}if("string"==typeof t)this.src=t;else if("object"==typeof t){const e=Object.prototype.toString.call(t);"[object HTMLImageElement]"!==e&&"[object HTMLCanvasElement]"!==e&&"[object HTMLVideoElement]"!==e&&"[object Image]"!==e||(this.image=t)}this._update()}static Properties=["src","loaded","repeat","scale","offset","image"];static RegularExpressions=F;static ImageRegistry=new O;static getAbsoluteURL(t){return C?(C.href=t,C.href):t}static loadHeadlessBuffer(t,e){t.image.onload=e,t.image.src=t.src}static getTag(t){return t&&t.nodeName&&t.nodeName.toLowerCase()||"img"}static getImage(t){const e=P.getAbsoluteURL(t);if(P.ImageRegistry.contains(e))return P.ImageRegistry.get(e);let i;return E.Image?(i=new E.Image,S.Utils.shim(i,"img")):s.J.document?i=F.video.test(e)?document.createElement("video"):document.createElement("img"):console.warn("Two.js: no prototypical image defined for Two.Texture"),i.crossOrigin="anonymous",i}static Register={canvas:function(t,e){t._src="#"+t.id,P.ImageRegistry.add(t.src,t.image),"function"==typeof e&&e()},img:function(t,e){const i=t.image,s=function(t){!E.isHeadless&&i.removeEventListener&&"function"==typeof i.removeEventListener&&(i.removeEventListener("load",s,!1),i.removeEventListener("error",n,!1)),"function"==typeof e&&e()},n=function(e){throw E.isHeadless||"function"!=typeof i.removeEventListener||(i.removeEventListener("load",s,!1),i.removeEventListener("error",n,!1)),new a.S("unable to load "+t.src)};"number"==typeof i.width&&i.width>0&&"number"==typeof i.height&&i.height>0?s():E.isHeadless||"function"!=typeof i.addEventListener||(i.addEventListener("load",s,!1),i.addEventListener("error",n,!1)),t._src=P.getAbsoluteURL(t._src),!E.isHeadless&&i&&i.getAttribute("two-src")||(E.isHeadless||i.setAttribute("two-src",t.src),P.ImageRegistry.add(t.src,i),E.isHeadless?P.loadHeadlessBuffer(t,s):t.image.src=t.src)},video:function(t,e){if(E.isHeadless)throw new a.S("video textures are not implemented in headless environments.");const i=function(n){t.image.removeEventListener("canplaythrough",i,!1),t.image.removeEventListener("error",s,!1),t.image.width=t.image.videoWidth,t.image.height=t.image.videoHeight,"function"==typeof e&&e()},s=function(e){throw t.image.removeEventListener("canplaythrough",i,!1),t.image.removeEventListener("error",s,!1),new a.S("unable to load "+t.src)};t._src=P.getAbsoluteURL(t._src),t.image.getAttribute("two-src")||(t.image.setAttribute("two-src",t.src),P.ImageRegistry.add(t.src,t.image)),t.image.readyState>=4?i():(t.image.addEventListener("canplaythrough",i,!1),t.image.addEventListener("error",s,!1),t.image.src=t.src,t.image.load())}};static load(t,e){let i=t.image,s=P.getTag(i);t._flagImage&&(/canvas/i.test(s)?P.Register.canvas(t,e):(t._src=!E.isHeadless&&i.getAttribute("two-src")||i.src,P.Register[s](t,e))),t._flagSrc&&(i||(i=P.getImage(t.src),t.image=i),s=P.getTag(i),P.Register[s](t,e))}clone(){const t=new P(this.src);return t.repeat=this.repeat,t.offset.copy(this.origin),t.scale=this.scale,t}toObject(){return{src:this.src,repeat:this.repeat,origin:this.origin.toObject(),scale:"number"==typeof this.scale?this.scale:this.scale.toObject()}}_update(){return(this._flagSrc||this._flagImage)&&(this.trigger(n.z.Types.change),(this._flagSrc||this._flagImage)&&(this.loaded=!1,P.load(this,function(){this.loaded=!0,this.trigger(n.z.Types.change).trigger(n.z.Types.load)}.bind(this)))),this._image&&this._image.readyState>=4&&(this._flagVideo=!0),this}flagReset(){return this._flagSrc=this._flagImage=this._flagLoaded=this._flagRepeat=this._flagVideo=this._flagScale=this._flagOffset=!1,super.flagReset.call(this),this}}const L={src:{enumerable:!0,get:function(){return this._src},set:function(t){this._src=t,this._flagSrc=!0}},loaded:{enumerable:!0,get:function(){return this._loaded},set:function(t){this._loaded=t,this._flagLoaded=!0}},repeat:{enumerable:!0,get:function(){return this._repeat},set:function(t){this._repeat=t,this._flagRepeat=!0}},image:{enumerable:!0,get:function(){return this._image},set:function(t){let e;e="canvas"===P.getTag(t)?"#"+t.id:t.src,P.ImageRegistry.contains(e)?this._image=P.ImageRegistry.get(t.src):this._image=t,this._flagImage=!0}},offset:{enumerable:!0,get:function(){return this._offset},set:function(t){this._offset&&this._offset.unbind(n.z.Types.change,this._renderer.flagOffset),this._offset=t,this._offset.bind(n.z.Types.change,this._renderer.flagOffset),this._flagOffset=!0}},scale:{enumerable:!0,get:function(){return this._scale},set:function(t){this._scale instanceof u.O&&this._scale.unbind(n.z.Types.change,this._renderer.flagScale),this._scale=t,this._scale instanceof u.O&&this._scale.bind(n.z.Types.change,this._renderer.flagScale),this._flagScale=!0}}};function j(){this._flagOffset=!0}function I(){this._flagScale=!0}},405:(t,e,i)=>{i.d(e,{W:()=>n});var s=i(401);class n extends s.z{_flagId=!1;_flagClassName=!1;_renderer={};_id="";_className="";classList=[];constructor(){super();for(let t in r)Object.defineProperty(this,t,r[t])}flagReset(){this._flagId=this._flagClassName=!1}}const r={renderer:{enumerable:!1,get:function(){return this._renderer}},id:{enumerable:!0,get:function(){return this._id},set:function(t){const e=this._id;t!==this._id&&(this._id=t,this._flagId=!0,this.parent&&(delete this.parent.children.ids[e],this.parent.children.ids[this._id]=this))}},className:{enumerable:!0,get:function(){return this._className},set:function(t){this._className!==t&&(this._flagClassName=!0,this.classList=t.split(/\s+?/),this._className=t)}}}},401:(t,e,i)=>{i.d(e,{z:()=>s});class s{_events={};_bound=!1;constructor(){}addEventListener(t,e){return(this._events[t]||(this._events[t]=[])).push(e),this._bound=!0,this}on(){return this.addEventListener.apply(this,arguments)}bind(){return this.addEventListener.apply(this,arguments)}removeEventListener(t,e){if(!this._events)return this;if(!t&&!e)return this._events={},this._bound=!1,this;const i=t?[t]:Object.keys(this._events);for(let s=0,n=i.length;s<n;s++){t=i[s];let n=this._events[t];if(n){let i=[];if(e)for(let t=0,s=n.length;t<s;t++){let s=n[t];s=s.handler?s.handler:s,e!==s&&i.push(s)}this._events[t]=i}}return this}off(){return this.removeEventListener.apply(this,arguments)}unbind(){return this.removeEventListener.apply(this,arguments)}dispatchEvent(t){if(!this._events)return this;const e=Array.prototype.slice.call(arguments,1),i=this._events[t];if(i)for(let t=0;t<i.length;t++)i[t].call(this,...e);return this}trigger(){return this.dispatchEvent.apply(this,arguments)}listen(t,e,i){const s=this;function n(){i.apply(s,arguments)}return t&&(n.obj=t,n.name=e,n.handler=i,t.on(e,n)),s}ignore(t,e,i){return t.off(e,i),this}static Types={play:"play",pause:"pause",update:"update",render:"render",resize:"resize",change:"change",remove:"remove",insert:"insert",order:"order",load:"load"};static Methods=["addEventListener","on","removeEventListener","off","unbind","dispatchEvent","trigger","listen","ignore"]}},81:(t,e,i)=>{i.r(e),i.d(e,{Group:()=>d});var s=i(401),n=i(337),r=i(890),a=i(70),h=i(665),o=i(503);class l extends o.F{ids={};constructor(t){super(t=Array.isArray(t)?t:Array.prototype.slice.call(arguments)),this.attach(t),this.on(s.z.Types.insert,this.attach),this.on(s.z.Types.remove,this.detach)}attach(t){for(let e=0;e<t.length;e++){const i=t[e];i&&i.id&&(this.ids[i.id]=i)}return this}detach(t){for(let e=0;e<t.length;e++)delete this.ids[t[e].id];return this}}const c=Math.min,f=Math.max;class d extends h.b{_flagAdditions=!1;_flagSubtractions=!1;_flagOrder=!1;_flagOpacity=!0;_flagBeginning=!1;_flagEnding=!1;_flagLength=!1;_flagMask=!1;_fill="#fff";_stroke="#000";_linewidth=1;_opacity=1;_visible=!0;_cap="round";_join="round";_miter=4;_closed=!0;_curved=!1;_automatic=!0;_beginning=0;_ending=1;_length=0;_mask=null;constructor(t){super();for(let t in u)Object.defineProperty(this,t,u[t]);this._renderer.type="group",this.additions=[],this.subtractions=[],this.children=Array.isArray(t)?t:Array.prototype.slice.call(arguments)}static Children=l;static InsertChildren(t){for(let e=0;e<t.length;e++)g.call(this,t[e],this)}static RemoveChildren(t){for(let e=0;e<t.length;e++)g.call(this,t[e])}static OrderChildren(t){this._flagOrder=!0}static Properties=["fill","stroke","linewidth","cap","join","miter","closed","curved","automatic"];clone(t){const e=new d,i=this.children.map((function(t){return t.clone()}));return e.add(i),e.opacity=this.opacity,this.mask&&(e.mask=this.mask),e.translation.copy(this.translation),e.rotation=this.rotation,e.scale=this.scale,e.className=this.className,this.matrix.manual&&e.matrix.copy(this.matrix),t&&t.add(e),e._update()}toObject(){const t={children:[],translation:this.translation.toObject(),rotation:this.rotation,scale:this.scale instanceof a.O?this.scale.toObject():this.scale,opacity:this.opacity,className:this.className,mask:this.mask?this.mask.toObject():null};return this.matrix.manual&&(t.matrix=this.matrix.toObject()),r._.each(this.children,(function(e,i){t.children[i]=e.toObject()}),this),t}corner(){const t=this.getBoundingClientRect(!0);for(let e=0;e<this.children.length;e++){const i=this.children[e];i.translation.x-=t.left,i.translation.y-=t.top}return this.mask&&(this.mask.translation.x-=t.left,this.mask.translation.y-=t.top),this}center(){const t=this.getBoundingClientRect(!0),e=t.left+t.width/2-this.translation.x,i=t.top+t.height/2-this.translation.y;for(let t=0;t<this.children.length;t++){const s=this.children[t];s.isShape&&(s.translation.x-=e,s.translation.y-=i)}return this.mask&&(this.mask.translation.x-=e,this.mask.translation.y-=i),this}getById(t){let e=null;return function i(s){if(s.id===t)return s;if(s.children)for(let t=0;t<s.children.length;t++)if(e=i(s.children[t]),e)return e;return null}(this)}getByClassName(t){const e=[];return function i(s){if(Array.prototype.indexOf.call(s.classList,t)>=0&&e.push(s),s.children)for(let t=0;t<s.children.length;t++)i(s.children[t]);return e}(this)}getByType(t){const e=[];return function i(s){if(s instanceof t&&e.push(s),s.children)for(let t=0;t<s.children.length;t++)i(s.children[t]);return e}(this)}add(t){t=t instanceof Array?t.slice():Array.prototype.slice.call(arguments);for(let e=0;e<t.length;e++){const i=t[e];if(!i||!i.id)continue;const s=Array.prototype.indexOf.call(this.children,i);s>=0&&this.children.splice(s,1),this.children.push(i)}return this}remove(t){const e=arguments.length,i=this.parent;if(e<=0&&i)return i.remove(this),this;t=t instanceof Array?t.slice():Array.prototype.slice.call(arguments);for(let e=0;e<t.length;e++){const i=t[e];if(!i||!this.children.ids[i.id])continue;const s=this.children.indexOf(i);s>=0&&this.children.splice(s,1)}return this}getBoundingClientRect(t){let e,i,s,a,h,o,l,d,u,g;this._update(!0);let _=1/0,p=-1/0,m=1/0,y=-1/0;const b=/texture|gradient/i;i=t?this._matrix:(0,n.l6)(this);for(let i=0;i<this.children.length;i++){const s=this.children[i];s.visible&&!b.test(s._renderer.type)&&(e=s.getBoundingClientRect(t),l="number"!=typeof e.top||r._.isNaN(e.top)||!isFinite(e.top),d="number"!=typeof e.left||r._.isNaN(e.left)||!isFinite(e.left),u="number"!=typeof e.right||r._.isNaN(e.right)||!isFinite(e.right),g="number"!=typeof e.bottom||r._.isNaN(e.bottom)||!isFinite(e.bottom),l||d||u||g||(m=c(e.top,m),_=c(e.left,_),p=f(e.right,p),y=f(e.bottom,y)))}return t&&(s=i.multiply(_,m,1),a=i.multiply(_,y,1),h=i.multiply(p,m,1),o=i.multiply(p,y,1),m=c(s.y,a.y,h.y,o.y),_=c(s.x,a.x,h.x,o.x),p=f(s.x,a.x,h.x,o.x),y=f(s.y,a.y,h.y,o.y)),{top:m,left:_,right:p,bottom:y,width:p-_,height:y-m}}noFill(){return this.children.forEach((function(t){t.noFill()})),this}noStroke(){return this.children.forEach((function(t){t.noStroke()})),this}subdivide(){const t=arguments;return this.children.forEach((function(e){e.subdivide.apply(e,t)})),this}_update(){let t,e,i;if(this._flagBeginning||this._flagEnding){const s=Math.min(this._beginning,this._ending),n=Math.max(this._beginning,this._ending),r=this.length;let a=0;const h=s*r,o=n*r;for(t=0;t<this.children.length;t++)i=this.children[t],e=i.length,h>a+e?(i.beginning=1,i.ending=1):o<a?(i.beginning=0,i.ending=0):h>a&&h<a+e?(i.beginning=(h-a)/e,i.ending=1):o>a&&o<a+e?(i.beginning=0,i.ending=(o-a)/e):(i.beginning=0,i.ending=1),a+=e}return super._update.apply(this,arguments)}flagReset(){return this._flagAdditions&&(this.additions.length=0,this._flagAdditions=!1),this._flagSubtractions&&(this.subtractions.length=0,this._flagSubtractions=!1),this._flagOrder=this._flagMask=this._flagOpacity=this._flagBeginning=this._flagEnding=!1,super.flagReset.call(this),this}}const u={visible:{enumerable:!0,get:function(){return this._visible},set:function(t){this._flagVisible=this._visible!==t||this._flagVisible,this._visible=t}},opacity:{enumerable:!0,get:function(){return this._opacity},set:function(t){this._flagOpacity=this._opacity!==t||this._flagOpacity,this._opacity=t}},beginning:{enumerable:!0,get:function(){return this._beginning},set:function(t){this._flagBeginning=this._beginning!==t||this._flagBeginning,this._beginning=t}},ending:{enumerable:!0,get:function(){return this._ending},set:function(t){this._flagEnding=this._ending!==t||this._flagEnding,this._ending=t}},length:{enumerable:!0,get:function(){if(this._flagLength||this._length<=0){if(this._length=0,!this.children)return this._length;for(let t=0;t<this.children.length;t++){const e=this.children[t];this._length+=e.length}}return this._length}},fill:{enumerable:!0,get:function(){return this._fill},set:function(t){this._fill=t;for(let e=0;e<this.children.length;e++)this.children[e].fill=t}},stroke:{enumerable:!0,get:function(){return this._stroke},set:function(t){this._stroke=t;for(let e=0;e<this.children.length;e++)this.children[e].stroke=t}},linewidth:{enumerable:!0,get:function(){return this._linewidth},set:function(t){this._linewidth=t;for(let e=0;e<this.children.length;e++)this.children[e].linewidth=t}},join:{enumerable:!0,get:function(){return this._join},set:function(t){this._join=t;for(let e=0;e<this.children.length;e++)this.children[e].join=t}},miter:{enumerable:!0,get:function(){return this._miter},set:function(t){this._miter=t;for(let e=0;e<this.children.length;e++)this.children[e].miter=t}},cap:{enumerable:!0,get:function(){return this._cap},set:function(t){this._cap=t;for(let e=0;e<this.children.length;e++)this.children[e].cap=t}},closed:{enumerable:!0,get:function(){return this._closed},set:function(t){this._closed=t;for(let e=0;e<this.children.length;e++)this.children[e].closed=t}},curved:{enumerable:!0,get:function(){return this._curved},set:function(t){this._curved=t;for(let e=0;e<this.children.length;e++)this.children[e].curved=t}},automatic:{enumerable:!0,get:function(){return this._automatic},set:function(t){this._automatic=t;for(let e=0;e<this.children.length;e++)this.children[e].automatic=t}},children:{enumerable:!0,get:function(){return this._children},set:function(t){const e=d.InsertChildren.bind(this),i=d.RemoveChildren.bind(this),n=d.OrderChildren.bind(this);this._children&&(this._children.unbind(),this._children.length>0&&i(this._children)),this._children=new l(t),this._children.bind(s.z.Types.insert,e),this._children.bind(s.z.Types.remove,i),this._children.bind(s.z.Types.order,n),t.length>0&&e(t)}},mask:{enumerable:!0,get:function(){return this._mask},set:function(t){this._mask=t,this._flagMask=!0,r._.isObject(t)&&!t.clip&&(t.clip=!0)}}};function g(t,e){const i=t.parent;let s;function n(){e.subtractions.length>0&&(s=Array.prototype.indexOf.call(e.subtractions,t),s>=0&&e.subtractions.splice(s,1)),e.additions.length>0&&(s=Array.prototype.indexOf.call(e.additions,t),s>=0&&e.additions.splice(s,1)),t.parent=e,e.additions.push(t),e._flagAdditions=!0}function r(){s=Array.prototype.indexOf.call(i.additions,t),s>=0&&i.additions.splice(s,1),s=Array.prototype.indexOf.call(i.subtractions,t),s<0&&(i.subtractions.push(t),i._flagSubtractions=!0)}i!==e?(i&&i.children.ids[t.id]&&(s=Array.prototype.indexOf.call(i.children,t),i.children.splice(s,1),r()),e?n():(r(),i._flagAdditions&&0===i.additions.length&&(i._flagAdditions=!1),i._flagSubtractions&&0===i.subtractions.length&&(i._flagSubtractions=!1),delete t.parent)):n()}},156:(t,e,i)=>{i.d(e,{y:()=>l});var s=i(337),n=i(401);const r=Math.cos,a=Math.sin,h=Math.tan,o=[];class l extends n.z{elements=new s.wQ(9);manual=!1;constructor(t,e,i,s,n,r){super();let a=t;Array.isArray(a)||(a=Array.prototype.slice.call(arguments)),this.identity(),a.length>0&&this.set(a)}static Identity=[1,0,0,0,1,0,0,0,1];static Multiply(t,e,i){if(e.length<=3){const i=t;let s,n,r;const a=e[0]||0,h=e[1]||0,o=e[2]||0;return s=i[0]*a+i[1]*h+i[2]*o,n=i[3]*a+i[4]*h+i[5]*o,r=i[6]*a+i[7]*h+i[8]*o,{x:s,y:n,z:r}}const n=t[0],r=t[1],a=t[2],h=t[3],o=t[4],l=t[5],c=t[6],f=t[7],d=t[8],u=e[0],g=e[1],_=e[2],p=e[3],m=e[4],y=e[5],b=e[6],x=e[7],v=e[8];return(i=i||new s.wQ(9))[0]=n*u+r*p+a*b,i[1]=n*g+r*m+a*x,i[2]=n*_+r*y+a*v,i[3]=h*u+o*p+l*b,i[4]=h*g+o*m+l*x,i[5]=h*_+o*y+l*v,i[6]=c*u+f*p+d*b,i[7]=c*g+f*m+d*x,i[8]=c*_+f*y+d*v,i}set(t,e,i,s,r,a,h,o,l){if(void 0===e){const n=t;t=n[0],e=n[1],i=n[2],s=n[3],r=n[4],a=n[5],h=n[6],o=n[7],l=n[8]}return this.elements[0]=t,this.elements[1]=e,this.elements[2]=i,this.elements[3]=s,this.elements[4]=r,this.elements[5]=a,this.elements[6]=h,this.elements[7]=o,this.elements[8]=l,this.trigger(n.z.Types.change)}copy(t){return this.elements[0]=t.elements[0],this.elements[1]=t.elements[1],this.elements[2]=t.elements[2],this.elements[3]=t.elements[3],this.elements[4]=t.elements[4],this.elements[5]=t.elements[5],this.elements[6]=t.elements[6],this.elements[7]=t.elements[7],this.elements[8]=t.elements[8],this.manual=t.manual,this.trigger(n.z.Types.change)}identity(){return this.elements[0]=l.Identity[0],this.elements[1]=l.Identity[1],this.elements[2]=l.Identity[2],this.elements[3]=l.Identity[3],this.elements[4]=l.Identity[4],this.elements[5]=l.Identity[5],this.elements[6]=l.Identity[6],this.elements[7]=l.Identity[7],this.elements[8]=l.Identity[8],this.trigger(n.z.Types.change)}multiply(t,e,i,s,r,a,h,o,l){if(void 0===e)return this.elements[0]*=t,this.elements[1]*=t,this.elements[2]*=t,this.elements[3]*=t,this.elements[4]*=t,this.elements[5]*=t,this.elements[6]*=t,this.elements[7]*=t,this.elements[8]*=t,this.trigger(n.z.Types.change);if(void 0===s)return t=t||0,e=e||0,i=i||0,{x:(r=this.elements)[0]*t+r[1]*e+r[2]*i,y:r[3]*t+r[4]*e+r[5]*i,z:r[6]*t+r[7]*e+r[8]*i};const c=this.elements,f=[t,e,i,s,r,a,h,o,l],d=c[0],u=c[1],g=c[2],_=c[3],p=c[4],m=c[5],y=c[6],b=c[7],x=c[8],v=f[0],w=f[1],k=f[2],R=f[3],A=f[4],S=f[5],T=f[6],M=f[7],E=f[8];return this.elements[0]=d*v+u*R+g*T,this.elements[1]=d*w+u*A+g*M,this.elements[2]=d*k+u*S+g*E,this.elements[3]=_*v+p*R+m*T,this.elements[4]=_*w+p*A+m*M,this.elements[5]=_*k+p*S+m*E,this.elements[6]=y*v+b*R+x*T,this.elements[7]=y*w+b*A+x*M,this.elements[8]=y*k+b*S+x*E,this.trigger(n.z.Types.change)}inverse(t){const e=this.elements;t=t||new l;const i=e[0],s=e[1],n=e[2],r=e[3],a=e[4],h=e[5],o=e[6],c=e[7],f=e[8],d=f*a-h*c,u=-f*r+h*o,g=c*r-a*o;let _=i*d+s*u+n*g;return _?(_=1/_,t.elements[0]=d*_,t.elements[1]=(-f*s+n*c)*_,t.elements[2]=(h*s-n*a)*_,t.elements[3]=u*_,t.elements[4]=(f*i-n*o)*_,t.elements[5]=(-h*i+n*r)*_,t.elements[6]=g*_,t.elements[7]=(-c*i+s*o)*_,t.elements[8]=(a*i-s*r)*_,t):null}scale(t,e){return arguments.length<=1&&(e=t),this.multiply(t,0,0,0,e,0,0,0,1)}rotate(t){const e=r(t),i=a(t);return this.multiply(e,-i,0,i,e,0,0,0,1)}translate(t,e){return this.multiply(1,0,t,0,1,e,0,0,1)}skewX(t){const e=h(t);return this.multiply(1,e,0,0,1,0,0,0,1)}skewY(t){const e=h(t);return this.multiply(1,0,0,e,1,0,0,0,1)}toString(t){return o.length=0,this.toTransformArray(t,o),o.map(s.FH).join(" ")}toTransformArray(t,e){const i=this.elements,s=!!e,n=i[0],r=i[1],a=i[2],h=i[3],o=i[4],l=i[5];if(t){const t=i[6],c=i[7],f=i[8];return s?(e[0]=n,e[1]=h,e[2]=t,e[3]=r,e[4]=o,e[5]=c,e[6]=a,e[7]=l,void(e[8]=f)):[n,h,t,r,o,c,a,l,f]}return s?(e[0]=n,e[1]=h,e[2]=r,e[3]=o,e[4]=a,void(e[5]=l)):[n,h,r,o,a,l]}toArray(t,e){const i=this.elements,s=!!e,n=i[0],r=i[1],a=i[2],h=i[3],o=i[4],l=i[5];if(t){const t=i[6],c=i[7],f=i[8];return s?(e[0]=n,e[1]=r,e[2]=a,e[3]=h,e[4]=o,e[5]=l,e[6]=t,e[7]=c,void(e[8]=f)):[n,r,a,h,o,l,t,c,f]}return s?(e[0]=n,e[1]=r,e[2]=a,e[3]=h,e[4]=o,void(e[5]=l)):[n,r,a,h,o,l]}toObject(){return{elements:this.toArray(!0),manual:!!this.manual}}clone(){return(new l).copy(this)}}(0,s.M6)(l)},915:(t,e,i)=>{i.d(e,{y$:()=>A});var s=i(167),n=i(503),r=i(337),a=i(129);function h(t,e){if(0===e||1===e)return!0;const i=t._length*e;let s=0;for(let e=0;e<t._lengths.length;e++){const n=t._lengths[e];if(s>=i)return i-s>=0;s+=n}return!1}function o(t,e){const i=t._length;if(e<=0)return 0;if(e>=i)return t._lengths.length-1;for(let i=0,s=0;i<t._lengths.length;i++){if(s+t._lengths[i]>=e)return e-=s,Math.max(i-1,0)+e/t._lengths[i];s+=t._lengths[i]}return-1}function l(t,e,i){let s,n,r,h,o,l,c,f;const d=e.controls&&e.controls.right,u=t.controls&&t.controls.left;return s=e.x,o=e.y,n=(d||e).x,l=(d||e).y,r=(u||t).x,c=(u||t).y,h=t.x,f=t.y,d&&e._relative&&(n+=e.x,l+=e.y),u&&t._relative&&(r+=t.x,c+=t.y),(0,a.Um)(s,o,n,l,r,c,h,f,i)}function c(t,e,i){let s,n,r,h,o,l,c,f;const d=e.controls&&e.controls.right,u=t.controls&&t.controls.left;return s=e.x,o=e.y,n=(d||e).x,l=(d||e).y,r=(u||t).x,c=(u||t).y,h=t.x,f=t.y,d&&e._relative&&(n+=e.x,l+=e.y),u&&t._relative&&(r+=t.x,c+=t.y),(0,a.Js)(s,o,n,l,r,c,h,f,i)}var f=i(890),d=i(665),u=i(401),g=i(70),_=i(463),p=i(297),m=i(235),y=i(559),b=i(32);const x=Math.min,v=Math.max,w=Math.ceil,k=Math.floor,R=new g.O;class A extends d.b{_flagVertices=!0;_flagLength=!0;_flagFill=!0;_flagStroke=!0;_flagLinewidth=!0;_flagOpacity=!0;_flagVisible=!0;_flagCap=!0;_flagJoin=!0;_flagMiter=!0;_flagMask=!1;_flagClip=!1;_length=0;_fill="#fff";_stroke="#000";_linewidth=1;_opacity=1;_visible=!0;_cap="round";_join="round";_miter=4;_closed=!0;_curved=!1;_automatic=!0;_beginning=0;_ending=1;_mask=null;_clip=!1;_dashes=null;constructor(t,e,i,s){super();for(let t in S)Object.defineProperty(this,t,S[t]);this._renderer.type="path",this._renderer.flagVertices=T.bind(this),this._renderer.bindVertices=M.bind(this),this._renderer.unbindVertices=E.bind(this),this._renderer.flagFill=O.bind(this),this._renderer.flagStroke=C.bind(this),this._renderer.vertices=[],this._renderer.collection=[],this.closed=!!e,this.curved=!!i,this.beginning=0,this.ending=1,this.fill="#fff",this.stroke="#000",this.linewidth=1,this.opacity=1,this.className="",this.visible=!0,this.cap="butt",this.join="miter",this.miter=4,this.vertices=t,this.automatic=!s,this.dashes=[],this.dashes.offset=0}static Properties=["fill","stroke","linewidth","opacity","visible","cap","join","miter","closed","curved","automatic","beginning","ending"];static Utils={getCurveLength:l};clone(t){const e=new A;for(let t=0;t<this.vertices.length;t++)e.vertices.push(this.vertices[t].clone());for(let t=0;t<A.Properties.length;t++){const i=A.Properties[t];e[i]=this[i]}return e.className=this.className,e.translation.copy(this.translation),e.rotation=this.rotation,e.scale=this.scale,e.skewX=this.skewX,e.skewY=this.skewY,this.matrix.manual&&e.matrix.copy(this.matrix),t&&t.add(e),e._update()}toObject(){const t={vertices:this.vertices.map((function(t){return t.toObject()}))};return f._.each(A.Properties,(function(e){void 0!==this[e]&&(this[e].toObject?t[e]=this[e].toObject():t[e]=this[e])}),this),t.className=this.className,t.translation=this.translation.toObject(),t.rotation=this.rotation,t.scale=this.scale instanceof g.O?this.scale.toObject():this.scale,t.skewX=this.skewX,t.skewY=this.skewY,this.matrix.manual&&(t.matrix=this.matrix.toObject()),t}noFill(){return this.fill="transparent",this}noStroke(){return this.stroke=void 0,this}corner(){const t=this.getBoundingClientRect(!0),e=t.width/2,i=t.height/2,s=t.left+t.width/2,n=t.top+t.height/2;for(let t=0;t<this.vertices.length;t++){const r=this.vertices[t];r.x-=s,r.y-=n,r.x+=e,r.y+=i}return this.mask&&(this.mask.translation.x-=s,this.mask.translation.x+=e,this.mask.translation.y-=n,this.mask.translation.y+=i),this}center(){const t=this.getBoundingClientRect(!0),e=t.left+t.width/2-this.translation.x,i=t.top+t.height/2-this.translation.y;for(let t=0;t<this.vertices.length;t++){const s=this.vertices[t];s.x-=e,s.y-=i}return this.mask&&(this.mask.translation.x-=e,this.mask.translation.y-=i),this}getBoundingClientRect(t){let e,i,s,n,h,o,l,c,f,d,u,g,_,p,m=1/0,y=-1/0,b=1/0,w=-1/0;if(this._update(!0),e=t?this._matrix:(0,r.l6)(this),i=(this.linewidth||0)/2,s=this._renderer.vertices.length,s<=0)return{width:0,height:0};for(n=0;n<s;n++)if(o=this._renderer.vertices[n],h=this._renderer.vertices[(n+s-1)%s],h.controls&&o.controls){l=h.controls.right.x,c=h.controls.right.y,h.relative&&(l+=h.x,c+=h.y),f=o.controls.left.x,d=o.controls.left.y,o.relative&&(f+=o.x,d+=o.y);const t=(0,a.eY)(h.x,h.y,l,c,f,d,o.x,o.y);b=x(t.min.y-i,b),m=x(t.min.x-i,m),y=v(t.max.x+i,y),w=v(t.max.y+i,w)}else n<=1&&(b=x(h.y-i,b),m=x(h.x-i,m),y=v(h.x+i,y),w=v(h.y+i,w)),b=x(o.y-i,b),m=x(o.x-i,m),y=v(o.x+i,y),w=v(o.y+i,w);return u=e.multiply(m,b,1),g=e.multiply(m,w,1),_=e.multiply(y,b,1),p=e.multiply(y,w,1),b=x(u.y,g.y,_.y,p.y),m=x(u.x,g.x,_.x,p.x),y=v(u.x,g.x,_.x,p.x),w=v(u.y,g.y,_.y,p.y),{top:b,left:m,right:y,bottom:w,width:y-m,height:w-b}}getPointAt(t,e){let i,n,h,o,l,c,d,u,g,p,m,y,b,x,v,w=this.length*Math.min(Math.max(t,0),1);const k=this.vertices.length,R=k-1;let A=null,S=null;for(let e=0,s=this._lengths.length,a=0;e<s;e++){if(a+this._lengths[e]>=w){this._closed?(i=(0,r.YP)(e,k),n=(0,r.YP)(e-1,k),0===e&&(i=n,n=e)):(i=e,n=Math.min(Math.max(e-1,0),R)),A=this.vertices[i],S=this.vertices[n],w-=a,t=0!==this._lengths[e]?w/this._lengths[e]:0;break}a+=this._lengths[e]}if(null===A||null===S)return null;if(!A)return S;if(!S)return A;v=S.controls&&S.controls.right,x=A.controls&&A.controls.left,l=S.x,p=S.y,c=(v||S).x,m=(v||S).y,d=(x||A).x,y=(x||A).y,u=A.x,b=A.y,v&&S.relative&&(c+=S.x,m+=S.y),x&&A.relative&&(d+=A.x,y+=A.y),o=(0,a.NW)(t,l,c,d,u),g=(0,a.NW)(t,p,m,y,b);const T=(0,r.t7)(l,c,t),M=(0,r.t7)(p,m,t),E=(0,r.t7)(c,d,t),O=(0,r.t7)(m,y,t),C=(0,r.t7)(d,u,t),F=(0,r.t7)(y,b,t),P=(0,r.t7)(T,E,t),L=(0,r.t7)(M,O,t),j=(0,r.t7)(E,C,t),I=(0,r.t7)(O,F,t);return f._.isObject(e)?(e.x=o,e.y=g,e instanceof _.e&&(e.controls.left.x=P,e.controls.left.y=L,e.controls.right.x=j,e.controls.right.y=I,("boolean"!=typeof e.relative||e.relative)&&(e.controls.left.x-=o,e.controls.left.y-=g,e.controls.right.x-=o,e.controls.right.y-=g)),e.t=t,e):(h=new _.e(o,g,P-o,L-g,j-o,I-g,this._curved?s.G.curve:s.G.line),h.t=t,h)}plot(){if(this.curved)return(0,a.Xn)(this._collection,this.closed),this;for(let t=0;t<this._collection.length;t++)this._collection[t].command=0===t?s.G.move:s.G.line;return this}subdivide(t){this._update();const e=this.vertices.length-1,i=this._closed||this.vertices[e]._command===s.G.close;let n,r=this.vertices[e],a=[];return f._.each(this.vertices,(function(h,o){if(o<=0&&!i)r=h;else{if(h.command===s.G.move)return a.push(new _.e(r.x,r.y)),o>0&&(a[a.length-1].command=s.G.line),void(r=h);n=c(h,r,t),a=a.concat(n),f._.each(n,(function(t,e){e<=0&&r.command===s.G.move?t.command=s.G.move:t.command=s.G.line})),o>=e&&(this._closed&&this._automatic?(r=h,n=c(h,r,t),a=a.concat(n),f._.each(n,(function(t,e){e<=0&&r.command===s.G.move?t.command=s.G.move:t.command=s.G.line}))):i&&a.push(new _.e(h.x,h.y)),a[a.length-1].command=i?s.G.close:s.G.line),r=h}}),this),this._automatic=!1,this._curved=!1,this.vertices=a,this}_updateLength(t,e){e||this._update();const i=this.vertices.length-1;let n=this.vertices[i],r=0;return void 0===this._lengths&&(this._lengths=[]),f._.each(this.vertices,(function(e,i){if(i<=0||e.command===s.G.move)return n=e,void(this._lengths[i]=0);this._lengths[i]=l(e,n,t),r+=this._lengths[i],n=e}),this),this._length=r,this._flagLength=!1,this}_update(){if(this._flagVertices){this._automatic&&this.plot(),this._flagLength&&this._updateLength(void 0,!0);const t=this._collection.length,e=this._closed,i=Math.min(this._beginning,this._ending),n=Math.max(this._beginning,this._ending),r=o(this,i*this._length),a=o(this,n*this._length),l=w(r),c=k(a);let f,d,u,p,m,y;for(this._renderer.vertices.length=0,y=0;y<t;y++)this._renderer.collection.length<=y&&this._renderer.collection.push(new _.e),y>c&&!d?(m=this._renderer.collection[y].copy(this._collection[y]),this.getPointAt(n,m),m.command=this._renderer.collection[y].command,this._renderer.vertices.push(m),d=m,u=this._collection[y-1],u&&u.controls&&(m.relative?m.controls.right.clear():m.controls.right.copy(m),u.relative?this._renderer.collection[y-1].controls.right.copy(u.controls.right).lerp(g.O.zero,1-m.t):this._renderer.collection[y-1].controls.right.copy(u.controls.right).lerp(u,1-m.t))):y>=l&&y<=c&&(m=this._renderer.collection[y].copy(this._collection[y]),this._renderer.vertices.push(m),y===c&&h(this,n)?(d=m,!e&&d.controls&&(d.relative?d.controls.right.clear():d.controls.right.copy(d))):y===l&&h(this,i)&&(f=m,f.command=s.G.move,!e&&f.controls&&(f.relative?f.controls.left.clear():f.controls.left.copy(f))));l>0&&!f&&(y=l-1,m=this._renderer.collection[y].copy(this._collection[y]),this.getPointAt(i,m),m.command=s.G.move,this._renderer.vertices.unshift(m),p=this._collection[y+1],p&&p.controls&&(m.controls.left.clear(),p.relative?this._renderer.collection[y+1].controls.left.copy(p.controls.left).lerp(g.O.zero,m.t):(R.copy(p),this._renderer.collection[y+1].controls.left.copy(p.controls.left).lerp(p,m.t))))}return d.b.prototype._update.apply(this,arguments),this}flagReset(){return this._flagVertices=this._flagLength=this._flagFill=this._flagStroke=this._flagLinewidth=this._flagOpacity=this._flagVisible=this._flagCap=this._flagJoin=this._flagMiter=this._flagClip=!1,d.b.prototype.flagReset.call(this),this}}const S={linewidth:{enumerable:!0,get:function(){return this._linewidth},set:function(t){this._linewidth=t,this._flagLinewidth=!0}},opacity:{enumerable:!0,get:function(){return this._opacity},set:function(t){this._opacity=t,this._flagOpacity=!0}},visible:{enumerable:!0,get:function(){return this._visible},set:function(t){this._visible=t,this._flagVisible=!0}},cap:{enumerable:!0,get:function(){return this._cap},set:function(t){this._cap=t,this._flagCap=!0}},join:{enumerable:!0,get:function(){return this._join},set:function(t){this._join=t,this._flagJoin=!0}},miter:{enumerable:!0,get:function(){return this._miter},set:function(t){this._miter=t,this._flagMiter=!0}},fill:{enumerable:!0,get:function(){return this._fill},set:function(t){(this._fill instanceof p.p||this._fill instanceof m.o||this._fill instanceof y.X||this._fill instanceof b.x)&&this._fill.unbind(u.z.Types.change,this._renderer.flagFill),this._fill=t,this._flagFill=!0,(this._fill instanceof p.p||this._fill instanceof m.o||this._fill instanceof y.X||this._fill instanceof b.x)&&this._fill.bind(u.z.Types.change,this._renderer.flagFill)}},stroke:{enumerable:!0,get:function(){return this._stroke},set:function(t){(this._stroke instanceof p.p||this._stroke instanceof m.o||this._stroke instanceof y.X||this._stroke instanceof b.x)&&this._stroke.unbind(u.z.Types.change,this._renderer.flagStroke),this._stroke=t,this._flagStroke=!0,(this._stroke instanceof p.p||this._stroke instanceof m.o||this._stroke instanceof y.X||this._stroke instanceof b.x)&&this._stroke.bind(u.z.Types.change,this._renderer.flagStroke)}},length:{get:function(){return this._flagLength&&this._updateLength(),this._length}},closed:{enumerable:!0,get:function(){return this._closed},set:function(t){this._closed=!!t,this._flagVertices=!0}},curved:{enumerable:!0,get:function(){return this._curved},set:function(t){this._curved=!!t,this._flagVertices=!0}},automatic:{enumerable:!0,get:function(){return this._automatic},set:function(t){if(t===this._automatic)return;this._automatic=!!t;const e=this._automatic?"ignore":"listen";f._.each(this.vertices,(function(t){t[e]()}))}},beginning:{enumerable:!0,get:function(){return this._beginning},set:function(t){this._beginning=t,this._flagVertices=!0}},ending:{enumerable:!0,get:function(){return this._ending},set:function(t){this._ending=t,this._flagVertices=!0}},vertices:{enumerable:!0,get:function(){return this._collection},set:function(t){const e=this._renderer.bindVertices,i=this._renderer.unbindVertices;this._collection&&this._collection.unbind(u.z.Types.insert,e).unbind(u.z.Types.remove,i),t instanceof n.F?this._collection=t:this._collection=new n.F(t||[]),this._collection.bind(u.z.Types.insert,e).bind(u.z.Types.remove,i),e(this._collection)}},mask:{enumerable:!0,get:function(){return this._mask},set:function(t){this._mask=t,this._flagMask=!0,f._.isObject(t)&&!t.clip&&(t.clip=!0)}},clip:{enumerable:!0,get:function(){return this._clip},set:function(t){this._clip=t,this._flagClip=!0}},dashes:{enumerable:!0,get:function(){return this._dashes},set:function(t){"number"!=typeof t.offset&&(t.offset=this.dashes&&this._dashes.offset||0),this._dashes=t}}};function T(){this._flagVertices=!0,this._flagLength=!0,this.parent&&(this.parent._flagLength=!0)}function M(t){let e=t.length;for(;e--;)t[e].bind(u.z.Types.change,this._renderer.flagVertices);this._renderer.flagVertices()}function E(t){let e=t.length;for(;e--;)t[e].unbind(u.z.Types.change,this._renderer.flagVertices);this._renderer.flagVertices()}function O(){this._flagFill=!0}function C(){this._flagStroke=!0}},665:(t,e,i)=>{i.d(e,{b:()=>l});var s=i(62),n=i(401),r=i(405),a=i(156),h=i(70),o=i(337);class l extends r.W{_flagMatrix=!0;_flagScale=!1;_matrix=null;_worldMatrix=null;_position=null;_rotation=0;_scale=1;_skewX=0;_skewY=0;constructor(){super();for(let t in c)Object.defineProperty(this,t,c[t]);this._renderer.flagMatrix=f.bind(this),this.isShape=!0,this.id=s.g.Identifier+s.g.uniqueId(),this.matrix=new a.y,this.worldMatrix=new a.y,this.position=new h.O,this.rotation=0,this.scale=1,this.skewX=0,this.skewY=0}get renderer(){return this._renderer}set renderer(t){this._renderer=t}get translation(){return c.position.get.apply(this,arguments)}set translation(t){c.position.set.apply(this,arguments)}addTo(t){return t.add(this),this}remove(){return this.parent?(this.parent.remove(this),this):this}clone(t){const e=new l;return e.position.copy(this.position),e.rotation=this.rotation,e.scale=this.scale,e.skewX=this.skewX,e.skewY=this.skewY,this.matrix.manual&&e.matrix.copy(this.matrix),t&&t.add(e),e._update()}_update(t){return!this._matrix.manual&&this._flagMatrix&&(this._matrix.identity().translate(this.position.x,this.position.y),this._scale instanceof h.O?this._matrix.scale(this._scale.x,this._scale.y):this._matrix.scale(this._scale),this._matrix.rotate(this.rotation),this._matrix.skewX(this.skewX),this._matrix.skewY(this.skewY)),t&&this.parent&&this.parent._update&&this.parent._update(),this}flagReset(){return this._flagMatrix=this._flagScale=!1,super.flagReset.call(this),this}}const c={position:{enumerable:!0,get:function(){return this._position},set:function(t){this._position&&this._position.unbind(n.z.Types.change,this._renderer.flagMatrix),this._position=t,this._position.bind(n.z.Types.change,this._renderer.flagMatrix),f.call(this)}},rotation:{enumerable:!0,get:function(){return this._rotation},set:function(t){this._rotation=t,this._flagMatrix=!0}},scale:{enumerable:!0,get:function(){return this._scale},set:function(t){this._scale instanceof h.O&&this._scale.unbind(n.z.Types.change,this._renderer.flagMatrix),this._scale=t,this._scale instanceof h.O&&this._scale.bind(n.z.Types.change,this._renderer.flagMatrix),this._flagMatrix=!0,this._flagScale=!0}},skewX:{enumerable:!0,get:function(){return this._skewX},set:function(t){this._skewX=t,this._flagMatrix=!0}},skewY:{enumerable:!0,get:function(){return this._skewY},set:function(t){this._skewY=t,this._flagMatrix=!0}},matrix:{enumerable:!0,get:function(){return this._matrix},set:function(t){this._matrix=t,this._flagMatrix=!0}},worldMatrix:{enumerable:!0,get:function(){return(0,o.l6)(this,this._worldMatrix),this._worldMatrix},set:function(t){this._worldMatrix=t}}};function f(){this._flagMatrix=!0}},575:(t,e,i)=>{i.r(e),i.d(e,{ArcSegment:()=>o});var s=i(167),n=i(337),r=i(915),a=i(463),h=i(62);class o extends r.y${_flagStartAngle=!1;_flagEndAngle=!1;_flagInnerRadius=!1;_flagOuterRadius=!1;_startAngle=0;_endAngle=n.uo;_innerRadius=0;_outerRadius=0;constructor(t,e,i,s,n,r,o){const c=o||3*h.g.Resolution,f=[];for(let t=0;t<c;t++)f.push(new a.e);super(f,!0,!1,!0);for(let t in l)Object.defineProperty(this,t,l[t]);"number"==typeof i&&(this.innerRadius=i),"number"==typeof s&&(this.outerRadius=s),"number"==typeof n&&(this.startAngle=n),"number"==typeof r&&(this.endAngle=r),this._update(),"number"==typeof t&&(this.translation.x=t),"number"==typeof e&&(this.translation.y=e)}static Properties=["startAngle","endAngle","innerRadius","outerRadius"];_update(){if(this._flagVertices||this._flagStartAngle||this._flagEndAngle||this._flagInnerRadius||this._flagOuterRadius){const t=this._startAngle,e=this._endAngle,i=this._innerRadius,r=this._outerRadius,a=(0,n.YP)(t,n.uo)===(0,n.YP)(e,n.uo),h=i>0,o=this.vertices;let l,c,f,d,u,g,_,p,m,y,b=h?o.length/2:o.length,x=0;for(a?b--:h||(b-=2),c=0,f=b-1;c<b;c++)d=c/f,u=o[x],g=d*(e-t)+t,_=(e-t)/b,p=r*Math.cos(g),m=r*Math.sin(g),l=0===c?s.G.move:s.G.curve,u.command=l,u.x=p,u.y=m,u.controls.left.clear(),u.controls.right.clear(),u.command===s.G.curve&&(y=r*_/Math.PI,u.controls.left.x=y*Math.cos(g-n.pj),u.controls.left.y=y*Math.sin(g-n.pj),u.controls.right.x=y*Math.cos(g+n.pj),u.controls.right.y=y*Math.sin(g+n.pj),1===c&&u.controls.left.multiplyScalar(2),c===f&&u.controls.right.multiplyScalar(2)),x++;if(h){for(a?(o[x].command=s.G.close,x++):(b--,f=b-1),c=0;c<b;c++)d=c/f,u=o[x],g=(1-d)*(e-t)+t,_=(e-t)/b,p=i*Math.cos(g),m=i*Math.sin(g),l=s.G.curve,c<=0&&(l=a?s.G.move:s.G.line),u.command=l,u.x=p,u.y=m,u.controls.left.clear(),u.controls.right.clear(),u.command===s.G.curve&&(y=i*_/Math.PI,u.controls.left.x=y*Math.cos(g+n.pj),u.controls.left.y=y*Math.sin(g+n.pj),u.controls.right.x=y*Math.cos(g-n.pj),u.controls.right.y=y*Math.sin(g-n.pj),1===c&&u.controls.left.multiplyScalar(2),c===f&&u.controls.right.multiplyScalar(2)),x++;o[x].copy(o[0]),o[x].command=s.G.line}else a||(o[x].command=s.G.line,o[x].x=0,o[x].y=0,x++,o[x].copy(o[0]),o[x].command=s.G.line)}return super._update.call(this),this}flagReset(){return super.flagReset.call(this),this._flagStartAngle=this._flagEndAngle=this._flagInnerRadius=this._flagOuterRadius=!1,this}clone(t){const e=this.innerRadius,i=this.outerRadius,s=this.startAngle,n=this.endAngle,a=this.vertices.length,h=new o(0,0,e,i,s,n,a);h.translation.copy(this.translation),h.rotation=this.rotation,h.scale=this.scale,h.skewX=this.skewX,h.skewY=this.skewY,this.matrix.manual&&h.matrix.copy(this.matrix);for(let t=0;t<r.y$.Properties.length;t++){const e=r.y$.Properties[t];h[e]=this[e]}return t&&t.add(h),h}toObject(){const t=super.toObject.call(this);for(let e=0;e<o.Properties.length;e++){const i=o.Properties[e];t[i]=this[i]}return t}}const l={startAngle:{enumerable:!0,get:function(){return this._startAngle},set:function(t){this._startAngle=t,this._flagStartAngle=!0}},endAngle:{enumerable:!0,get:function(){return this._endAngle},set:function(t){this._endAngle=t,this._flagEndAngle=!0}},innerRadius:{enumerable:!0,get:function(){return this._innerRadius},set:function(t){this._innerRadius=t,this._flagInnerRadius=!0}},outerRadius:{enumerable:!0,get:function(){return this._outerRadius},set:function(t){this._outerRadius=t,this._flagOuterRadius=!0}}}},119:(t,e,i)=>{i.r(e),i.d(e,{Circle:()=>l});var s=i(167),n=i(337),r=i(915),a=i(463);const h=Math.cos,o=Math.sin;class l extends r.y${_flagRadius=!1;_radius=0;constructor(t,e,i,s){const n=s?Math.max(s,2):4,r=[];for(let t=0;t<n;t++)r.push(new a.e(0,0,0,0,0,0));super(r,!0,!0,!0);for(let t in c)Object.defineProperty(this,t,c[t]);"number"==typeof i&&(this.radius=i),this._update(),"number"==typeof t&&(this.translation.x=t),"number"==typeof e&&(this.translation.y=e)}static Properties=["radius"];_update(){if(this._flagVertices||this._flagRadius){let t=this.vertices.length;!this._closed&&t>2&&(t-=1);const e=4/3*Math.tan(Math.PI/(2*t)),i=this._radius,r=i*e;for(let e=0;e<this.vertices.length;e++){const a=e/t*n.uo,l=i*h(a),c=i*o(a),f=r*h(a-n.pj),d=r*o(a-n.pj),u=r*h(a+n.pj),g=r*o(a+n.pj),_=this.vertices[e];_.command=0===e?s.G.move:s.G.curve,_.set(l,c),_.controls.left.set(f,d),_.controls.right.set(u,g)}}return super._update.call(this),this}flagReset(){return this._flagRadius=!1,super.flagReset.call(this),this}clone(t){const e=new l(0,0,this.radius,this.vertices.length);e.translation.copy(this.translation),e.rotation=this.rotation,e.scale=this.scale,e.skewX=this.skewX,e.skewY=this.skewY,this.matrix.manual&&e.matrix.copy(this.matrix);for(let t=0;t<r.y$.Properties.length;t++){const i=r.y$.Properties[t];e[i]=this[i]}return t&&t.add(e),e}toObject(){const t=super.toObject.call(this);for(let e=0;e<l.Properties.length;e++){const i=l.Properties[e];t[i]=this[i]}return t}}const c={radius:{enumerable:!0,get:function(){return this._radius},set:function(t){this._radius=t,this._flagRadius=!0}}}},386:(t,e,i)=>{i.r(e),i.d(e,{Line:()=>o});var s=i(167),n=i(538),r=i(890),a=i(915),h=i(463);class o extends a.y${constructor(t,e,i,n){super([new h.e(t,e),new h.e(i,n)]);for(let t in l)Object.defineProperty(this,t,l[t]);this.vertices[0].command=s.G.move,this.vertices[1].command=s.G.line,this.automatic=!1}}const l={left:{enumerable:!0,get:function(){return this.vertices[0]},set:function(t){if(r._.isObject(t))this.vertices.splice(0,1,t);else{const t=new n.S("Two.Line.x argument is not an object.");console.warn(t.name,t.message)}}},right:{enumerable:!0,get:function(){return this.vertices[0]},set:function(t){if(r._.isObject(t))this.vertices.splice(1,1,t);else{const t=new n.S("Two.Line.y argument is not an object.");console.warn(t.name,t.message)}}}}},263:(t,e,i)=>{i.r(e),i.d(e,{RoundedRectangle:()=>o});var s=i(167),n=i(401),r=i(915),a=i(463),h=i(70);class o extends r.y${_flagWidth=!1;_flagHeight=!1;_flagRadius=!1;_width=0;_height=0;_radius=12;constructor(t,e,i,n,r){void 0===r&&"number"==typeof i&&"number"==typeof n&&(r=Math.floor(Math.min(i,n)/12));const h=[];for(let t=0;t<10;t++)h.push(new a.e(0,0,0,0,0,0,0===t?s.G.move:s.G.curve));super(h);for(let t in l)Object.defineProperty(this,t,l[t]);this.closed=!0,this.automatic=!1,this._renderer.flagRadius=c.bind(this),"number"==typeof i&&(this.width=i),"number"==typeof n&&(this.height=n),"number"==typeof r&&(this.radius=r),this._update(),"number"==typeof t&&(this.translation.x=t),"number"==typeof e&&(this.translation.y=e)}static Properties=["width","height","radius"];_update(){if(this._flagVertices||this._flagWidth||this._flagHeight||this._flagRadius){const t=this._width,e=this._height;let i,s,n;this._radius instanceof h.O?(i=this._radius.x,s=this._radius.y):(i=this._radius,s=this._radius);let r=t/2,a=e/2;n=this.vertices[0],n.x=-(r-i),n.y=-a,n=this.vertices[1],n.x=r-i,n.y=-a,n.controls.left.clear(),n.controls.right.x=i,n.controls.right.y=0,n=this.vertices[2],n.x=r,n.y=-(a-s),n.controls.right.clear(),n.controls.left.clear(),n=this.vertices[3],n.x=r,n.y=a-s,n.controls.left.clear(),n.controls.right.x=0,n.controls.right.y=s,n=this.vertices[4],n.x=r-i,n.y=a,n.controls.right.clear(),n.controls.left.clear(),n=this.vertices[5],n.x=-(r-i),n.y=a,n.controls.left.clear(),n.controls.right.x=-i,n.controls.right.y=0,n=this.vertices[6],n.x=-r,n.y=a-s,n.controls.left.clear(),n.controls.right.clear(),n=this.vertices[7],n.x=-r,n.y=-(a-s),n.controls.left.clear(),n.controls.right.x=0,n.controls.right.y=-s,n=this.vertices[8],n.x=-(r-i),n.y=-a,n.controls.left.clear(),n.controls.right.clear(),n=this.vertices[9],n.copy(this.vertices[8])}return super._update.call(this),this}flagReset(){return this._flagWidth=this._flagHeight=this._flagRadius=!1,super.flagReset.call(this),this}clone(t){const e=this.width,i=this.height,s=this.radius,n=new o(0,0,e,i,s);n.translation.copy(this.translation),n.rotation=this.rotation,n.scale=this.scale,n.skewX=this.skewX,n.skewY=this.skewY,this.matrix.manual&&n.matrix.copy(this.matrix);for(let t=0;t<r.y$.Properties.length;t++){const e=r.y$.Properties[t];n[e]=this[e]}return t&&t.add(n),n}toObject(){const t=super.toObject.call(this);for(let e=0;e<o.Properties.length;e++){const i=o.Properties[e];t[i]=this[i]}return t.radius="number"==typeof this.radius?this.radius:this.radius.toObject(),t}}const l={width:{enumerable:!0,get:function(){return this._width},set:function(t){this._width=t,this._flagWidth=!0}},height:{enumerable:!0,get:function(){return this._height},set:function(t){this._height=t,this._flagHeight=!0}},radius:{enumerable:!0,get:function(){return this._radius},set:function(t){this._radius instanceof h.O&&this._radius.unbind(n.z.Types.change,this._renderer.flagRadius),this._radius=t,this._radius instanceof h.O&&this._radius.bind(n.z.Types.change,this._renderer.flagRadius),this._flagRadius=!0}}};function c(){this._flagRadius=!0}},859:(t,e,i)=>{i.r(e),i.d(e,{Text:()=>u});var s=i(337),n=i(401),r=i(890),a=i(665),h=i(297),o=i(235),l=i(559),c=i(32);const f=Math.min,d=Math.max;class u extends a.b{_flagValue=!0;_flagFamily=!0;_flagSize=!0;_flagLeading=!0;_flagAlignment=!0;_flagBaseline=!0;_flagStyle=!0;_flagWeight=!0;_flagDecoration=!0;_flagFill=!0;_flagStroke=!0;_flagLinewidth=!0;_flagOpacity=!0;_flagVisible=!0;_flagMask=!1;_flagClip=!1;_value="";_family="sans-serif";_size=13;_leading=17;_alignment="center";_baseline="middle";_style="normal";_weight=500;_decoration="none";_fill="#000";_stroke="transparent";_linewidth=1;_opacity=1;_visible=!0;_mask=null;_clip=!1;_dashes=null;constructor(t,e,i,s){super();for(let t in g)Object.defineProperty(this,t,g[t]);if(this._renderer.type="text",this._renderer.flagFill=_.bind(this),this._renderer.flagStroke=p.bind(this),this.value=t,"number"==typeof e&&(this.translation.x=e),"number"==typeof i&&(this.translation.y=i),this.dashes=[],this.dashes.offset=0,!r._.isObject(s))return this;for(let t=0;t<u.Properties.length;t++){const e=u.Properties[t];e in s&&(this[e]=s[e])}}static Ratio=.6;static Properties=["value","family","size","leading","alignment","linewidth","style","weight","decoration","baseline","opacity","visible","fill","stroke"];clone(t){const e=new u(this.value);e.translation.copy(this.translation),e.rotation=this.rotation,e.scale=this.scale;for(let t=0;t<u.Properties.length;t++){const i=u.Properties[t];e[i]=this[i]}return this.matrix.manual&&e.matrix.copy(this.matrix),t&&t.add(e),e._update()}toObject(){const t={translation:this.translation.toObject(),rotation:this.rotation,scale:this.scale};this.matrix.manual&&(t.matrix=this.matrix.toObject());for(let e=0;e<u.Properties.length;e++){const i=u.Properties[e];t[i]=this[i]}return t}noFill(){return this.fill="transparent",this}noStroke(){return this.stroke=void 0,this.linewidth=void 0,this}getBoundingClientRect(t){let e,i,n,r,a,h,o,l,c;this._update(!0),e=t?this._matrix:(0,s.l6)(this);const g=this.leading,_=this.value.length*this.size*u.Ratio,p=(this._linewidth||0)/2;switch(this.alignment){case"left":h=-p,o=_+p;break;case"right":h=-(_+p),o=p;break;default:h=-(_/2+p),o=_/2+p}switch(this.baseline){case"top":l=-p,c=g+p;break;case"bottom":l=-(g+p),c=p;break;default:l=-(g/2+p),c=g/2+p}return i=e.multiply(h,l,1),n=e.multiply(h,c,1),r=e.multiply(o,l,1),a=e.multiply(o,c,1),l=f(i.y,n.y,r.y,a.y),h=f(i.x,n.x,r.x,a.x),o=d(i.x,n.x,r.x,a.x),c=d(i.y,n.y,r.y,a.y),{top:l,left:h,right:o,bottom:c,width:o-h,height:c-l}}flagReset(){return super.flagReset.call(this),this._flagValue=this._flagFamily=this._flagSize=this._flagLeading=this._flagAlignment=this._flagFill=this._flagStroke=this._flagLinewidth=this._flagOpacity=this._flagVisible=this._flagClip=this._flagDecoration=this._flagClassName=this._flagBaseline=this._flagWeight=this._flagStyle=!1,this}}const g={value:{enumerable:!0,get:function(){return this._value},set:function(t){this._value=t,this._flagValue=!0}},family:{enumerable:!0,get:function(){return this._family},set:function(t){this._family=t,this._flagFamily=!0}},size:{enumerable:!0,get:function(){return this._size},set:function(t){this._size=t,this._flagSize=!0}},leading:{enumerable:!0,get:function(){return this._leading},set:function(t){this._leading=t,this._flagLeading=!0}},alignment:{enumerable:!0,get:function(){return this._alignment},set:function(t){this._alignment=t,this._flagAlignment=!0}},linewidth:{enumerable:!0,get:function(){return this._linewidth},set:function(t){this._linewidth=t,this._flagLinewidth=!0}},style:{enumerable:!0,get:function(){return this._style},set:function(t){this._style=t,this._flagStyle=!0}},weight:{enumerable:!0,get:function(){return this._weight},set:function(t){this._weight=t,this._flagWeight=!0}},decoration:{enumerable:!0,get:function(){return this._decoration},set:function(t){this._decoration=t,this._flagDecoration=!0}},baseline:{enumerable:!0,get:function(){return this._baseline},set:function(t){this._baseline=t,this._flagBaseline=!0}},opacity:{enumerable:!0,get:function(){return this._opacity},set:function(t){this._opacity=t,this._flagOpacity=!0}},visible:{enumerable:!0,get:function(){return this._visible},set:function(t){this._visible=t,this._flagVisible=!0}},fill:{enumerable:!0,get:function(){return this._fill},set:function(t){(this._fill instanceof h.p||this._fill instanceof o.o||this._fill instanceof l.X||this._fill instanceof c.x)&&this._fill.unbind(n.z.Types.change,this._renderer.flagFill),this._fill=t,this._flagFill=!0,(this._fill instanceof h.p||this._fill instanceof o.o||this._fill instanceof l.X||this._fill instanceof c.x)&&this._fill.bind(n.z.Types.change,this._renderer.flagFill)}},stroke:{enumerable:!0,get:function(){return this._stroke},set:function(t){(this._stroke instanceof h.p||this._stroke instanceof o.o||this._stroke instanceof l.X||this._stroke instanceof c.x)&&this._stroke.unbind(n.z.Types.change,this._renderer.flagStroke),this._stroke=t,this._flagStroke=!0,(this._stroke instanceof h.p||this._stroke instanceof o.o||this._stroke instanceof l.X||this._stroke instanceof c.x)&&this._stroke.bind(n.z.Types.change,this._renderer.flagStroke)}},mask:{enumerable:!0,get:function(){return this._mask},set:function(t){this._mask=t,this._flagMask=!0,r._.isObject(t)&&!t.clip&&(t.clip=!0)}},clip:{enumerable:!0,get:function(){return this._clip},set:function(t){this._clip=t,this._flagClip=!0}},dashes:{enumerable:!0,get:function(){return this._dashes},set:function(t){"number"!=typeof t.offset&&(t.offset=this.dashes&&this._dashes.offset||0),this._dashes=t}}};function _(){this._flagFill=!0}function p(){this._flagStroke=!0}},129:(t,e,i)=>{i.d(e,{Hy:()=>h,Js:()=>l,NW:()=>o,Um:()=>c,Xn:()=>d,eY:()=>f});var s=i(337),n=i(167),r=i(463),a=i(70);i(62);const h={CollinearityEpsilon:Math.pow(10,-30),RecursionLimit:16,CuspLimit:0,Tolerance:{distance:.25,angle:0,epsilon:Number.EPSILON},abscissas:[[.5773502691896257],[0,.7745966692414834],[.33998104358485626,.8611363115940526],[0,.5384693101056831,.906179845938664],[.2386191860831969,.6612093864662645,.932469514203152],[0,.4058451513773972,.7415311855993945,.9491079123427585],[.1834346424956498,.525532409916329,.7966664774136267,.9602898564975363],[0,.3242534234038089,.6133714327005904,.8360311073266358,.9681602395076261],[.14887433898163122,.4333953941292472,.6794095682990244,.8650633666889845,.9739065285171717],[0,.26954315595234496,.5190961292068118,.7301520055740494,.8870625997680953,.978228658146057],[.1252334085114689,.3678314989981802,.5873179542866175,.7699026741943047,.9041172563704749,.9815606342467192],[0,.2304583159551348,.44849275103644687,.6423493394403402,.8015780907333099,.9175983992229779,.9841830547185881],[.10805494870734367,.31911236892788974,.5152486363581541,.6872929048116855,.827201315069765,.9284348836635735,.9862838086968123],[0,.20119409399743451,.3941513470775634,.5709721726085388,.7244177313601701,.8482065834104272,.937273392400706,.9879925180204854],[.09501250983763744,.2816035507792589,.45801677765722737,.6178762444026438,.755404408355003,.8656312023878318,.9445750230732326,.9894009349916499]],weights:[[1],[.8888888888888888,.5555555555555556],[.6521451548625461,.34785484513745385],[.5688888888888889,.47862867049936647,.23692688505618908],[.46791393457269104,.3607615730481386,.17132449237917036],[.4179591836734694,.3818300505051189,.27970539148927664,.1294849661688697],[.362683783378362,.31370664587788727,.22238103445337448,.10122853629037626],[.3302393550012598,.31234707704000286,.26061069640293544,.1806481606948574,.08127438836157441],[.29552422471475287,.26926671930999635,.21908636251598204,.1494513491505806,.06667134430868814],[.2729250867779006,.26280454451024665,.23319376459199048,.18629021092773426,.1255803694649046,.05566856711617366],[.24914704581340277,.2334925365383548,.20316742672306592,.16007832854334622,.10693932599531843,.04717533638651183],[.2325515532308739,.22628318026289723,.2078160475368885,.17814598076194574,.13887351021978725,.09212149983772845,.04048400476531588],[.2152638534631578,.2051984637212956,.18553839747793782,.15720316715819355,.12151857068790319,.08015808715976021,.03511946033175186],[.2025782419255613,.19843148532711158,.1861610000155622,.16626920581699392,.13957067792615432,.10715922046717194,.07036604748810812,.03075324199611727],[.1894506104550685,.18260341504492358,.16915651939500254,.14959598881657674,.12462897125553388,.09515851168249279,.062253523938647894,.027152459411754096]]};function o(t,e,i,s,n){const r=1-t;return r*r*r*e+3*r*r*t*i+3*r*t*t*s+t*t*t*n}function l(t,e,i,s,n,a,l,c,f){const d=(f=f||h.RecursionLimit)+1;if(Math.abs(t-l)<.001&&Math.abs(e-c)<.001)return[new r.e(l,c)];const u=[];for(let h=0;h<d;h++){const f=h/d,g=o(f,t,i,n,l),_=o(f,e,s,a,c);u.push(new r.e(g,_))}return u}function c(t,e,i,s,n,r,a,o,l){if(t===i&&e===s&&n===a&&r===o){const i=a-t,s=o-e;return Math.sqrt(i*i+s*s)}const c=9*(i-n)+3*(a-t),f=6*(t+n)-12*i,d=3*(i-t),u=9*(s-r)+3*(o-e),g=6*(e+r)-12*s,_=3*(s-e);return function(t,e,i,s){let n=h.abscissas[s-2],r=h.weights[s-2],a=0,o=s+1>>1,l=1&s?r[a++]*t(.5):0;for(;a<o;){const e=.5*n[a];l+=r[a++]*(t(.5+e)+t(.5-e))}return.5*l}((function(t){const e=(c*t+f)*t+d,i=(u*t+g)*t+_;return Math.sqrt(e*e+i*i)}),0,0,l||h.RecursionLimit)}function f(t,e,i,s,n,r,a,h){const o=[],l=[[],[]];let c,f,d,u,g,_,p,m;for(let l=0;l<2;++l)if(0==l?(f=6*t-12*i+6*n,c=-3*t+9*i-9*n+3*a,d=3*i-3*t):(f=6*e-12*s+6*r,c=-3*e+9*s-9*r+3*h,d=3*s-3*e),Math.abs(c)<1e-12){if(Math.abs(f)<1e-12)continue;u=-d/f,0<u&&u<1&&o.push(u)}else p=f*f-4*d*c,m=Math.sqrt(p),p<0||(g=(-f+m)/(2*c),0<g&&g<1&&o.push(g),_=(-f-m)/(2*c),0<_&&_<1&&o.push(_));let y,b=o.length,x=b;for(;b--;)u=o[b],y=1-u,l[0][b]=y*y*y*t+3*y*y*u*i+3*y*u*u*n+u*u*u*a,l[1][b]=y*y*y*e+3*y*y*u*s+3*y*u*u*r+u*u*u*h;return l[0][x]=t,l[1][x]=e,l[0][x+1]=a,l[1][x+1]=h,l[0].length=l[1].length=x+2,{min:{x:Math.min.apply(0,l[0]),y:Math.min.apply(0,l[1])},max:{x:Math.max.apply(0,l[0]),y:Math.max.apply(0,l[1])}}}function d(t,e){const i=t.length,r=i-1;for(let a=0;a<i;a++){const h=t[a],o=e?(0,s.YP)(a-1,i):Math.max(a-1,0),l=e?(0,s.YP)(a+1,i):Math.min(a+1,r),c=h;u(t[o],c,t[l]),c.command=0===a?n.G.move:n.G.curve}}function u(t,e,i){const n=a.O.angleBetween(t,e),r=a.O.angleBetween(i,e);let h=a.O.distanceBetween(t,e),o=a.O.distanceBetween(i,e),l=(n+r)/2;return h<1e-4||o<1e-4?("boolean"!=typeof e.relative||e.relative||(e.controls.left.copy(e),e.controls.right.copy(e)),e):(h*=.33,o*=.33,r<n?l+=s.pj:l-=s.pj,e.controls.left.x=Math.cos(l)*h,e.controls.left.y=Math.sin(l)*h,l-=Math.PI,e.controls.right.x=Math.cos(l)*o,e.controls.right.y=Math.sin(l)*o,"boolean"!=typeof e.relative||e.relative||(e.controls.left.x+=e.x,e.controls.left.y+=e.y,e.controls.right.x+=e.x,e.controls.right.y+=e.y),e)}},538:(t,e,i)=>{i.d(e,{S:()=>s});class s extends Error{name="Two.js";message;constructor(t){super(),this.message=t}}},337:(t,e,i)=>{i.d(e,{FH:()=>g,M6:()=>o,YP:()=>f,cV:()=>h,l6:()=>l,pj:()=>a,t7:()=>c,uo:()=>r,wQ:()=>d});var s=i(109);let n;const r=2*Math.PI,a=.5*Math.PI;function h(t,e,i,s,n,r){let a;return arguments.length<=1?(a=t.a,e=t.b,i=t.c,s=t.d,n=t.e,r=t.f):a=t,{translateX:n,translateY:r,scaleX:Math.sqrt(a*a+e*e),scaleY:Math.sqrt(i*i+s*s),rotation:180*Math.atan2(e,a)/Math.PI}}function o(t){n=t}function l(t,e){e=e&&e.identity()||new n;let i=t;const s=[];for(;i&&i._matrix;)s.push(i._matrix),i=i.parent;s.reverse();for(let t=0;t<s.length;t++){const i=s[t].elements;e.multiply(i[0],i[1],i[2],i[3],i[4],i[5],i[6],i[7],i[8],i[9])}return e}function c(t,e,i){return i*(e-t)+t}function f(t,e){for(;t<0;)t+=e;return t%e}const d=s.J.Float32Array||Array,u=Math.floor;function g(t){return u(1e6*t)/1e6}},167:(t,e,i)=>{i.d(e,{G:()=>s});const s={move:"M",line:"L",curve:"C",arc:"A",close:"Z"}},109:(t,e,i)=>{let s;i.d(e,{J:()=>s}),"undefined"!=typeof window?s=window:void 0!==i.g?s=i.g:"undefined"!=typeof self&&(s=self)},890:(t,e,i)=>{i.d(e,{_:()=>r});var s=i(109);const n=Array.prototype.slice,r={isNaN:function(t){return"number"==typeof t&&t!==+t},isElement:function(t){return!(!t||1!==t.nodeType)},isObject:function(t){const e=typeof t;return"function"===e||"object"===e&&!!t},extend:function(t){const e=n.call(arguments,1);for(let i=0;i<e.length;i++){const s=e[i];for(let e in s)t[e]=s[e]}return t},defaults:function(t){const e=n.call(arguments,1);for(let i=0;i<e.length;i++){const s=e[i];for(let e in s)void 0===t[e]&&(t[e]=s[e])}return t},each:function(t,e,i){const s=i||this,n=!function(t){if(null==t)return!1;const e=t.length;return"number"==typeof e&&e>=0&&e<4294967296}(t)&&Object.keys(t),r=(n||t).length;for(let i=0;i<r;i++){const r=n?n[i]:i;e.call(s,t[r],r,t)}return t},performance:s.J.performance&&s.J.performance.now?s.J.performance:Date}},70:(t,e,i)=>{i.d(e,{O:()=>r});var s=i(401);const n={x:{enumerable:!0,get:function(){return this._x},set:function(t){this._x!==t&&(this._x=t,this._bound&&this.dispatchEvent(s.z.Types.change))}},y:{enumerable:!0,get:function(){return this._y},set:function(t){this._y!==t&&(this._y=t,this._bound&&this.dispatchEvent(s.z.Types.change))}}};class r extends s.z{_x=0;_y=0;constructor(t=0,e=0){super();for(let t in n)Object.defineProperty(this,t,n[t]);this.x=t,this.y=e}static zero=new r;static left=new r(-1,0);static right=new r(1,0);static up=new r(0,-1);static down=new r(0,1);static add(t,e){return new r(t.x+e.x,t.y+e.y)}static sub(t,e){return new r(t.x-e.x,t.y-e.y)}static subtract(t,e){return r.sub(t,e)}static ratioBetween(t,e){return(t.x*e.x+t.y*e.y)/(t.length()*e.length())}static angleBetween(t,e){if(arguments.length>=4){const t=arguments[0]-arguments[2],e=arguments[1]-arguments[3];return Math.atan2(e,t)}const i=t.x-e.x,s=t.y-e.y;return Math.atan2(s,i)}static distanceBetween(t,e){return Math.sqrt(r.distanceBetweenSquared(t,e))}static distanceBetweenSquared(t,e){const i=t.x-e.x,s=t.y-e.y;return i*i+s*s}set(t,e){return this.x=t,this.y=e,this}copy(t){return this.x=t.x,this.y=t.y,this}clear(){return this.x=0,this.y=0,this}clone(){return new r(this.x,this.y)}add(t,e){return arguments.length<=0||(arguments.length<=1?"number"==typeof t?(this.x+=t,this.y+=t):t&&"number"==typeof t.x&&"number"==typeof t.y&&(this.x+=t.x,this.y+=t.y):(this.x+=t,this.y+=e)),this}addSelf(t){return this.add.apply(this,arguments)}sub(t,e){return arguments.length<=0||(arguments.length<=1?"number"==typeof t?(this.x-=t,this.y-=t):t&&"number"==typeof t.x&&"number"==typeof t.y&&(this.x-=t.x,this.y-=t.y):(this.x-=t,this.y-=e)),this}subtract(){return this.sub.apply(this,arguments)}subSelf(t){return this.sub.apply(this,arguments)}subtractSelf(t){return this.sub.apply(this,arguments)}multiply(t,e){return arguments.length<=0||(arguments.length<=1?"number"==typeof t?(this.x*=t,this.y*=t):t&&"number"==typeof t.x&&"number"==typeof t.y&&(this.x*=t.x,this.y*=t.y):(this.x*=t,this.y*=e)),this}multiplySelf(t){return this.multiply.apply(this,arguments)}multiplyScalar(t){return this.multiply(t)}divide(t,e){return arguments.length<=0||(arguments.length<=1?"number"==typeof t?(this.x/=t,this.y/=t):t&&"number"==typeof t.x&&"number"==typeof t.y&&(this.x/=t.x,this.y/=t.y):(this.x/=t,this.y/=e),isNaN(this.x)&&(this.x=0),isNaN(this.y)&&(this.y=0)),this}divideSelf(t){return this.divide.apply(this,arguments)}divideScalar(t){return this.divide(t)}negate(){return this.multiply(-1)}dot(t){return this.x*t.x+this.y*t.y}length(){return Math.sqrt(this.lengthSquared())}lengthSquared(){return this.x*this.x+this.y*this.y}normalize(){return this.divideScalar(this.length())}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,i=this.y-t.y;return e*e+i*i}setLength(t){return this.normalize().multiplyScalar(t)}equals(t,e){return e=void 0===e?1e-4:e,this.distanceTo(t)<e}lerp(t,e){const i=(t.x-this.x)*e+this.x,s=(t.y-this.y)*e+this.y;return this.set(i,s)}isZero(t){return t=void 0===t?1e-4:t,this.length()<t}toString(){return this.x+", "+this.y}toObject(){return{x:this.x,y:this.y}}rotate(t){const e=this.x,i=this.y,s=Math.cos(t),n=Math.sin(t);return this.x=e*s-i*n,this.y=e*n+i*s,this}}},121:t=>{t.exports=JSON.parse('[{"label":"B°","color":"#60ff00a0","fingerings":[{"frets":[-1,2,0,4,3,1],"fingers":[-1,2,0,4,3,1]}]},{"label":"F♯°","color":"#00ff00a0","fingerings":[{"frets":[2,-1,-1,2,1,2],"fingers":[2,-1,-1,3,1,4]}]},{"label":"C♯°","color":"#00ff80a0","fingerings":[{"frets":[-1,4,2,0,2,0],"fingers":[-1,4,1,0,2,0]}]},{"label":"G♯°","color":"#00bfbfa0","fingerings":[{"frets":[-1,2,0,1,3,4],"fingers":[-1,2,0,1,3,4]}]},{"label":"D♯°","color":"#2222ffa0","fingerings":[{"frets":[-1,-1,4,2,4,2],"fingers":[-1,-1,3,1,4,1]}]},{"label":"A♯°","color":"#8000ffa0","fingerings":[{"frets":[-1,1,2,3,2,0],"fingers":[-1,1,2,4,3,0]}]},{"label":"F°","color":"#ff0080a0","fingerings":[{"frets":[-1,-1,3,1,0,1],"fingers":[-1,-1,4,1,0,2]}]},{"label":"C°","color":"#ff0000a0","fingerings":[{"frets":[-1,-1,4,5,4,2],"fingers":[-1,-1,2,4,3,1]}]},{"label":"G°","color":"#ff4000a0","fingerings":[{"frets":[-1,1,-1,0,2,3],"fingers":[-1,1,-1,0,2,3]}]},{"label":"D°","color":"#ffbf00a0","fingerings":[{"frets":[-1,-1,0,1,3,1],"fingers":[-1,-1,0,1,3,1]}]},{"label":"A°","color":"#ffff00a0","fingerings":[{"frets":[-1,0,1,2,1,-1],"fingers":[-1,0,1,3,2,-1]}]},{"label":"E°","color":"#bfff00a0","fingerings":[{"frets":[-1,-1,2,3,5,3],"fingers":[-1,-1,1,2,4,3]}]}]')},557:t=>{t.exports=JSON.parse('[{"label":"C","color":"#ff0000a0","fingerings":[{"frets":[-1,3,2,0,1,0],"fingers":[-1,3,2,0,1,0]}]},{"label":"G","color":"#ff4000a0","fingerings":[{"frets":[3,2,0,0,0,3],"fingers":[2,1,0,0,0,3]}]},{"label":"D","color":"#ffbf00a0","fingerings":[{"frets":[-1,-1,0,2,3,2],"fingers":[-1,-1,0,1,3,2]}]},{"label":"A","color":"#ffff00a0","fingerings":[{"frets":[-1,0,2,2,2,0],"fingers":[-1,0,1,2,3,0]}]},{"label":"E","color":"#bfff00a0","fingerings":[{"frets":[0,2,2,1,0,0],"fingers":[0,2,3,1,0,0]}]},{"label":"B","color":"#60ff00a0","fingerings":[{"frets":[-1,2,4,4,4,-1],"fingers":[-1,1,3,3,3,-1]}]},{"label":"G♭","color":"#00ff00a0","fingerings":[{"frets":[2,4,4,3,2,2],"fingers":[1,3,4,2,1,1]}]},{"label":"D♭","color":"#00ff80a0","fingerings":[{"frets":[-1,4,3,1,2,1],"fingers":[-1,4,3,1,2,1]}]},{"label":"A♭","color":"#00bfbfa0","fingerings":[{"frets":[4,3,1,1,1,-1],"fingers":[4,3,1,1,1,-1]}]},{"label":"E♭","color":"#2222ffa0","fingerings":[{"frets":[-1,-1,1,3,4,3],"fingers":[-1,-1,1,2,4,3]}]},{"label":"B♭","color":"#8000ffa0","fingerings":[{"frets":[-1,-1,0,3,3,1],"fingers":[-1,-1,0,3,4,1]}]},{"label":"F","color":"#ff0080a0","fingerings":[{"frets":[1,3,3,2,1,1],"fingers":[1,3,4,2,1,1]}]}]')},147:t=>{t.exports=JSON.parse('[{"label":"Am","color":"#ffff00a0","fingerings":[{"frets":[-1,0,2,2,1,0],"fingers":[-1,0,2,3,1,0]}]},{"label":"Em","color":"#bfff00a0","fingerings":[{"frets":[0,2,2,0,0,0],"fingers":[0,2,3,0,0,0]}]},{"label":"Bm","color":"#60ff00a0","fingerings":[{"frets":[-1,2,4,4,3,2],"fingers":[-1,1,3,4,2,1]}]},{"label":"F♯m","color":"#00ff00a0","fingerings":[{"frets":[2,4,4,2,2,2],"fingers":[1,3,4,1,1,1]}]},{"label":"C♯m","color":"#00ff80a0","fingerings":[{"frets":[-1,-1,2,1,2,0],"fingers":[-1,-1,2,1,3,0]}]},{"label":"G♯m","color":"#00bfbfa0","fingerings":[{"frets":[-1,-1,1,4,4,4],"fingers":[-1,-1,1,4,4,4]}]},{"label":"E♭m","color":"#2222ffa0","fingerings":[{"frets":[-1,-1,1,3,4,2],"fingers":[-1,-1,1,3,4,2]}]},{"label":"B♭m","color":"#8000ffa0","fingerings":[{"frets":[-1,1,3,3,2,1],"fingers":[-1,1,3,4,2,1]}]},{"label":"Fm","color":"#ff0080a0","fingerings":[{"frets":[1,3,3,1,1,1],"fingers":[1,3,4,1,1,1]}]},{"label":"Cm","color":"#ff0000a0","fingerings":[{"frets":[-1,3,1,0,1,-1],"fingers":[-1,4,2,0,1,-1]}]},{"label":"Gm","color":"#ff4000a0","fingerings":[{"frets":[3,1,0,0,3,3],"fingers":[2,1,0,0,3,4]}]},{"label":"Dm","color":"#ffbf00a0","fingerings":[{"frets":[-1,-1,0,2,3,1],"fingers":[-1,-1,0,2,3,1]}]}]')}},e={};function i(s){var n=e[s];if(void 0!==n)return n.exports;var r=e[s]={exports:{}};return t[s](r,r.exports,i),r.exports}i.d=(t,e)=>{for(var s in e)i.o(e,s)&&!i.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),i.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{const t=i(734),e=i(651),s=i(683),n=i(579);customElements.define("fretboard-component",s.default);const r=i(557),a=i(147),h=i(121),o=window.screen.availWidth,l=window.screen.availHeight;document.getElementById("screen-size").innerHTML=`${o} x ${l}`,document.getElementById("window-size").innerHTML=`${window.innerWidth} x ${window.innerHeight}`,window.onresize=()=>{document.getElementById("window-size").innerHTML=`${window.innerWidth} x ${window.innerHeight}`};const c=new t.default(r,a,h),f=new e.default("cof"),d=new n.default("key-signature");f.addKeyChangeListener(c),f.addKeyChangeListener(d),f.addKeyChangeListener(new class{onKeyChanged(t){document.getElementById("key-title").innerHTML=r[t].label}}),window.onbeforeprint=()=>{c.setPrinting(!0),f.setPrinting(!0),d.setPrinting(!0)},window.onafterprint=()=>{c.setPrinting(!1),f.setPrinting(!1),d.setPrinting(!1)}})()})();